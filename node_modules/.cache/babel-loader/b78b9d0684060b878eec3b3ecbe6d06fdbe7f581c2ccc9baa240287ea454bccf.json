{"ast":null,"code":"// src/components/PatientTemplateDetail.js\nimport React,{useState,useEffect}from'react';import{useParams,Link,useLocation}from'react-router-dom';import axios from'axios';import'../styles/routineTemplates.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PatientTemplateDetail(){var _location$state,_template$tags;const{instanceId}=useParams();const location=useLocation();const[instance,setInstance]=useState(((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.instance)||null);const[loading,setLoading]=useState(!instance);const[error,setError]=useState(null);useEffect(()=>{if(instance)return;const fetchDetail=async()=>{const token=localStorage.getItem('token');if(!token){setError('No estás autenticado.');setLoading(false);return;}try{const res=await axios.get('/api/routines/instances',{headers:{'x-auth-token':token}});const found=res.data.find(i=>i._id===instanceId);setInstance(found||null);}catch(err){console.error(err);setError('Error cargando detalle');}finally{setLoading(false);}};fetchDetail();},[instanceId,instance]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Cargando detalle\\u2026\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:error});if(!instance)return/*#__PURE__*/_jsx(\"p\",{children:\"No se encontr\\xF3 la plantilla.\"});const{template,completedActivities}=instance;return/*#__PURE__*/_jsx(\"div\",{className:\"routine-templates-page patient-templates-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-container\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/patient/templates\",className:\"back-btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-arrow-left\"}),\" Volver\"]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Detalle de: \",template.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"tpl-desc\",children:template.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-meta\",children:[\"Duraci\\xF3n: \",template.duration,\" min | Tags: \",(_template$tags=template.tags)===null||_template$tags===void 0?void 0:_template$tags.join(', ')]}),/*#__PURE__*/_jsx(\"ul\",{className:\"tpl-activities-list\",children:template.activities.map((act,i)=>{const completed=completedActivities.includes(i);return/*#__PURE__*/_jsxs(\"li\",{className:\"activity-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:completed,readOnly:true}),/*#__PURE__*/_jsxs(\"span\",{className:completed?'completed':'',children:[act.name,\" \\u2013 Nivel \",act.challenge,\" \\u2013 \",act.minutes,\" min\"]})]}),act.desc&&/*#__PURE__*/_jsx(\"p\",{className:\"activity-desc\",children:act.desc})]},i);})})]})});}","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useLocation","axios","jsx","_jsx","jsxs","_jsxs","PatientTemplateDetail","_location$state","_template$tags","instanceId","location","instance","setInstance","state","loading","setLoading","error","setError","fetchDetail","token","localStorage","getItem","res","get","headers","found","data","find","i","_id","err","console","children","className","template","completedActivities","to","name","description","duration","tags","join","activities","map","act","completed","includes","type","checked","readOnly","challenge","minutes","desc"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientTemplatesDetail.js"],"sourcesContent":["// src/components/PatientTemplateDetail.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, Link, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport '../styles/routineTemplates.css';\r\n\r\nexport default function PatientTemplateDetail() {\r\n  const { instanceId } = useParams();\r\n  const location       = useLocation();\r\n  const [instance, setInstance] = useState(location.state?.instance || null);\r\n  const [loading, setLoading]   = useState(!instance);\r\n  const [error, setError]       = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (instance) return;\r\n    const fetchDetail = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setError('No estás autenticado.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      try {\r\n        const res = await axios.get('/api/routines/instances', {\r\n          headers: { 'x-auth-token': token }\r\n        });\r\n        const found = res.data.find(i => i._id === instanceId);\r\n        setInstance(found || null);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError('Error cargando detalle');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchDetail();\r\n  }, [instanceId, instance]);\r\n\r\n  if (loading) return <p>Cargando detalle…</p>;\r\n  if (error)   return <p className=\"error-msg\">{error}</p>;\r\n  if (!instance) return <p>No se encontró la plantilla.</p>;\r\n\r\n  const { template, completedActivities } = instance;\r\n\r\n  return (\r\n    <div className=\"routine-templates-page patient-templates-page\">\r\n      <div className=\"tpl-container\">\r\n        <Link to=\"/patient/templates\" className=\"back-btn\">\r\n          <i className=\"fa fa-arrow-left\"></i> Volver\r\n        </Link>\r\n        <h1>Detalle de: {template.name}</h1>\r\n        <p className=\"tpl-desc\">{template.description}</p>\r\n        <div className=\"tpl-meta\">\r\n          Duración: {template.duration} min |  \r\n          Tags: {template.tags?.join(', ')}\r\n        </div>\r\n        <ul className=\"tpl-activities-list\">\r\n          {template.activities.map((act, i) => {\r\n            const completed = completedActivities.includes(i);\r\n            return (\r\n              <li key={i} className=\"activity-item\">\r\n                <label>\r\n                  <input type=\"checkbox\" checked={completed} readOnly />\r\n                  <span className={completed ? 'completed' : ''}>\r\n                    {act.name} – Nivel {act.challenge} – {act.minutes} min\r\n                  </span>\r\n                </label>\r\n                {act.desc && (\r\n                  <p className=\"activity-desc\">{act.desc}</p>\r\n                )}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}