{"ast":null,"code":"import React,{useState,useEffect}from'react';import routineTemplateService from'../services/routineTemplateService';import'../styles/routineTemplates.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RoutineTemplates(_ref){let{patients,onAssign}=_ref;const[templates,setTemplates]=useState([]);const[form,setForm]=useState({title:'',description:'',type:'Física',duration:30});const[modal,setModal]=useState({open:false,templateId:null,patientId:''});useEffect(()=>{(async()=>{try{const data=await routineTemplateService.getTemplates();setTemplates(data);}catch(error){console.error(error);}})();},[]);const handleChange=e=>setForm({...form,[e.target.name]:e.target.value});const handleCreate=async e=>{e.preventDefault();try{const newTpl=await routineTemplateService.createTemplate(form);setTemplates(prev=>[...prev,newTpl]);setForm({title:'',description:'',type:'Física',duration:30});}catch(error){console.error(error);}};const openAssign=id=>setModal({open:true,templateId:id,patientId:''});const closeAssign=()=>setModal({open:false,templateId:null,patientId:''});const handleAssign=async()=>{try{await routineTemplateService.assignTemplate(modal.templateId,modal.patientId);onAssign&&onAssign();closeAssign();}catch(error){console.error(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"rt-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Plantillas de Rutinas\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"rt-form\",onSubmit:handleCreate,children:[/*#__PURE__*/_jsx(\"input\",{name:\"title\",value:form.title,onChange:handleChange,placeholder:\"T\\xEDtulo\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,placeholder:\"Descripci\\xF3n\",required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:form.type,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"F\\xEDsica\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Mental\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Social\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Otra\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"duration\",type:\"number\",min:\"1\",value:form.duration,onChange:handleChange,placeholder:\"Duraci\\xF3n (min)\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-create\",children:\"Crear Plantilla\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rt-list\",children:templates.map(t=>/*#__PURE__*/_jsxs(\"div\",{className:\"rt-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t.title}),/*#__PURE__*/_jsx(\"p\",{children:t.description}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tipo:\"}),\" \",t.type,\" | \",/*#__PURE__*/_jsx(\"strong\",{children:\"Duraci\\xF3n:\"}),' ',t.duration,\" min\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-assign\",onClick:()=>openAssign(t._id),children:\"Asignar\"})]},t._id))}),modal.open&&/*#__PURE__*/_jsx(\"div\",{className:\"rt-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rt-modal-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Asignar rutina\"}),/*#__PURE__*/_jsxs(\"select\",{value:modal.patientId,onChange:e=>setModal({...modal,patientId:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona paciente\"}),patients.map(p=>/*#__PURE__*/_jsxs(\"option\",{value:p._id,children:[p.nombre,\" \",p.apellidos]},p._id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rt-modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAssign,disabled:!modal.patientId,children:\"Confirmar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeAssign,className:\"btn-cancel\",children:\"Cancelar\"})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","routineTemplateService","jsx","_jsx","jsxs","_jsxs","RoutineTemplates","_ref","patients","onAssign","templates","setTemplates","form","setForm","title","description","type","duration","modal","setModal","open","templateId","patientId","data","getTemplates","error","console","handleChange","e","target","name","value","handleCreate","preventDefault","newTpl","createTemplate","prev","openAssign","id","closeAssign","handleAssign","assignTemplate","className","children","onSubmit","onChange","placeholder","required","min","map","t","onClick","_id","p","nombre","apellidos","disabled"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/CreateRoutineTemplate.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport routineTemplateService from '../services/routineTemplateService';\r\nimport '../styles/routineTemplates.css';\r\n\r\nexport default function RoutineTemplates({ patients, onAssign }) {\r\n  const [templates, setTemplates] = useState([]);\r\n  const [form, setForm]           = useState({\r\n    title: '', description: '', type: 'Física', duration: 30\r\n  });\r\n  const [modal, setModal]         = useState({\r\n    open: false, templateId: null, patientId: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const data = await routineTemplateService.getTemplates();\r\n        setTemplates(data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleChange = e =>\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleCreate = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      const newTpl = await routineTemplateService.createTemplate(form);\r\n      setTemplates(prev => [...prev, newTpl]);\r\n      setForm({ title: '', description: '', type: 'Física', duration: 30 });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const openAssign  = id =>\r\n    setModal({ open: true, templateId: id, patientId: '' });\r\n  const closeAssign = () =>\r\n    setModal({ open: false, templateId: null, patientId: '' });\r\n\r\n  const handleAssign = async () => {\r\n    try {\r\n      await routineTemplateService.assignTemplate(\r\n        modal.templateId, modal.patientId\r\n      );\r\n      onAssign && onAssign();\r\n      closeAssign();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"rt-container\">\r\n      <h2>Plantillas de Rutinas</h2>\r\n\r\n      {/* Formulario de creación */}\r\n      <form className=\"rt-form\" onSubmit={handleCreate}>\r\n        <input\r\n          name=\"title\"\r\n          value={form.title}\r\n          onChange={handleChange}\r\n          placeholder=\"Título\"\r\n          required\r\n        />\r\n        <textarea\r\n          name=\"description\"\r\n          value={form.description}\r\n          onChange={handleChange}\r\n          placeholder=\"Descripción\"\r\n          required\r\n        />\r\n        <select\r\n          name=\"type\"\r\n          value={form.type}\r\n          onChange={handleChange}\r\n        >\r\n          <option>Física</option>\r\n          <option>Mental</option>\r\n          <option>Social</option>\r\n          <option>Otra</option>\r\n        </select>\r\n        <input\r\n          name=\"duration\"\r\n          type=\"number\"\r\n          min=\"1\"\r\n          value={form.duration}\r\n          onChange={handleChange}\r\n          placeholder=\"Duración (min)\"\r\n          required\r\n        />\r\n        <button type=\"submit\" className=\"btn-create\">\r\n          Crear Plantilla\r\n        </button>\r\n      </form>\r\n\r\n      {/* Lista de plantillas */}\r\n      <div className=\"rt-list\">\r\n        {templates.map(t => (\r\n          <div key={t._id} className=\"rt-card\">\r\n            <h3>{t.title}</h3>\r\n            <p>{t.description}</p>\r\n            <p>\r\n              <strong>Tipo:</strong> {t.type} | <strong>Duración:</strong>{' '}\r\n              {t.duration} min\r\n            </p>\r\n            <button\r\n              className=\"btn-assign\"\r\n              onClick={() => openAssign(t._id)}\r\n            >\r\n              Asignar\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Modal de asignación */}\r\n      {modal.open && (\r\n        <div className=\"rt-modal\">\r\n          <div className=\"rt-modal-content\">\r\n            <h3>Asignar rutina</h3>\r\n            <select\r\n              value={modal.patientId}\r\n              onChange={e =>\r\n                setModal({ ...modal, patientId: e.target.value })\r\n              }\r\n            >\r\n              <option value=\"\">Selecciona paciente</option>\r\n              {patients.map(p => (\r\n                <option key={p._id} value={p._id}>\r\n                  {p.nombre} {p.apellidos}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <div className=\"rt-modal-actions\">\r\n              <button\r\n                onClick={handleAssign}\r\n                disabled={!modal.patientId}\r\n              >\r\n                Confirmar\r\n              </button>\r\n              <button onClick={closeAssign} className=\"btn-cancel\">\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}