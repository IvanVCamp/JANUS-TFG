{"ast":null,"code":"import React,{useState,useEffect}from'react';// Usamos el fork mantenido de react-beautiful-dnd:\nimport{DragDropContext,Droppable,Draggable}from'@hello-pangea/dnd';import axios from'axios';import{useNavigate,useLocation}from'react-router-dom';import'../styles/timeMachineGame.css';// Lista de actividades iniciales (pool)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initialActivities=[{id:'futbol',title:'Jugar al f√∫tbol',icon:'‚öΩ',defaultDuration:60},{id:'dibujos',title:'Ver dibujos animados',icon:'üì∫',defaultDuration:60},{id:'comics',title:'Leer c√≥mics',icon:'üìö',defaultDuration:60},{id:'tarea',title:'Hacer tarea',icon:'üìù',defaultDuration:60},{id:'videojuegos',title:'Jugar videojuegos',icon:'üéÆ',defaultDuration:60},{id:'helado',title:'Comer helado',icon:'üç¶',defaultDuration:60},{id:'parque',title:'Ir al parque',icon:'üèûÔ∏è',defaultDuration:60},{id:'banio',title:'Ba√±arse',icon:'üõÅ',defaultDuration:60},{id:'dormir',title:'Dormir',icon:'üò¥',defaultDuration:60},{id:'musica',title:'Escuchar m√∫sica',icon:'üéµ',defaultDuration:60},{id:'bailar',title:'Bailar',icon:'üíÉ',defaultDuration:60},{id:'amigos',title:'Jugar con amigos',icon:'üë´',defaultDuration:60},{id:'bicicleta',title:'Montar en bicicleta',icon:'üö≤',defaultDuration:60},{id:'dibujar',title:'Dibujar',icon:'üé®',defaultDuration:60},{id:'mascotas',title:'Jugar con mascotas',icon:'üê∂',defaultDuration:60},{id:'experimentos',title:'Hacer experimentos',icon:'üî¨',defaultDuration:60},{id:'cantar',title:'Cantar',icon:'üé§',defaultDuration:60},{id:'lego',title:'Construir con LEGO',icon:'üß±',defaultDuration:60},{id:'nadar',title:'Nadar',icon:'üèä',defaultDuration:60},{id:'computadora',title:'Jugar en la computadora',icon:'üíª',defaultDuration:60}];// Funci√≥n para generar los 24 timeSlots\nconst generateTimeSlots=()=>{const slots=[];for(let i=0;i<24;i++){const label=`${String(i).padStart(2,'0')}:00`;slots.push({id:label,activities:[]});}return slots;};function decodeJwt(token){try{const b64=token.split('.')[1].replace(/-/g,'+').replace(/_/g,'/');return JSON.parse(atob(b64));}catch{return{};}}function TimeMachineGame(){const navigate=useNavigate();const location=useLocation();// Detectar si se pas√≥ un par√°metro \"patientId\" (modo vista / snapshot)\nconst searchParams=new URLSearchParams(location.search);const queryPatientId=searchParams.get('patientId');const isViewMode=Boolean(queryPatientId);const[selectedDay,setSelectedDay]=useState('Mi√©rcoles');const[poolActivities]=useState(initialActivities);const[timeSlots,setTimeSlots]=useState(generateTimeSlots());const[userRole,setUserRole]=useState(null);// Verificar token; si no existe, redirigir al login\nuseEffect(()=>{var _payload$user;const token=localStorage.getItem('token');if(!token){navigate('/');return;}const payload=decodeJwt(token);setUserRole(((_payload$user=payload.user)===null||_payload$user===void 0?void 0:_payload$user.role)||payload.role);},[navigate]);// Si estamos en modo vista, se obtiene el snapshot guardado de la M√°quina del Tiempo\nuseEffect(()=>{if(isViewMode){const fetchSnapshot=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(`/api/game?patientId=${queryPatientId}`,{headers:{'x-auth-token':token}});if(response.data&&response.data.length>0){const snapshot=response.data[0];// tomamos el √∫ltimo guardado\nsetSelectedDay(snapshot.day);// Reconstruir los timeSlots: se toman los slots generados y se rellenan con las actividades del snapshot\nconst snapshotSlots=generateTimeSlots().map(slot=>{const matching=snapshot.timeSlots.find(s=>s.slot===slot.id);if(matching){return{id:slot.id,activities:matching.activities};}return slot;});setTimeSlots(snapshotSlots);}}catch(err){console.error(\"Error al obtener snapshot de la M√°quina del Tiempo:\",err);}};fetchSnapshot();}},[isViewMode,queryPatientId]);const handleGoBack=()=>{if(userRole==='therapist'){navigate('/therapist/patients');}else{navigate('/dashboard');}};// Funci√≥n onDragEnd: si est√° en modo vista, se deshabilita la edici√≥n\nconst onDragEnd=result=>{if(isViewMode)return;const{source,destination,draggableId}=result;if(!destination)return;// Si se suelta en el pool, eliminamos el elemento del slot de origen\nif(destination.droppableId==='pool'){if(source.droppableId!=='pool'){const newSlots=[...timeSlots];const sourceSlotIndex=newSlots.findIndex(slot=>slot.id===source.droppableId);if(sourceSlotIndex!==-1){newSlots[sourceSlotIndex].activities.splice(source.index,1);setTimeSlots(newSlots);}}return;}// Si el elemento viene del pool, se copia a la posici√≥n destino\nif(source.droppableId==='pool'){const originalId=draggableId.replace('pool-','');const activity=poolActivities.find(act=>act.id===originalId);if(!activity)return;const instance={...activity,instanceId:`${activity.id}-${Date.now()}`,duration:activity.defaultDuration};const slotIndex=timeSlots.findIndex(slot=>slot.id===destination.droppableId);if(slotIndex===-1)return;const newSlots=[...timeSlots];newSlots[slotIndex].activities.splice(destination.index,0,instance);setTimeSlots(newSlots);return;}// Movimiento entre slots\nconst newSlots=[...timeSlots];const sourceSlotIndex=newSlots.findIndex(slot=>slot.id===source.droppableId);const destinationSlotIndex=newSlots.findIndex(slot=>slot.id===destination.droppableId);if(sourceSlotIndex===-1||destinationSlotIndex===-1)return;const[movedItem]=newSlots[sourceSlotIndex].activities.splice(source.index,1);newSlots[destinationSlotIndex].activities.splice(destination.index,0,movedItem);setTimeSlots(newSlots);};const handleDurationChange=(slotId,instanceId,newDuration)=>{if(isViewMode)return;setTimeSlots(prev=>prev.map(slot=>slot.id===slotId?{...slot,activities:slot.activities.map(act=>act.instanceId===instanceId?{...act,duration:newDuration}:act)}:slot));};// Funci√≥n para guardar el resultado (s√≥lo en modo edici√≥n)\nconst handleSaveResult=async()=>{if(isViewMode)return;const token=localStorage.getItem('token');const payload={day:selectedDay,timeSlots:timeSlots.filter(slot=>slot.activities.length>0).map(slot=>({slot:slot.id,activities:slot.activities.map(act=>({activityId:act.id,title:act.title,icon:act.icon,slot:slot.id,duration:act.duration}))}))};try{await axios.post('/api/game',payload,{headers:{'x-auth-token':token}});alert('¬°Tu d√≠a ha sido guardado!');handleGoBack();}catch(err){console.error(err);alert('Error al guardar el resultado.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"time-machine-game-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"tmg-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-dashboard-btn\",onClick:handleGoBack,children:\"\\u2190\"}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"La M\\xE1quina del Tiempo \",isViewMode&&\"- Snapshot\"]})]}),!isViewMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-day-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"day-select\",children:\"Elige un d\\xEDa:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"day-select\",value:selectedDay,onChange:e=>setSelectedDay(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"Mi\\xE9rcoles\",children:\"Mi\\xE9rcoles\"}),/*#__PURE__*/_jsx(\"option\",{value:\"S\\xE1bado\",children:\"S\\xE1bado\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-instructions\",children:!isViewMode?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA1Esta es tu m\\xE1quina del tiempo! Arrastra las actividades que normalmente haces un \",selectedDay,\". Ajusta el tiempo deslizando la barra para cada actividad.\"]}):/*#__PURE__*/_jsx(\"p\",{children:\"Vista del \\xFAltimo d\\xEDa guardado.\"})}),!isViewMode&&/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:onDragEnd,children:/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-pool\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Actividades Divertidas\"}),/*#__PURE__*/_jsx(Droppable,{droppableId:\"pool\",isCombineEnabled:false,renderClone:(provided,snapshot,rubric)=>{const activity=poolActivities[rubric.source.index];return/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-activity-card\",ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:activity.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:activity.title})]});},children:provided=>/*#__PURE__*/_jsxs(\"div\",{ref:provided.innerRef,...provided.droppableProps,children:[poolActivities.map((activity,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:`pool-${activity.id}`,index:index,children:providedDraggable=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-activity-card\",ref:providedDraggable.innerRef,...providedDraggable.draggableProps,...providedDraggable.dragHandleProps,children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:activity.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:activity.title})]})},`pool-${activity.id}`)),provided.placeholder]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-board\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Organiza tu d\\xEDa\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slots\",children:timeSlots.map(slot=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slot-header\",children:slot.id}),/*#__PURE__*/_jsx(Droppable,{droppableId:slot.id,isCombineEnabled:false,children:provided=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-body\",ref:provided.innerRef,...provided.droppableProps,children:[slot.activities.map((act,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:act.instanceId,index:index,children:providedDraggable=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity\",ref:providedDraggable.innerRef,...providedDraggable.draggableProps,...providedDraggable.dragHandleProps,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:act.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:act.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-duration-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"30\",max:\"120\",step:\"15\",value:act.duration,onChange:e=>handleDurationChange(slot.id,act.instanceId,parseInt(e.target.value,10))}),/*#__PURE__*/_jsxs(\"span\",{children:[act.duration,\" min\"]})]})]})},act.instanceId)),provided.placeholder]})})]},slot.id))})]})]})}),isViewMode&&/*#__PURE__*/_jsx(\"div\",{className:\"tmg-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-board\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Organiza tu d\\xEDa\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slots\",children:timeSlots.map(slot=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slot-header\",children:slot.id}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slot-body\",children:slot.activities.map((act,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:act.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:act.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-duration-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"30\",max:\"120\",step:\"15\",value:act.duration,disabled:true}),/*#__PURE__*/_jsxs(\"span\",{children:[act.duration,\" min\"]})]})]},index))})]},slot.id))})]})}),!isViewMode&&/*#__PURE__*/_jsx(\"div\",{className:\"tmg-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"tmg-save-btn\",onClick:handleSaveResult,children:\"Guardar mi d\\xEDa\"})})]});}export default TimeMachineGame;","map":{"version":3,"names":["React","useState","useEffect","DragDropContext","Droppable","Draggable","axios","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","initialActivities","id","title","icon","defaultDuration","generateTimeSlots","slots","i","label","String","padStart","push","activities","decodeJwt","token","b64","split","replace","JSON","parse","atob","TimeMachineGame","navigate","location","searchParams","URLSearchParams","search","queryPatientId","get","isViewMode","Boolean","selectedDay","setSelectedDay","poolActivities","timeSlots","setTimeSlots","userRole","setUserRole","_payload$user","localStorage","getItem","payload","user","role","fetchSnapshot","response","headers","data","length","snapshot","day","snapshotSlots","map","slot","matching","find","s","err","console","error","handleGoBack","onDragEnd","result","source","destination","draggableId","droppableId","newSlots","sourceSlotIndex","findIndex","splice","index","originalId","activity","act","instance","instanceId","Date","now","duration","slotIndex","destinationSlotIndex","movedItem","handleDurationChange","slotId","newDuration","prev","handleSaveResult","filter","activityId","post","alert","className","children","onClick","htmlFor","value","onChange","e","target","isCombineEnabled","renderClone","provided","rubric","ref","innerRef","draggableProps","dragHandleProps","droppableProps","providedDraggable","placeholder","type","min","max","step","parseInt","disabled"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/TimeMachineGame.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// Usamos el fork mantenido de react-beautiful-dnd:\r\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\r\nimport axios from 'axios';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport '../styles/timeMachineGame.css';\r\n\r\n// Lista de actividades iniciales (pool)\r\nconst initialActivities = [\r\n  { id: 'futbol', title: 'Jugar al f√∫tbol', icon: '‚öΩ', defaultDuration: 60 },\r\n  { id: 'dibujos', title: 'Ver dibujos animados', icon: 'üì∫', defaultDuration: 60 },\r\n  { id: 'comics', title: 'Leer c√≥mics', icon: 'üìö', defaultDuration: 60 },\r\n  { id: 'tarea', title: 'Hacer tarea', icon: 'üìù', defaultDuration: 60 },\r\n  { id: 'videojuegos', title: 'Jugar videojuegos', icon: 'üéÆ', defaultDuration: 60 },\r\n  { id: 'helado', title: 'Comer helado', icon: 'üç¶', defaultDuration: 60 },\r\n  { id: 'parque', title: 'Ir al parque', icon: 'üèûÔ∏è', defaultDuration: 60 },\r\n  { id: 'banio', title: 'Ba√±arse', icon: 'üõÅ', defaultDuration: 60 },\r\n  { id: 'dormir', title: 'Dormir', icon: 'üò¥', defaultDuration: 60 },\r\n  { id: 'musica', title: 'Escuchar m√∫sica', icon: 'üéµ', defaultDuration: 60 },\r\n  { id: 'bailar', title: 'Bailar', icon: 'üíÉ', defaultDuration: 60 },\r\n  { id: 'amigos', title: 'Jugar con amigos', icon: 'üë´', defaultDuration: 60 },\r\n  { id: 'bicicleta', title: 'Montar en bicicleta', icon: 'üö≤', defaultDuration: 60 },\r\n  { id: 'dibujar', title: 'Dibujar', icon: 'üé®', defaultDuration: 60 },\r\n  { id: 'mascotas', title: 'Jugar con mascotas', icon: 'üê∂', defaultDuration: 60 },\r\n  { id: 'experimentos', title: 'Hacer experimentos', icon: 'üî¨', defaultDuration: 60 },\r\n  { id: 'cantar', title: 'Cantar', icon: 'üé§', defaultDuration: 60 },\r\n  { id: 'lego', title: 'Construir con LEGO', icon: 'üß±', defaultDuration: 60 },\r\n  { id: 'nadar', title: 'Nadar', icon: 'üèä', defaultDuration: 60 },\r\n  { id: 'computadora', title: 'Jugar en la computadora', icon: 'üíª', defaultDuration: 60 }\r\n];\r\n\r\n// Funci√≥n para generar los 24 timeSlots\r\nconst generateTimeSlots = () => {\r\n  const slots = [];\r\n  for (let i = 0; i < 24; i++) {\r\n    const label = `${String(i).padStart(2, '0')}:00`;\r\n    slots.push({ id: label, activities: [] });\r\n  }\r\n  return slots;\r\n};\r\n\r\nfunction decodeJwt(token) {\r\n  try {\r\n    const b64 = token.split('.')[1].replace(/-/g, '+').replace(/_/g, '/');\r\n    return JSON.parse(atob(b64));\r\n  } catch {\r\n    return {};\r\n  }\r\n}\r\n\r\nfunction TimeMachineGame() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  // Detectar si se pas√≥ un par√°metro \"patientId\" (modo vista / snapshot)\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const queryPatientId = searchParams.get('patientId');\r\n  const isViewMode = Boolean(queryPatientId);\r\n\r\n  const [selectedDay, setSelectedDay] = useState('Mi√©rcoles');\r\n  const [poolActivities] = useState(initialActivities);\r\n  const [timeSlots, setTimeSlots] = useState(generateTimeSlots());\r\n  const [userRole, setUserRole] = useState(null);\r\n\r\n  // Verificar token; si no existe, redirigir al login\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n    const payload = decodeJwt(token);\r\n    setUserRole(payload.user?.role || payload.role);\r\n  }, [navigate]);\r\n\r\n  // Si estamos en modo vista, se obtiene el snapshot guardado de la M√°quina del Tiempo\r\n  useEffect(() => {\r\n    if (isViewMode) {\r\n      const fetchSnapshot = async () => {\r\n        try {\r\n          const token = localStorage.getItem('token');\r\n          const response = await axios.get(`/api/game?patientId=${queryPatientId}`, {\r\n            headers: { 'x-auth-token': token }\r\n          });\r\n          if (response.data && response.data.length > 0) {\r\n            const snapshot = response.data[0]; // tomamos el √∫ltimo guardado\r\n            setSelectedDay(snapshot.day);\r\n            // Reconstruir los timeSlots: se toman los slots generados y se rellenan con las actividades del snapshot\r\n            const snapshotSlots = generateTimeSlots().map(slot => {\r\n              const matching = snapshot.timeSlots.find(s => s.slot === slot.id);\r\n              if (matching) {\r\n                return { id: slot.id, activities: matching.activities };\r\n              }\r\n              return slot;\r\n            });\r\n            setTimeSlots(snapshotSlots);\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Error al obtener snapshot de la M√°quina del Tiempo:\", err);\r\n        }\r\n      };\r\n      fetchSnapshot();\r\n    }\r\n  }, [isViewMode, queryPatientId]);\r\n\r\n  const handleGoBack = () => {\r\n    if (userRole === 'therapist') {\r\n      navigate('/therapist/patients');\r\n    } else {\r\n      navigate('/dashboard');\r\n    }\r\n  };\r\n\r\n  \r\n  // Funci√≥n onDragEnd: si est√° en modo vista, se deshabilita la edici√≥n\r\n  const onDragEnd = (result) => {\r\n    if (isViewMode) return;\r\n    const { source, destination, draggableId } = result;\r\n    if (!destination) return;\r\n\r\n    // Si se suelta en el pool, eliminamos el elemento del slot de origen\r\n    if (destination.droppableId === 'pool') {\r\n      if (source.droppableId !== 'pool') {\r\n        const newSlots = [...timeSlots];\r\n        const sourceSlotIndex = newSlots.findIndex(slot => slot.id === source.droppableId);\r\n        if (sourceSlotIndex !== -1) {\r\n          newSlots[sourceSlotIndex].activities.splice(source.index, 1);\r\n          setTimeSlots(newSlots);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Si el elemento viene del pool, se copia a la posici√≥n destino\r\n    if (source.droppableId === 'pool') {\r\n      const originalId = draggableId.replace('pool-', '');\r\n      const activity = poolActivities.find(act => act.id === originalId);\r\n      if (!activity) return;\r\n      const instance = {\r\n        ...activity,\r\n        instanceId: `${activity.id}-${Date.now()}`,\r\n        duration: activity.defaultDuration\r\n      };\r\n      const slotIndex = timeSlots.findIndex(slot => slot.id === destination.droppableId);\r\n      if (slotIndex === -1) return;\r\n      const newSlots = [...timeSlots];\r\n      newSlots[slotIndex].activities.splice(destination.index, 0, instance);\r\n      setTimeSlots(newSlots);\r\n      return;\r\n    }\r\n\r\n    // Movimiento entre slots\r\n    const newSlots = [...timeSlots];\r\n    const sourceSlotIndex = newSlots.findIndex(slot => slot.id === source.droppableId);\r\n    const destinationSlotIndex = newSlots.findIndex(slot => slot.id === destination.droppableId);\r\n    if (sourceSlotIndex === -1 || destinationSlotIndex === -1) return;\r\n    const [movedItem] = newSlots[sourceSlotIndex].activities.splice(source.index, 1);\r\n    newSlots[destinationSlotIndex].activities.splice(destination.index, 0, movedItem);\r\n    setTimeSlots(newSlots);\r\n  };\r\n\r\n  const handleDurationChange = (slotId, instanceId, newDuration) => {\r\n    if (isViewMode) return;\r\n    setTimeSlots(prev =>\r\n      prev.map(slot =>\r\n        slot.id === slotId\r\n          ? {\r\n              ...slot,\r\n              activities: slot.activities.map(act =>\r\n                act.instanceId === instanceId ? { ...act, duration: newDuration } : act\r\n              )\r\n            }\r\n          : slot\r\n      )\r\n    );\r\n  };\r\n\r\n  // Funci√≥n para guardar el resultado (s√≥lo en modo edici√≥n)\r\n  const handleSaveResult = async () => {\r\n    if (isViewMode) return;\r\n    const token = localStorage.getItem('token');\r\n    const payload = {\r\n      day: selectedDay,\r\n      timeSlots: timeSlots\r\n        .filter(slot => slot.activities.length > 0)\r\n        .map(slot => ({\r\n          slot: slot.id,\r\n          activities: slot.activities.map(act => ({\r\n            activityId: act.id,\r\n            title: act.title,\r\n            icon: act.icon,\r\n            slot: slot.id,\r\n            duration: act.duration\r\n          }))\r\n        }))\r\n    };\r\n    try {\r\n      await axios.post('/api/game', payload, {\r\n        headers: { 'x-auth-token': token }\r\n      });\r\n      alert('¬°Tu d√≠a ha sido guardado!');\r\n      handleGoBack();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Error al guardar el resultado.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"time-machine-game-container\">\r\n      <header className=\"tmg-header\">\r\n        <div className=\"tmg-header-left\">\r\n          <button className=\"back-dashboard-btn\" onClick={handleGoBack}>‚Üê</button>\r\n          <h1>\r\n            La M√°quina del Tiempo {isViewMode && \"- Snapshot\"}\r\n          </h1>\r\n        </div>\r\n        {!isViewMode && (\r\n          <div className=\"tmg-day-selector\">\r\n            <label htmlFor=\"day-select\">Elige un d√≠a:</label>\r\n            <select id=\"day-select\" value={selectedDay} onChange={(e) => setSelectedDay(e.target.value)}>\r\n              <option value=\"Mi√©rcoles\">Mi√©rcoles</option>\r\n              <option value=\"S√°bado\">S√°bado</option>\r\n            </select>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      <div className=\"tmg-instructions\">\r\n        {!isViewMode ? (\r\n          <p>\r\n            ¬°Esta es tu m√°quina del tiempo! Arrastra las actividades que normalmente haces un {selectedDay}.\r\n            Ajusta el tiempo deslizando la barra para cada actividad.\r\n          </p>\r\n        ) : (\r\n          <p>\r\n            Vista del √∫ltimo d√≠a guardado.\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Si no estamos en modo vista, se muestra el pool y la posibilidad de arrastrar */}\r\n      {!isViewMode && (\r\n        <DragDropContext onDragEnd={onDragEnd}>\r\n          <div className=\"tmg-content\">\r\n            {/* Panel de Pool */}\r\n            <div className=\"tmg-pool\">\r\n              <h2>Actividades Divertidas</h2>\r\n              <Droppable\r\n                droppableId=\"pool\"\r\n                isCombineEnabled={false}\r\n                renderClone={(provided, snapshot, rubric) => {\r\n                  const activity = poolActivities[rubric.source.index];\r\n                  return (\r\n                    <div\r\n                      className=\"tmg-activity-card\"\r\n                      ref={provided.innerRef}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                    >\r\n                      <span className=\"tmg-activity-icon\">{activity.icon}</span>\r\n                      <span className=\"tmg-activity-title\">{activity.title}</span>\r\n                    </div>\r\n                  );\r\n                }}\r\n              >\r\n                {(provided) => (\r\n                  <div ref={provided.innerRef} {...provided.droppableProps}>\r\n                    {poolActivities.map((activity, index) => (\r\n                      <Draggable\r\n                        key={`pool-${activity.id}`}\r\n                        draggableId={`pool-${activity.id}`}\r\n                        index={index}\r\n                      >\r\n                        {(providedDraggable) => (\r\n                          <div\r\n                            className=\"tmg-activity-card\"\r\n                            ref={providedDraggable.innerRef}\r\n                            {...providedDraggable.draggableProps}\r\n                            {...providedDraggable.dragHandleProps}\r\n                          >\r\n                            <span className=\"tmg-activity-icon\">{activity.icon}</span>\r\n                            <span className=\"tmg-activity-title\">{activity.title}</span>\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n\r\n            {/* Panel de Organizaci√≥n: los timeSlots */}\r\n            <div className=\"tmg-board\">\r\n              <h2>Organiza tu d√≠a</h2>\r\n              <div className=\"tmg-slots\">\r\n                {timeSlots.map(slot => (\r\n                  <div key={slot.id} className=\"tmg-slot\">\r\n                    <div className=\"tmg-slot-header\">{slot.id}</div>\r\n                    <Droppable droppableId={slot.id} isCombineEnabled={false}>\r\n                      {(provided) => (\r\n                        <div\r\n                          className=\"tmg-slot-body\"\r\n                          ref={provided.innerRef}\r\n                          {...provided.droppableProps}\r\n                        >\r\n                          {slot.activities.map((act, index) => (\r\n                            <Draggable key={act.instanceId} draggableId={act.instanceId} index={index}>\r\n                              {(providedDraggable) => (\r\n                                <div\r\n                                  className=\"tmg-slot-activity\"\r\n                                  ref={providedDraggable.innerRef}\r\n                                  {...providedDraggable.draggableProps}\r\n                                  {...providedDraggable.dragHandleProps}\r\n                                >\r\n                                  <div className=\"tmg-slot-activity-header\">\r\n                                    <span className=\"tmg-activity-icon\">{act.icon}</span>\r\n                                    <span className=\"tmg-activity-title\">{act.title}</span>\r\n                                  </div>\r\n                                  <div className=\"tmg-duration-control\">\r\n                                    <input\r\n                                      type=\"range\"\r\n                                      min=\"30\"\r\n                                      max=\"120\"\r\n                                      step=\"15\"\r\n                                      value={act.duration}\r\n                                      onChange={(e) =>\r\n                                        handleDurationChange(\r\n                                          slot.id,\r\n                                          act.instanceId,\r\n                                          parseInt(e.target.value, 10)\r\n                                        )\r\n                                      }\r\n                                    />\r\n                                    <span>{act.duration} min</span>\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n                            </Draggable>\r\n                          ))}\r\n                          {provided.placeholder}\r\n                        </div>\r\n                      )}\r\n                    </Droppable>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </DragDropContext>\r\n      )}\r\n\r\n      {/* En modo vista se muestra el snapshot de forma de solo lectura */}\r\n      {isViewMode && (\r\n        <div className=\"tmg-content\">\r\n          <div className=\"tmg-board\">\r\n            <h2>Organiza tu d√≠a</h2>\r\n            <div className=\"tmg-slots\">\r\n              {timeSlots.map(slot => (\r\n                <div key={slot.id} className=\"tmg-slot\">\r\n                  <div className=\"tmg-slot-header\">{slot.id}</div>\r\n                  <div className=\"tmg-slot-body\">\r\n                    {slot.activities.map((act, index) => (\r\n                      <div key={index} className=\"tmg-slot-activity\">\r\n                        <div className=\"tmg-slot-activity-header\">\r\n                          <span className=\"tmg-activity-icon\">{act.icon}</span>\r\n                          <span className=\"tmg-activity-title\">{act.title}</span>\r\n                        </div>\r\n                        <div className=\"tmg-duration-control\">\r\n                          <input\r\n                            type=\"range\"\r\n                            min=\"30\"\r\n                            max=\"120\"\r\n                            step=\"15\"\r\n                            value={act.duration}\r\n                            disabled\r\n                          />\r\n                          <span>{act.duration} min</span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* El bot√≥n para guardar s√≥lo aparece en modo edici√≥n */}\r\n      {!isViewMode && (\r\n        <div className=\"tmg-actions\">\r\n          <button className=\"tmg-save-btn\" onClick={handleSaveResult}>\r\n            Guardar mi d√≠a\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TimeMachineGame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}