{"ast":null,"code":"import React,{useState,useEffect}from'react';// Usamos el fork mantenido de react-beautiful-dnd:\nimport{DragDropContext,Droppable,Draggable}from'@hello-pangea/dnd';import axios from'axios';import{useNavigate,useLocation}from'react-router-dom';import'../styles/timeMachineGame.css';// Lista de actividades iniciales (pool)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initialActivities=[{id:'futbol',title:'Jugar al f√∫tbol',icon:'‚öΩ',defaultDuration:60},{id:'dibujos',title:'Ver dibujos animados',icon:'üì∫',defaultDuration:60},{id:'comics',title:'Leer c√≥mics',icon:'üìö',defaultDuration:60},{id:'tarea',title:'Hacer tarea',icon:'üìù',defaultDuration:60},{id:'videojuegos',title:'Jugar videojuegos',icon:'üéÆ',defaultDuration:60},{id:'helado',title:'Comer helado',icon:'üç¶',defaultDuration:60},{id:'parque',title:'Ir al parque',icon:'üèûÔ∏è',defaultDuration:60},{id:'banio',title:'Ba√±arse',icon:'üõÅ',defaultDuration:60},{id:'dormir',title:'Dormir',icon:'üò¥',defaultDuration:60},{id:'musica',title:'Escuchar m√∫sica',icon:'üéµ',defaultDuration:60},{id:'bailar',title:'Bailar',icon:'üíÉ',defaultDuration:60},{id:'amigos',title:'Jugar con amigos',icon:'üë´',defaultDuration:60},{id:'bicicleta',title:'Montar en bicicleta',icon:'üö≤',defaultDuration:60},{id:'dibujar',title:'Dibujar',icon:'üé®',defaultDuration:60},{id:'mascotas',title:'Jugar con mascotas',icon:'üê∂',defaultDuration:60},{id:'experimentos',title:'Hacer experimentos',icon:'üî¨',defaultDuration:60},{id:'cantar',title:'Cantar',icon:'üé§',defaultDuration:60},{id:'lego',title:'Construir con LEGO',icon:'üß±',defaultDuration:60},{id:'nadar',title:'Nadar',icon:'üèä',defaultDuration:60},{id:'computadora',title:'Jugar en la computadora',icon:'üíª',defaultDuration:60}];// Funci√≥n para generar los 24 timeSlots\nconst generateTimeSlots=()=>{const slots=[];for(let i=0;i<24;i++){const label=`${String(i).padStart(2,'0')}:00`;slots.push({id:label,activities:[]});}return slots;};function TimeMachineGame(){const navigate=useNavigate();const location=useLocation();// Detectar si se pas√≥ un par√°metro \"patientId\" (modo vista / snapshot)\nconst searchParams=new URLSearchParams(location.search);const queryPatientId=searchParams.get('patientId');const isViewMode=Boolean(queryPatientId);const[selectedDay,setSelectedDay]=useState('Mi√©rcoles');const[poolActivities]=useState(initialActivities);const[timeSlots,setTimeSlots]=useState(generateTimeSlots());// Verificar token; si no existe, redirigir al login\nuseEffect(()=>{const token=localStorage.getItem('token');if(!token){navigate('/');}},[navigate]);// Si estamos en modo vista, se obtiene el snapshot guardado de la M√°quina del Tiempo\nuseEffect(()=>{if(isViewMode){const fetchSnapshot=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(`https://janus-1030141284513.europe-southwest1.run.app/api/game?patientId=${queryPatientId}`,{headers:{'x-auth-token':token}});if(response.data&&response.data.length>0){const snapshot=response.data[0];// tomamos el √∫ltimo guardado\nsetSelectedDay(snapshot.day);// Reconstruir los timeSlots: se toman los slots generados y se rellenan con las actividades del snapshot\nconst snapshotSlots=generateTimeSlots().map(slot=>{const matching=snapshot.timeSlots.find(s=>s.slot===slot.id);if(matching){return{id:slot.id,activities:matching.activities};}return slot;});setTimeSlots(snapshotSlots);}}catch(err){console.error(\"Error al obtener snapshot de la M√°quina del Tiempo:\",err);}};fetchSnapshot();}},[isViewMode,queryPatientId]);// Funci√≥n onDragEnd: si est√° en modo vista, se deshabilita la edici√≥n\nconst onDragEnd=result=>{if(isViewMode)return;const{source,destination,draggableId}=result;if(!destination)return;// Si se suelta en el pool, eliminamos el elemento del slot de origen\nif(destination.droppableId==='pool'){if(source.droppableId!=='pool'){const newSlots=[...timeSlots];const sourceSlotIndex=newSlots.findIndex(slot=>slot.id===source.droppableId);if(sourceSlotIndex!==-1){newSlots[sourceSlotIndex].activities.splice(source.index,1);setTimeSlots(newSlots);}}return;}// Si el elemento viene del pool, se copia a la posici√≥n destino\nif(source.droppableId==='pool'){const originalId=draggableId.replace('pool-','');const activity=poolActivities.find(act=>act.id===originalId);if(!activity)return;const instance={...activity,instanceId:`${activity.id}-${Date.now()}`,duration:activity.defaultDuration};const slotIndex=timeSlots.findIndex(slot=>slot.id===destination.droppableId);if(slotIndex===-1)return;const newSlots=[...timeSlots];newSlots[slotIndex].activities.splice(destination.index,0,instance);setTimeSlots(newSlots);return;}// Movimiento entre slots\nconst newSlots=[...timeSlots];const sourceSlotIndex=newSlots.findIndex(slot=>slot.id===source.droppableId);const destinationSlotIndex=newSlots.findIndex(slot=>slot.id===destination.droppableId);if(sourceSlotIndex===-1||destinationSlotIndex===-1)return;const[movedItem]=newSlots[sourceSlotIndex].activities.splice(source.index,1);newSlots[destinationSlotIndex].activities.splice(destination.index,0,movedItem);setTimeSlots(newSlots);};const handleDurationChange=(slotId,instanceId,newDuration)=>{if(isViewMode)return;setTimeSlots(prev=>prev.map(slot=>slot.id===slotId?{...slot,activities:slot.activities.map(act=>act.instanceId===instanceId?{...act,duration:newDuration}:act)}:slot));};// Funci√≥n para guardar el resultado (s√≥lo en modo edici√≥n)\nconst handleSaveResult=async()=>{if(isViewMode)return;const token=localStorage.getItem('token');const payload={day:selectedDay,timeSlots:timeSlots.filter(slot=>slot.activities.length>0).map(slot=>({slot:slot.id,activities:slot.activities.map(act=>({activityId:act.id,title:act.title,icon:act.icon,slot:slot.id,duration:act.duration}))}))};try{await axios.post('https://janus-1030141284513.europe-southwest1.run.app/api/game',payload,{headers:{'x-auth-token':token}});alert('¬°Tu d√≠a ha sido guardado!');navigate('/dashboard');}catch(err){console.error(err);alert('Error al guardar el resultado.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"time-machine-game-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"tmg-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-dashboard-btn\",onClick:()=>navigate('/dashboard'),children:\"\\u2190\"}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"La M\\xE1quina del Tiempo \",isViewMode&&\"- Snapshot\"]})]}),!isViewMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-day-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"day-select\",children:\"Elige un d\\xEDa:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"day-select\",value:selectedDay,onChange:e=>setSelectedDay(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"Mi\\xE9rcoles\",children:\"Mi\\xE9rcoles\"}),/*#__PURE__*/_jsx(\"option\",{value:\"S\\xE1bado\",children:\"S\\xE1bado\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-instructions\",children:!isViewMode?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA1Esta es tu m\\xE1quina del tiempo! Arrastra las actividades que normalmente haces un \",selectedDay,\". Ajusta el tiempo deslizando la barra para cada actividad.\"]}):/*#__PURE__*/_jsx(\"p\",{children:\"Vista del \\xFAltimo d\\xEDa guardado.\"})}),!isViewMode&&/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:onDragEnd,children:/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-pool\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Actividades Divertidas\"}),/*#__PURE__*/_jsx(Droppable,{droppableId:\"pool\",isCombineEnabled:false,renderClone:(provided,snapshot,rubric)=>{const activity=poolActivities[rubric.source.index];return/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-activity-card\",ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:activity.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:activity.title})]});},children:provided=>/*#__PURE__*/_jsxs(\"div\",{ref:provided.innerRef,...provided.droppableProps,children:[poolActivities.map((activity,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:`pool-${activity.id}`,index:index,children:providedDraggable=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-activity-card\",ref:providedDraggable.innerRef,...providedDraggable.draggableProps,...providedDraggable.dragHandleProps,children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:activity.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:activity.title})]})},`pool-${activity.id}`)),provided.placeholder]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-board\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Organiza tu d\\xEDa\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slots\",children:timeSlots.map(slot=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slot-header\",children:slot.id}),/*#__PURE__*/_jsx(Droppable,{droppableId:slot.id,isCombineEnabled:false,children:provided=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-body\",ref:provided.innerRef,...provided.droppableProps,children:[slot.activities.map((act,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:act.instanceId,index:index,children:providedDraggable=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity\",ref:providedDraggable.innerRef,...providedDraggable.draggableProps,...providedDraggable.dragHandleProps,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:act.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:act.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-duration-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"30\",max:\"120\",step:\"15\",value:act.duration,onChange:e=>handleDurationChange(slot.id,act.instanceId,parseInt(e.target.value,10))}),/*#__PURE__*/_jsxs(\"span\",{children:[act.duration,\" min\"]})]})]})},act.instanceId)),provided.placeholder]})})]},slot.id))})]})]})}),isViewMode&&/*#__PURE__*/_jsx(\"div\",{className:\"tmg-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-board\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Organiza tu d\\xEDa\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slots\",children:timeSlots.map(slot=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slot-header\",children:slot.id}),/*#__PURE__*/_jsx(\"div\",{className:\"tmg-slot-body\",children:slot.activities.map((act,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-slot-activity-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-icon\",children:act.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tmg-activity-title\",children:act.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tmg-duration-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"30\",max:\"120\",step:\"15\",value:act.duration,disabled:true}),/*#__PURE__*/_jsxs(\"span\",{children:[act.duration,\" min\"]})]})]},index))})]},slot.id))})]})}),!isViewMode&&/*#__PURE__*/_jsx(\"div\",{className:\"tmg-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"tmg-save-btn\",onClick:handleSaveResult,children:\"Guardar mi d\\xEDa\"})})]});}export default TimeMachineGame;","map":{"version":3,"names":["React","useState","useEffect","DragDropContext","Droppable","Draggable","axios","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","initialActivities","id","title","icon","defaultDuration","generateTimeSlots","slots","i","label","String","padStart","push","activities","TimeMachineGame","navigate","location","searchParams","URLSearchParams","search","queryPatientId","get","isViewMode","Boolean","selectedDay","setSelectedDay","poolActivities","timeSlots","setTimeSlots","token","localStorage","getItem","fetchSnapshot","response","headers","data","length","snapshot","day","snapshotSlots","map","slot","matching","find","s","err","console","error","onDragEnd","result","source","destination","draggableId","droppableId","newSlots","sourceSlotIndex","findIndex","splice","index","originalId","replace","activity","act","instance","instanceId","Date","now","duration","slotIndex","destinationSlotIndex","movedItem","handleDurationChange","slotId","newDuration","prev","handleSaveResult","payload","filter","activityId","post","alert","className","children","onClick","htmlFor","value","onChange","e","target","isCombineEnabled","renderClone","provided","rubric","ref","innerRef","draggableProps","dragHandleProps","droppableProps","providedDraggable","placeholder","type","min","max","step","parseInt","disabled"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/TimeMachineGame.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// Usamos el fork mantenido de react-beautiful-dnd:\r\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\r\nimport axios from 'axios';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport '../styles/timeMachineGame.css';\r\n\r\n// Lista de actividades iniciales (pool)\r\nconst initialActivities = [\r\n  { id: 'futbol', title: 'Jugar al f√∫tbol', icon: '‚öΩ', defaultDuration: 60 },\r\n  { id: 'dibujos', title: 'Ver dibujos animados', icon: 'üì∫', defaultDuration: 60 },\r\n  { id: 'comics', title: 'Leer c√≥mics', icon: 'üìö', defaultDuration: 60 },\r\n  { id: 'tarea', title: 'Hacer tarea', icon: 'üìù', defaultDuration: 60 },\r\n  { id: 'videojuegos', title: 'Jugar videojuegos', icon: 'üéÆ', defaultDuration: 60 },\r\n  { id: 'helado', title: 'Comer helado', icon: 'üç¶', defaultDuration: 60 },\r\n  { id: 'parque', title: 'Ir al parque', icon: 'üèûÔ∏è', defaultDuration: 60 },\r\n  { id: 'banio', title: 'Ba√±arse', icon: 'üõÅ', defaultDuration: 60 },\r\n  { id: 'dormir', title: 'Dormir', icon: 'üò¥', defaultDuration: 60 },\r\n  { id: 'musica', title: 'Escuchar m√∫sica', icon: 'üéµ', defaultDuration: 60 },\r\n  { id: 'bailar', title: 'Bailar', icon: 'üíÉ', defaultDuration: 60 },\r\n  { id: 'amigos', title: 'Jugar con amigos', icon: 'üë´', defaultDuration: 60 },\r\n  { id: 'bicicleta', title: 'Montar en bicicleta', icon: 'üö≤', defaultDuration: 60 },\r\n  { id: 'dibujar', title: 'Dibujar', icon: 'üé®', defaultDuration: 60 },\r\n  { id: 'mascotas', title: 'Jugar con mascotas', icon: 'üê∂', defaultDuration: 60 },\r\n  { id: 'experimentos', title: 'Hacer experimentos', icon: 'üî¨', defaultDuration: 60 },\r\n  { id: 'cantar', title: 'Cantar', icon: 'üé§', defaultDuration: 60 },\r\n  { id: 'lego', title: 'Construir con LEGO', icon: 'üß±', defaultDuration: 60 },\r\n  { id: 'nadar', title: 'Nadar', icon: 'üèä', defaultDuration: 60 },\r\n  { id: 'computadora', title: 'Jugar en la computadora', icon: 'üíª', defaultDuration: 60 }\r\n];\r\n\r\n// Funci√≥n para generar los 24 timeSlots\r\nconst generateTimeSlots = () => {\r\n  const slots = [];\r\n  for (let i = 0; i < 24; i++) {\r\n    const label = `${String(i).padStart(2, '0')}:00`;\r\n    slots.push({ id: label, activities: [] });\r\n  }\r\n  return slots;\r\n};\r\n\r\nfunction TimeMachineGame() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  // Detectar si se pas√≥ un par√°metro \"patientId\" (modo vista / snapshot)\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const queryPatientId = searchParams.get('patientId');\r\n  const isViewMode = Boolean(queryPatientId);\r\n\r\n  const [selectedDay, setSelectedDay] = useState('Mi√©rcoles');\r\n  const [poolActivities] = useState(initialActivities);\r\n  const [timeSlots, setTimeSlots] = useState(generateTimeSlots());\r\n\r\n  // Verificar token; si no existe, redirigir al login\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/');\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Si estamos en modo vista, se obtiene el snapshot guardado de la M√°quina del Tiempo\r\n  useEffect(() => {\r\n    if (isViewMode) {\r\n      const fetchSnapshot = async () => {\r\n        try {\r\n          const token = localStorage.getItem('token');\r\n          const response = await axios.get(`https://janus-1030141284513.europe-southwest1.run.app/api/game?patientId=${queryPatientId}`, {\r\n            headers: { 'x-auth-token': token }\r\n          });\r\n          if (response.data && response.data.length > 0) {\r\n            const snapshot = response.data[0]; // tomamos el √∫ltimo guardado\r\n            setSelectedDay(snapshot.day);\r\n            // Reconstruir los timeSlots: se toman los slots generados y se rellenan con las actividades del snapshot\r\n            const snapshotSlots = generateTimeSlots().map(slot => {\r\n              const matching = snapshot.timeSlots.find(s => s.slot === slot.id);\r\n              if (matching) {\r\n                return { id: slot.id, activities: matching.activities };\r\n              }\r\n              return slot;\r\n            });\r\n            setTimeSlots(snapshotSlots);\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Error al obtener snapshot de la M√°quina del Tiempo:\", err);\r\n        }\r\n      };\r\n      fetchSnapshot();\r\n    }\r\n  }, [isViewMode, queryPatientId]);\r\n\r\n  // Funci√≥n onDragEnd: si est√° en modo vista, se deshabilita la edici√≥n\r\n  const onDragEnd = (result) => {\r\n    if (isViewMode) return;\r\n    const { source, destination, draggableId } = result;\r\n    if (!destination) return;\r\n\r\n    // Si se suelta en el pool, eliminamos el elemento del slot de origen\r\n    if (destination.droppableId === 'pool') {\r\n      if (source.droppableId !== 'pool') {\r\n        const newSlots = [...timeSlots];\r\n        const sourceSlotIndex = newSlots.findIndex(slot => slot.id === source.droppableId);\r\n        if (sourceSlotIndex !== -1) {\r\n          newSlots[sourceSlotIndex].activities.splice(source.index, 1);\r\n          setTimeSlots(newSlots);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Si el elemento viene del pool, se copia a la posici√≥n destino\r\n    if (source.droppableId === 'pool') {\r\n      const originalId = draggableId.replace('pool-', '');\r\n      const activity = poolActivities.find(act => act.id === originalId);\r\n      if (!activity) return;\r\n      const instance = {\r\n        ...activity,\r\n        instanceId: `${activity.id}-${Date.now()}`,\r\n        duration: activity.defaultDuration\r\n      };\r\n      const slotIndex = timeSlots.findIndex(slot => slot.id === destination.droppableId);\r\n      if (slotIndex === -1) return;\r\n      const newSlots = [...timeSlots];\r\n      newSlots[slotIndex].activities.splice(destination.index, 0, instance);\r\n      setTimeSlots(newSlots);\r\n      return;\r\n    }\r\n\r\n    // Movimiento entre slots\r\n    const newSlots = [...timeSlots];\r\n    const sourceSlotIndex = newSlots.findIndex(slot => slot.id === source.droppableId);\r\n    const destinationSlotIndex = newSlots.findIndex(slot => slot.id === destination.droppableId);\r\n    if (sourceSlotIndex === -1 || destinationSlotIndex === -1) return;\r\n    const [movedItem] = newSlots[sourceSlotIndex].activities.splice(source.index, 1);\r\n    newSlots[destinationSlotIndex].activities.splice(destination.index, 0, movedItem);\r\n    setTimeSlots(newSlots);\r\n  };\r\n\r\n  const handleDurationChange = (slotId, instanceId, newDuration) => {\r\n    if (isViewMode) return;\r\n    setTimeSlots(prev =>\r\n      prev.map(slot =>\r\n        slot.id === slotId\r\n          ? {\r\n              ...slot,\r\n              activities: slot.activities.map(act =>\r\n                act.instanceId === instanceId ? { ...act, duration: newDuration } : act\r\n              )\r\n            }\r\n          : slot\r\n      )\r\n    );\r\n  };\r\n\r\n  // Funci√≥n para guardar el resultado (s√≥lo en modo edici√≥n)\r\n  const handleSaveResult = async () => {\r\n    if (isViewMode) return;\r\n    const token = localStorage.getItem('token');\r\n    const payload = {\r\n      day: selectedDay,\r\n      timeSlots: timeSlots\r\n        .filter(slot => slot.activities.length > 0)\r\n        .map(slot => ({\r\n          slot: slot.id,\r\n          activities: slot.activities.map(act => ({\r\n            activityId: act.id,\r\n            title: act.title,\r\n            icon: act.icon,\r\n            slot: slot.id,\r\n            duration: act.duration\r\n          }))\r\n        }))\r\n    };\r\n    try {\r\n      await axios.post('https://janus-1030141284513.europe-southwest1.run.app/api/game', payload, {\r\n        headers: { 'x-auth-token': token }\r\n      });\r\n      alert('¬°Tu d√≠a ha sido guardado!');\r\n      navigate('/dashboard');\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Error al guardar el resultado.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"time-machine-game-container\">\r\n      <header className=\"tmg-header\">\r\n        <div className=\"tmg-header-left\">\r\n          <button className=\"back-dashboard-btn\" onClick={() => navigate('/dashboard')}>‚Üê</button>\r\n          <h1>\r\n            La M√°quina del Tiempo {isViewMode && \"- Snapshot\"}\r\n          </h1>\r\n        </div>\r\n        {!isViewMode && (\r\n          <div className=\"tmg-day-selector\">\r\n            <label htmlFor=\"day-select\">Elige un d√≠a:</label>\r\n            <select id=\"day-select\" value={selectedDay} onChange={(e) => setSelectedDay(e.target.value)}>\r\n              <option value=\"Mi√©rcoles\">Mi√©rcoles</option>\r\n              <option value=\"S√°bado\">S√°bado</option>\r\n            </select>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      <div className=\"tmg-instructions\">\r\n        {!isViewMode ? (\r\n          <p>\r\n            ¬°Esta es tu m√°quina del tiempo! Arrastra las actividades que normalmente haces un {selectedDay}.\r\n            Ajusta el tiempo deslizando la barra para cada actividad.\r\n          </p>\r\n        ) : (\r\n          <p>\r\n            Vista del √∫ltimo d√≠a guardado.\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Si no estamos en modo vista, se muestra el pool y la posibilidad de arrastrar */}\r\n      {!isViewMode && (\r\n        <DragDropContext onDragEnd={onDragEnd}>\r\n          <div className=\"tmg-content\">\r\n            {/* Panel de Pool */}\r\n            <div className=\"tmg-pool\">\r\n              <h2>Actividades Divertidas</h2>\r\n              <Droppable\r\n                droppableId=\"pool\"\r\n                isCombineEnabled={false}\r\n                renderClone={(provided, snapshot, rubric) => {\r\n                  const activity = poolActivities[rubric.source.index];\r\n                  return (\r\n                    <div\r\n                      className=\"tmg-activity-card\"\r\n                      ref={provided.innerRef}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                    >\r\n                      <span className=\"tmg-activity-icon\">{activity.icon}</span>\r\n                      <span className=\"tmg-activity-title\">{activity.title}</span>\r\n                    </div>\r\n                  );\r\n                }}\r\n              >\r\n                {(provided) => (\r\n                  <div ref={provided.innerRef} {...provided.droppableProps}>\r\n                    {poolActivities.map((activity, index) => (\r\n                      <Draggable\r\n                        key={`pool-${activity.id}`}\r\n                        draggableId={`pool-${activity.id}`}\r\n                        index={index}\r\n                      >\r\n                        {(providedDraggable) => (\r\n                          <div\r\n                            className=\"tmg-activity-card\"\r\n                            ref={providedDraggable.innerRef}\r\n                            {...providedDraggable.draggableProps}\r\n                            {...providedDraggable.dragHandleProps}\r\n                          >\r\n                            <span className=\"tmg-activity-icon\">{activity.icon}</span>\r\n                            <span className=\"tmg-activity-title\">{activity.title}</span>\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n\r\n            {/* Panel de Organizaci√≥n: los timeSlots */}\r\n            <div className=\"tmg-board\">\r\n              <h2>Organiza tu d√≠a</h2>\r\n              <div className=\"tmg-slots\">\r\n                {timeSlots.map(slot => (\r\n                  <div key={slot.id} className=\"tmg-slot\">\r\n                    <div className=\"tmg-slot-header\">{slot.id}</div>\r\n                    <Droppable droppableId={slot.id} isCombineEnabled={false}>\r\n                      {(provided) => (\r\n                        <div\r\n                          className=\"tmg-slot-body\"\r\n                          ref={provided.innerRef}\r\n                          {...provided.droppableProps}\r\n                        >\r\n                          {slot.activities.map((act, index) => (\r\n                            <Draggable key={act.instanceId} draggableId={act.instanceId} index={index}>\r\n                              {(providedDraggable) => (\r\n                                <div\r\n                                  className=\"tmg-slot-activity\"\r\n                                  ref={providedDraggable.innerRef}\r\n                                  {...providedDraggable.draggableProps}\r\n                                  {...providedDraggable.dragHandleProps}\r\n                                >\r\n                                  <div className=\"tmg-slot-activity-header\">\r\n                                    <span className=\"tmg-activity-icon\">{act.icon}</span>\r\n                                    <span className=\"tmg-activity-title\">{act.title}</span>\r\n                                  </div>\r\n                                  <div className=\"tmg-duration-control\">\r\n                                    <input\r\n                                      type=\"range\"\r\n                                      min=\"30\"\r\n                                      max=\"120\"\r\n                                      step=\"15\"\r\n                                      value={act.duration}\r\n                                      onChange={(e) =>\r\n                                        handleDurationChange(\r\n                                          slot.id,\r\n                                          act.instanceId,\r\n                                          parseInt(e.target.value, 10)\r\n                                        )\r\n                                      }\r\n                                    />\r\n                                    <span>{act.duration} min</span>\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n                            </Draggable>\r\n                          ))}\r\n                          {provided.placeholder}\r\n                        </div>\r\n                      )}\r\n                    </Droppable>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </DragDropContext>\r\n      )}\r\n\r\n      {/* En modo vista se muestra el snapshot de forma de solo lectura */}\r\n      {isViewMode && (\r\n        <div className=\"tmg-content\">\r\n          <div className=\"tmg-board\">\r\n            <h2>Organiza tu d√≠a</h2>\r\n            <div className=\"tmg-slots\">\r\n              {timeSlots.map(slot => (\r\n                <div key={slot.id} className=\"tmg-slot\">\r\n                  <div className=\"tmg-slot-header\">{slot.id}</div>\r\n                  <div className=\"tmg-slot-body\">\r\n                    {slot.activities.map((act, index) => (\r\n                      <div key={index} className=\"tmg-slot-activity\">\r\n                        <div className=\"tmg-slot-activity-header\">\r\n                          <span className=\"tmg-activity-icon\">{act.icon}</span>\r\n                          <span className=\"tmg-activity-title\">{act.title}</span>\r\n                        </div>\r\n                        <div className=\"tmg-duration-control\">\r\n                          <input\r\n                            type=\"range\"\r\n                            min=\"30\"\r\n                            max=\"120\"\r\n                            step=\"15\"\r\n                            value={act.duration}\r\n                            disabled\r\n                          />\r\n                          <span>{act.duration} min</span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* El bot√≥n para guardar s√≥lo aparece en modo edici√≥n */}\r\n      {!isViewMode && (\r\n        <div className=\"tmg-actions\">\r\n          <button className=\"tmg-save-btn\" onClick={handleSaveResult}>\r\n            Guardar mi d√≠a\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TimeMachineGame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}