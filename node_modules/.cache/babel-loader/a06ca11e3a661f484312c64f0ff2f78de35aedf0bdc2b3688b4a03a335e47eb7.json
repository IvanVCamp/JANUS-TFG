{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import axios from'axios';import{PieChart,Pie,Cell,Tooltip,Legend,BarChart,Bar,XAxis,YAxis,CartesianGrid,RadialBarChart,RadialBar,LineChart,Line,ResponsiveContainer}from'recharts';import'../styles/therapistRoutines.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const categoryMap={futbol:'Ocio',dibujos:'Ocio',comics:'Ocio',tarea:'Obligaciones',videojuegos:'Ocio',helado:'Ocio',parque:'Ocio',banio:'Autocuidado',dormir:'Autocuidado',musica:'Ocio',bailar:'Ocio',amigos:'Ocio',bicicleta:'Ocio',dibujar:'Ocio',mascotas:'Ocio',experimentos:'Obligaciones',cantar:'Ocio',lego:'Ocio',nadar:'Autocuidado',computadora:'Ocio'};const COLORS=['#7c63f6','#82ca9d','#ffc658','#ff8042','#0088FE'];function PatientRoutines(){const{patientId}=useParams();const[results,setResults]=useState([]);const[filtered,setFiltered]=useState([]);const[from,setFrom]=useState('');const[to,setTo]=useState('');const[selectedDate,setSelectedDate]=useState('');const[metrics,setMetrics]=useState(null);// 1) Fetch de resultados\nuseEffect(()=>{const token=localStorage.getItem('token');axios.get(`http://localhost:8080/api/game?patientId=${patientId}`,{headers:{'x-auth-token':token}}).then(resp=>{setResults(resp.data);// filtro por defecto últimos 7 días\nconst now=new Date(),weekAgo=new Date(now);weekAgo.setDate(now.getDate()-6);setFrom(weekAgo.toISOString().slice(0,10));setTo(now.toISOString().slice(0,10));}).catch(console.error);},[patientId]);// 2) Filtrar resultados por fecha\nuseEffect(()=>{if(!from||!to)return;const f=new Date(from),t=new Date(to);t.setHours(23,59,59,999);setFiltered(results.filter(r=>{const d=new Date(r.createdAt);return d>=f&&d<=t;}));},[from,to,results]);// 3) Seleccionar primer día tras filtrar\nuseEffect(()=>{if(filtered.length)setSelectedDate(filtered[0].createdAt);else setSelectedDate('');},[filtered]);// 4) Recalcular métricas cuando cambie la selección\nuseEffect(()=>{if(!selectedDate){setMetrics(null);return;}const res=filtered.find(r=>r.createdAt===selectedDate);setMetrics(res?computeMetrics(res):null);},[selectedDate,filtered]);// 5) Cálculo de métricas\nfunction computeMetrics(result){const slots=result.timeSlots||[];const activities=slots.flatMap(slot=>(slot.activities||[]).map(act=>({...act,slot:slot.slot})));const totalMin=activities.reduce((sum,a)=>sum+a.duration,0)||1;// a) Distribución %\nconst catSum={};activities.forEach(a=>{const c=categoryMap[a.activityId]||'Otros';catSum[c]=(catSum[c]||0)+a.duration;});const distribution=Object.entries(catSum).map((_ref,i)=>{let[name,val]=_ref;return{name,value:+(val/totalMin*100).toFixed(1),fill:COLORS[i%COLORS.length]};});// b) Diversidad (entropía de Shannon)\nconst entropy=distribution.reduce((H,cat)=>{const p=cat.value/100;return p>0?H-p*Math.log2(p):H;},0);const diversity=+entropy.toFixed(2);// c) Balance activo/reposo\n// aquí: activo = Obligaciones+Ocio, reposo = Autocuidado\nconst sumActive=(catSum['Obligaciones']||0)+(catSum['Ocio']||0);const sumRest=catSum['Autocuidado']||0;const ratioActiveRest=+(sumActive/sumRest||0).toFixed(2);// d) Ocupación horaria\nconst hourly=Array.from({length:24},(_,h)=>({hour:`${h.toString().padStart(2,'0')}:00`,minutes:0}));activities.forEach(a=>{const h=parseInt(a.slot.split(':')[0],10);if(hourly[h])hourly[h].minutes+=a.duration;});const maxMin=Math.max(...hourly.map(h=>h.minutes))||1;// e) Cumplimiento de objetivos (thresholds por categoría)\nconst objectivesDef=[{category:'Autocuidado',target:120},{category:'Obligaciones',target:180},{category:'Ocio',target:180}];const objectives=objectivesDef.map(obj=>{const actual=Math.round(catSum[obj.category]||0);const percent=Math.min(100,+(actual/obj.target*100).toFixed(1));return{...obj,actual,percent};});return{distribution,diversity,ratioActiveRest,hourly,maxMin,objectives};}return/*#__PURE__*/_jsxs(\"div\",{className:\"routines-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"routines-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/therapist/routines\",className:\"back-link\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Rutinas del Paciente\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"filter-section\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Desde\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:from,onChange:e=>setFrom(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Hasta\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:to,onChange:e=>setTo(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"D\\xEDa\",/*#__PURE__*/_jsx(\"select\",{value:selectedDate,onChange:e=>setSelectedDate(e.target.value),children:filtered.map(r=>{const d=new Date(r.createdAt).toLocaleDateString();return/*#__PURE__*/_jsx(\"option\",{value:r.createdAt,children:d},r.createdAt);})})]})]}),metrics&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metrics-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"\\uD83D\\uDCCA Diversidad: \",/*#__PURE__*/_jsxs(\"strong\",{children:[metrics.diversity,\" bits\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"\\u2696\\uFE0F Activo/Reposo: \",/*#__PURE__*/_jsx(\"strong\",{children:metrics.ratioActiveRest})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"charts-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Distribuci\\xF3n % por Categor\\xEDa\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:240,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:metrics.distribution,dataKey:\"value\",nameKey:\"name\",cx:\"50%\",cy:\"50%\",outerRadius:80,label:true,children:metrics.distribution.map((entry,i)=>/*#__PURE__*/_jsx(Cell,{fill:entry.fill},i))}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{verticalAlign:\"bottom\",height:36})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Gauge Activo/Reposo\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:240,children:/*#__PURE__*/_jsxs(RadialBarChart,{cx:\"50%\",cy:\"50%\",innerRadius:\"80%\",outerRadius:\"100%\",data:[{name:'Activo/Reposo',value:metrics.ratioActiveRest*50}],startAngle:180,endAngle:0,children:[/*#__PURE__*/_jsx(RadialBar,{minAngle:15,dataKey:\"value\",cornerRadius:10}),/*#__PURE__*/_jsx(Tooltip,{})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ocupaci\\xF3n Horaria\"}),/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-grid\",children:metrics.hourly.map(h=>/*#__PURE__*/_jsx(\"div\",{className:\"heat-cell\",style:{backgroundColor:`rgba(124,99,246,${h.minutes/metrics.maxMin})`},children:/*#__PURE__*/_jsx(\"span\",{className:\"heat-label\",children:h.hour})},h.hour))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block full-width\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Cumplimiento de Objetivos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"objective-list\",children:metrics.objectives.map(obj=>/*#__PURE__*/_jsxs(\"div\",{className:\"objective-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"obj-name\",children:obj.category}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-bg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",style:{width:`${obj.percent}%`}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"obj-value\",children:[obj.actual,\"/\",obj.target,\" min\"]})]},obj.category))})]})]})]})]});}export default PatientRoutines;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","PieChart","Pie","Cell","Tooltip","Legend","BarChart","Bar","XAxis","YAxis","CartesianGrid","RadialBarChart","RadialBar","LineChart","Line","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","categoryMap","futbol","dibujos","comics","tarea","videojuegos","helado","parque","banio","dormir","musica","bailar","amigos","bicicleta","dibujar","mascotas","experimentos","cantar","lego","nadar","computadora","COLORS","PatientRoutines","patientId","results","setResults","filtered","setFiltered","from","setFrom","to","setTo","selectedDate","setSelectedDate","metrics","setMetrics","token","localStorage","getItem","get","headers","then","resp","data","now","Date","weekAgo","setDate","getDate","toISOString","slice","catch","console","error","f","t","setHours","filter","r","d","createdAt","length","res","find","computeMetrics","result","slots","timeSlots","activities","flatMap","slot","map","act","totalMin","reduce","sum","a","duration","catSum","forEach","c","activityId","distribution","Object","entries","_ref","i","name","val","value","toFixed","fill","entropy","H","cat","p","Math","log2","diversity","sumActive","sumRest","ratioActiveRest","hourly","Array","_","h","hour","toString","padStart","minutes","parseInt","split","maxMin","max","objectivesDef","category","target","objectives","obj","actual","round","percent","min","className","children","type","onChange","e","toLocaleDateString","width","height","dataKey","nameKey","cx","cy","outerRadius","label","entry","verticalAlign","innerRadius","startAngle","endAngle","minAngle","cornerRadius","style","backgroundColor"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientRoutines.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport {\r\n  PieChart, Pie, Cell, Tooltip, Legend,\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid,\r\n  RadialBarChart, RadialBar,\r\n  LineChart, Line,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport '../styles/therapistRoutines.css';\r\n\r\nconst categoryMap = {\r\n  futbol: 'Ocio', dibujos: 'Ocio', comics: 'Ocio',\r\n  tarea: 'Obligaciones', videojuegos: 'Ocio', helado: 'Ocio',\r\n  parque: 'Ocio', banio: 'Autocuidado', dormir: 'Autocuidado',\r\n  musica: 'Ocio', bailar: 'Ocio', amigos: 'Ocio',\r\n  bicicleta: 'Ocio', dibujar: 'Ocio', mascotas: 'Ocio',\r\n  experimentos: 'Obligaciones', cantar: 'Ocio', lego: 'Ocio',\r\n  nadar: 'Autocuidado', computadora: 'Ocio'\r\n};\r\n\r\nconst COLORS = ['#7c63f6', '#82ca9d', '#ffc658', '#ff8042', '#0088FE'];\r\n\r\nfunction PatientRoutines() {\r\n  const { patientId } = useParams();\r\n  const [results, setResults]     = useState([]);\r\n  const [filtered, setFiltered]   = useState([]);\r\n  const [from, setFrom]           = useState('');\r\n  const [to, setTo]               = useState('');\r\n  const [selectedDate, setSelectedDate] = useState('');\r\n  const [metrics, setMetrics]     = useState(null);\r\n\r\n  // 1) Fetch de resultados\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    axios.get(`http://localhost:8080/api/game?patientId=${patientId}`, {\r\n      headers: { 'x-auth-token': token }\r\n    })\r\n    .then(resp => {\r\n      setResults(resp.data);\r\n      // filtro por defecto últimos 7 días\r\n      const now = new Date(), weekAgo = new Date(now);\r\n      weekAgo.setDate(now.getDate() - 6);\r\n      setFrom(weekAgo.toISOString().slice(0,10));\r\n      setTo(now.toISOString().slice(0,10));\r\n    })\r\n    .catch(console.error);\r\n  }, [patientId]);\r\n\r\n  // 2) Filtrar resultados por fecha\r\n  useEffect(() => {\r\n    if (!from || !to) return;\r\n    const f = new Date(from), t = new Date(to);\r\n    t.setHours(23,59,59,999);\r\n    setFiltered(results.filter(r => {\r\n      const d = new Date(r.createdAt);\r\n      return d >= f && d <= t;\r\n    }));\r\n  }, [from, to, results]);\r\n\r\n  // 3) Seleccionar primer día tras filtrar\r\n  useEffect(() => {\r\n    if (filtered.length) setSelectedDate(filtered[0].createdAt);\r\n    else setSelectedDate('');\r\n  }, [filtered]);\r\n\r\n  // 4) Recalcular métricas cuando cambie la selección\r\n  useEffect(() => {\r\n    if (!selectedDate) { setMetrics(null); return; }\r\n    const res = filtered.find(r => r.createdAt === selectedDate);\r\n    setMetrics(res ? computeMetrics(res) : null);\r\n  }, [selectedDate, filtered]);\r\n\r\n  // 5) Cálculo de métricas\r\n  function computeMetrics(result) {\r\n    const slots = result.timeSlots || [];\r\n    const activities = slots.flatMap(slot =>\r\n      (slot.activities || []).map(act => ({\r\n        ...act,\r\n        slot: slot.slot\r\n      }))\r\n    );\r\n    const totalMin = activities.reduce((sum,a) => sum + a.duration, 0) || 1;\r\n\r\n    // a) Distribución %\r\n    const catSum = {};\r\n    activities.forEach(a => {\r\n      const c = categoryMap[a.activityId] || 'Otros';\r\n      catSum[c] = (catSum[c] || 0) + a.duration;\r\n    });\r\n    const distribution = Object.entries(catSum).map(([name,val],i) => ({\r\n      name, value: +(val/totalMin*100).toFixed(1), fill: COLORS[i%COLORS.length]\r\n    }));\r\n\r\n    // b) Diversidad (entropía de Shannon)\r\n    const entropy = distribution.reduce((H,cat) => {\r\n      const p = cat.value/100;\r\n      return p>0 ? H - p*Math.log2(p) : H;\r\n    }, 0);\r\n    const diversity = +entropy.toFixed(2);\r\n\r\n    // c) Balance activo/reposo\r\n    // aquí: activo = Obligaciones+Ocio, reposo = Autocuidado\r\n    const sumActive = (catSum['Obligaciones']||0) + (catSum['Ocio']||0);\r\n    const sumRest   = (catSum['Autocuidado']||0);\r\n    const ratioActiveRest = +((sumActive/sumRest)||0).toFixed(2);\r\n\r\n    // d) Ocupación horaria\r\n    const hourly = Array.from({length:24},(_,h)=>({ hour:`${h.toString().padStart(2,'0')}:00`, minutes:0 }));\r\n    activities.forEach(a => {\r\n      const h = parseInt(a.slot.split(':')[0],10);\r\n      if (hourly[h]) hourly[h].minutes += a.duration;\r\n    });\r\n    const maxMin = Math.max(...hourly.map(h=>h.minutes)) || 1;\r\n\r\n    // e) Cumplimiento de objetivos (thresholds por categoría)\r\n    const objectivesDef = [\r\n      { category:'Autocuidado', target:120 },\r\n      { category:'Obligaciones', target:180 },\r\n      { category:'Ocio',       target:180 }\r\n    ];\r\n    const objectives = objectivesDef.map(obj => {\r\n      const actual = Math.round((catSum[obj.category]||0));\r\n      const percent = Math.min(100, +((actual/obj.target)*100).toFixed(1));\r\n      return { ...obj, actual, percent };\r\n    });\r\n\r\n    return { distribution, diversity, ratioActiveRest, hourly, maxMin, objectives };\r\n  }\r\n\r\n  return (\r\n    <div className=\"routines-container\">\r\n      <header className=\"routines-header\">\r\n        <Link to=\"/therapist/routines\" className=\"back-link\">← Volver</Link>\r\n        <h2>Rutinas del Paciente</h2>\r\n      </header>\r\n\r\n      <section className=\"filter-section\">\r\n        <label>\r\n          Desde\r\n          <input type=\"date\" value={from} onChange={e=>setFrom(e.target.value)} />\r\n        </label>\r\n        <label>\r\n          Hasta\r\n          <input type=\"date\" value={to} onChange={e=>setTo(e.target.value)} />\r\n        </label>\r\n        <label>\r\n          Día\r\n          <select value={selectedDate} onChange={e=>setSelectedDate(e.target.value)}>\r\n            {filtered.map(r => {\r\n              const d = new Date(r.createdAt).toLocaleDateString();\r\n              return <option key={r.createdAt} value={r.createdAt}>{d}</option>;\r\n            })}\r\n          </select>\r\n        </label>\r\n      </section>\r\n\r\n      {metrics && (\r\n        <>\r\n          <div className=\"metrics-grid\">\r\n            <div className=\"metric-card\">📊 Diversidad: <strong>{metrics.diversity} bits</strong></div>\r\n            <div className=\"metric-card\">⚖️ Activo/Reposo: <strong>{metrics.ratioActiveRest}</strong></div>\r\n          </div>\r\n\r\n          <div className=\"charts-grid\">\r\n            <div className=\"chart-block\">\r\n              <h3>Distribución % por Categoría</h3>\r\n              <ResponsiveContainer width=\"100%\" height={240}>\r\n                <PieChart>\r\n                  <Pie data={metrics.distribution} dataKey=\"value\" nameKey=\"name\" cx=\"50%\" cy=\"50%\" outerRadius={80} label>\r\n                    {metrics.distribution.map((entry,i) =>\r\n                      <Cell key={i} fill={entry.fill} />\r\n                    )}\r\n                  </Pie>\r\n                  <Tooltip/>\r\n                  <Legend verticalAlign=\"bottom\" height={36}/>\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            <div className=\"chart-block\">\r\n              <h3>Gauge Activo/Reposo</h3>\r\n              <ResponsiveContainer width=\"100%\" height={240}>\r\n                <RadialBarChart\r\n                  cx=\"50%\" cy=\"50%\" innerRadius=\"80%\" outerRadius=\"100%\"\r\n                  data={[{ name:'Activo/Reposo', value: metrics.ratioActiveRest * 50 }]}\r\n                  startAngle={180} endAngle={0}\r\n                >\r\n                  <RadialBar minAngle={15} dataKey=\"value\" cornerRadius={10} />\r\n                  <Tooltip/>\r\n                </RadialBarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            <div className=\"chart-block\">\r\n              <h3>Ocupación Horaria</h3>\r\n              <div className=\"heatmap-grid\">\r\n                {metrics.hourly.map(h =>\r\n                  <div\r\n                    key={h.hour}\r\n                    className=\"heat-cell\"\r\n                    style={{ backgroundColor: `rgba(124,99,246,${h.minutes/metrics.maxMin})` }}\r\n                  >\r\n                    <span className=\"heat-label\">{h.hour}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"chart-block full-width\">\r\n              <h3>Cumplimiento de Objetivos</h3>\r\n              <div className=\"objective-list\">\r\n                {metrics.objectives.map(obj => (\r\n                  <div key={obj.category} className=\"objective-item\">\r\n                    <span className=\"obj-name\">{obj.category}</span>\r\n                    <div className=\"progress-bar-bg\">\r\n                      <div\r\n                        className=\"progress-bar\"\r\n                        style={{ width: `${obj.percent}%` }}\r\n                      />\r\n                    </div>\r\n                    <span className=\"obj-value\">{obj.actual}/{obj.target} min</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PatientRoutines;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}