{"ast":null,"code":"// src/components/TherapistPatientRoutines.js\nimport React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import{Pie,Bar,Line}from'react-chartjs-2';import Chart from'chart.js/auto';import routineService from'../services/routineService';import'../styles/therapistRoutines.css';import CalHeatMap from'cal-heatmap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PatientRoutines(){var _stats$obi,_stats$recent;const{patientId}=useParams();const navigate=useNavigate();const[results,setResults]=useState([]);const[filterDays,setFilterDays]=useState(7);const[stats,setStats]=useState({});const heatmapRef=useRef();// Mapeo de actividad → categoría\nconst categoryMap={futbol:'Juegos',videojuegos:'Juegos',amigos:'Juegos',parque:'Juegos',tarea:'Estudio/Terapia',dibujos:'Ocio tranquilo',comics:'Ocio tranquilo',dibujar:'Ocio tranquilo',cantar:'Ocio tranquilo',lego:'Ocio tranquilo',helado:'Ocio tranquilo',nadar:'Ocio tranquilo',experimentos:'Ocio tranquilo',musica:'Ocio tranquilo',masctotas:'Ocio tranquilo',banio:'Aseo personal',dormir:'Sueño/Descanso'};useEffect(()=>{routineService.getGameResults(patientId).then(data=>{setResults(data);}).catch(err=>console.error(err));},[patientId]);// Recalcular estadísticas cuando cambian results o filterDays\nuseEffect(()=>{if(!results.length)return;// Filtrar últimos filterDays días\nconst cutoff=new Date();cutoff.setDate(cutoff.getDate()-filterDays+1);const recent=results.filter(r=>new Date(r.createdAt)>=cutoff);// 1) Distribución tiempo por categoría\nconst catDur={};recent.forEach(r=>{r.timeSlots.forEach(slot=>{slot.activities.forEach(act=>{const cat=categoryMap[act.activityId]||'Otros';catDur[cat]=(catDur[cat]||0)+act.duration;});});});const totalDur=Object.values(catDur).reduce((a,b)=>a+b,0);// 2) Evolución diaria por categoría\nconst dailyCat={};// { '2025-04-20': { Juegos:120, ... } }\nrecent.forEach(r=>{const day=new Date(r.createdAt).toLocaleDateString('es-ES');if(!dailyCat[day])dailyCat[day]={};r.timeSlots.forEach(slot=>{slot.activities.forEach(act=>{const cat=categoryMap[act.activityId]||'Otros';dailyCat[day][cat]=(dailyCat[day][cat]||0)+act.duration;});});});// 3) Índice de variedad\nconst distinctActs=new Set();recent.forEach(r=>{r.timeSlots.forEach(slot=>slot.activities.forEach(a=>distinctActs.add(a.activityId)));});// 4) Occupational Balance Index (Shannon)\nconst proportions=Object.values(catDur).map(v=>v/totalDur);const shannon=-proportions.reduce((s,p)=>s+(p>0?p*Math.log(p):0),0);const maxShannon=Math.log(Object.keys(catDur).length);const obi=maxShannon>0?shannon/maxShannon:0;// 5) Active / Passive ratio\nconst activeCats=['Juegos','Estudio/Terapia'];const activeTime=activeCats.reduce((s,cat)=>s+(catDur[cat]||0),0);const passiveTime=totalDur-activeTime;setStats({catDur,totalDur,dailyCat,obi,variety:distinctActs.size,activeTime,passiveTime,recent});},[results,filterDays]);// Inicializar heatmap\nuseEffect(()=>{if(!stats.recent)return;const data={};stats.recent.forEach(r=>{r.timeSlots.forEach(slot=>{const hour=parseInt(slot.slot.split(':')[0],10);data[Math.floor(new Date(r.createdAt).getTime()/1000)+hour*3600]=slot.activities.length;});});const cal=new CalHeatMap();cal.init({itemSelector:heatmapRef.current,domain:\"hour\",subDomain:\"day\",data,start:new Date(new Date().setDate(new Date().getDate()-filterDays+1)),range:filterDays/24,legend:[1,2,3],displayLegend:false});return()=>cal.destroy();},[stats,filterDays]);// *** Datos para los gráficos ***\n// Pie\nconst pieData={labels:Object.keys(stats.catDur||{}),datasets:[{data:Object.values(stats.catDur||{}),backgroundColor:['#6c63ff','#ff6384','#36a2eb','#ffcd56','#4bc0c0','#9966ff']}]};// Bar promedio duración\nconst barData={labels:Object.keys(stats.catDur||{}),datasets:[{label:'Min. totales',data:Object.values(stats.catDur||{}),barThickness:20}]};// Line trend\nconst days=Object.keys(stats.dailyCat||{});const lineDatasets=Object.keys(stats.catDur||{}).map((cat,i)=>({label:cat,data:days.map(d=>stats.dailyCat[d][cat]||0),fill:false}));const lineData={labels:days,datasets:lineDatasets};return/*#__PURE__*/_jsxs(\"div\",{className:\"routines-dashboard\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"back-dashboard-btn\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Rutinas de Paciente\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-row\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"\\xDAltimos d\\xEDas:\",/*#__PURE__*/_jsx(\"select\",{value:filterDays,onChange:e=>setFilterDays(+e.target.value),children:[7,14,30].map(d=>/*#__PURE__*/_jsx(\"option\",{value:d,children:d},d))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Equilibrio Ocupacional\"}),/*#__PURE__*/_jsx(\"p\",{className:stats.obi>=0.8?'green':stats.obi>=0.5?'yellow':'red',children:(_stats$obi=stats.obi)===null||_stats$obi===void 0?void 0:_stats$obi.toFixed(2)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Variedad de Actividades\"}),/*#__PURE__*/_jsx(\"p\",{children:stats.variety})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Activo / Pasivo (min)\"}),/*#__PURE__*/_jsxs(\"p\",{children:[stats.activeTime,\" / \",stats.passiveTime]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"charts-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Distribuci\\xF3n por Categor\\xEDa\"}),/*#__PURE__*/_jsx(Pie,{data:pieData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Duraci\\xF3n por Categor\\xEDa\"}),/*#__PURE__*/_jsx(Bar,{data:barData})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"charts-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container full-width\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Evoluci\\xF3n Semanal\"}),/*#__PURE__*/_jsx(Line,{data:lineData})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"charts-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container full-width\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Mapa de Calor de Horas\"}),/*#__PURE__*/_jsx(\"div\",{ref:heatmapRef})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"data-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"D\\xEDa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hora\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actividad\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Duraci\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_stats$recent=stats.recent)===null||_stats$recent===void 0?void 0:_stats$recent.map(r=>r.timeSlots.flatMap(slot=>slot.activities.map(act=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(r.createdAt).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:slot.slot}),/*#__PURE__*/_jsx(\"td\",{children:act.title}),/*#__PURE__*/_jsx(\"td\",{children:act.duration})]},`${r._id}-${slot.slot}-${act.instanceId||act.activityId}`))))})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","Pie","Bar","Line","Chart","routineService","CalHeatMap","jsx","_jsx","jsxs","_jsxs","PatientRoutines","_stats$obi","_stats$recent","patientId","navigate","results","setResults","filterDays","setFilterDays","stats","setStats","heatmapRef","categoryMap","futbol","videojuegos","amigos","parque","tarea","dibujos","comics","dibujar","cantar","lego","helado","nadar","experimentos","musica","masctotas","banio","dormir","getGameResults","then","data","catch","err","console","error","length","cutoff","Date","setDate","getDate","recent","filter","r","createdAt","catDur","forEach","timeSlots","slot","activities","act","cat","activityId","duration","totalDur","Object","values","reduce","a","b","dailyCat","day","toLocaleDateString","distinctActs","Set","add","proportions","map","v","shannon","s","p","Math","log","maxShannon","keys","obi","activeCats","activeTime","passiveTime","variety","size","hour","parseInt","split","floor","getTime","cal","init","itemSelector","current","domain","subDomain","start","range","legend","displayLegend","destroy","pieData","labels","datasets","backgroundColor","barData","label","barThickness","days","lineDatasets","i","d","fill","lineData","className","children","onClick","value","onChange","e","target","toFixed","ref","flatMap","title","_id","instanceId"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientRoutines.js"],"sourcesContent":["// src/components/TherapistPatientRoutines.js\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Pie, Bar, Line } from 'react-chartjs-2';\r\nimport Chart from 'chart.js/auto';\r\nimport routineService from '../services/routineService';\r\nimport '../styles/therapistRoutines.css';\r\nimport CalHeatMap from 'cal-heatmap';\r\n\r\nexport default function PatientRoutines() {\r\n  const { patientId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [results, setResults] = useState([]);\r\n  const [filterDays, setFilterDays] = useState(7);\r\n  const [stats, setStats] = useState({});\r\n  const heatmapRef = useRef();\r\n\r\n  // Mapeo de actividad → categoría\r\n  const categoryMap = {\r\n    futbol: 'Juegos', videojuegos: 'Juegos', amigos: 'Juegos', parque: 'Juegos',\r\n    tarea: 'Estudio/Terapia',\r\n    dibujos: 'Ocio tranquilo', comics: 'Ocio tranquilo', dibujar: 'Ocio tranquilo',\r\n    cantar: 'Ocio tranquilo', lego: 'Ocio tranquilo', helado: 'Ocio tranquilo',\r\n    nadar: 'Ocio tranquilo', experimentos: 'Ocio tranquilo', musica: 'Ocio tranquilo',\r\n    masctotas: 'Ocio tranquilo',\r\n    banio: 'Aseo personal',\r\n    dormir: 'Sueño/Descanso'\r\n  };\r\n\r\n  useEffect(() => {\r\n    routineService.getGameResults(patientId)\r\n      .then(data => {\r\n        setResults(data);\r\n      })\r\n      .catch(err => console.error(err));\r\n  }, [patientId]);\r\n\r\n  // Recalcular estadísticas cuando cambian results o filterDays\r\n  useEffect(() => {\r\n    if (!results.length) return;\r\n    // Filtrar últimos filterDays días\r\n    const cutoff = new Date();\r\n    cutoff.setDate(cutoff.getDate() - filterDays + 1);\r\n    const recent = results.filter(r => new Date(r.createdAt) >= cutoff);\r\n\r\n    // 1) Distribución tiempo por categoría\r\n    const catDur = {};\r\n    recent.forEach(r => {\r\n      r.timeSlots.forEach(slot => {\r\n        slot.activities.forEach(act => {\r\n          const cat = categoryMap[act.activityId] || 'Otros';\r\n          catDur[cat] = (catDur[cat] || 0) + act.duration;\r\n        });\r\n      });\r\n    });\r\n    const totalDur = Object.values(catDur).reduce((a,b) => a+b,0);\r\n\r\n    // 2) Evolución diaria por categoría\r\n    const dailyCat = {}; // { '2025-04-20': { Juegos:120, ... } }\r\n    recent.forEach(r => {\r\n      const day = new Date(r.createdAt).toLocaleDateString('es-ES');\r\n      if (!dailyCat[day]) dailyCat[day] = {};\r\n      r.timeSlots.forEach(slot => {\r\n        slot.activities.forEach(act => {\r\n          const cat = categoryMap[act.activityId] || 'Otros';\r\n          dailyCat[day][cat] = (dailyCat[day][cat] || 0) + act.duration;\r\n        });\r\n      });\r\n    });\r\n\r\n    // 3) Índice de variedad\r\n    const distinctActs = new Set();\r\n    recent.forEach(r => {\r\n      r.timeSlots.forEach(slot => slot.activities.forEach(a=> distinctActs.add(a.activityId)));\r\n    });\r\n\r\n    // 4) Occupational Balance Index (Shannon)\r\n    const proportions = Object.values(catDur).map(v => v/totalDur);\r\n    const shannon = -proportions.reduce((s,p)=> s + (p>0? p*Math.log(p):0), 0);\r\n    const maxShannon = Math.log(Object.keys(catDur).length);\r\n    const obi = maxShannon>0? shannon/maxShannon : 0;\r\n\r\n    // 5) Active / Passive ratio\r\n    const activeCats = ['Juegos','Estudio/Terapia'];\r\n    const activeTime = activeCats.reduce((s,cat)=> s + (catDur[cat]||0),0);\r\n    const passiveTime = totalDur - activeTime;\r\n\r\n    setStats({ catDur, totalDur, dailyCat, obi, variety: distinctActs.size,\r\n      activeTime, passiveTime, recent });\r\n  }, [results, filterDays]);\r\n\r\n  // Inicializar heatmap\r\n  useEffect(() => {\r\n    if (!stats.recent) return;\r\n    const data = {};\r\n    stats.recent.forEach(r => {\r\n      r.timeSlots.forEach(slot => {\r\n        const hour = parseInt(slot.slot.split(':')[0],10);\r\n        data[Math.floor(new Date(r.createdAt).getTime()/1000) + hour*3600] = slot.activities.length;\r\n      });\r\n    });\r\n    const cal = new CalHeatMap();\r\n    cal.init({\r\n      itemSelector: heatmapRef.current,\r\n      domain: \"hour\",\r\n      subDomain: \"day\",\r\n      data,\r\n      start: new Date(new Date().setDate(new Date().getDate()-filterDays+1)),\r\n      range: filterDays/24,\r\n      legend: [1,2,3],\r\n      displayLegend: false\r\n    });\r\n    return () => cal.destroy();\r\n  }, [stats, filterDays]);\r\n\r\n  // *** Datos para los gráficos ***\r\n  // Pie\r\n  const pieData = {\r\n    labels: Object.keys(stats.catDur||{}),\r\n    datasets: [{\r\n      data: Object.values(stats.catDur||{}),\r\n      backgroundColor: [\r\n        '#6c63ff','#ff6384','#36a2eb','#ffcd56','#4bc0c0','#9966ff'\r\n      ]\r\n    }]\r\n  };\r\n  // Bar promedio duración\r\n  const barData = {\r\n    labels: Object.keys(stats.catDur||{}),\r\n    datasets: [{\r\n      label: 'Min. totales',\r\n      data: Object.values(stats.catDur||{}),\r\n      barThickness: 20\r\n    }]\r\n  };\r\n  // Line trend\r\n  const days = Object.keys(stats.dailyCat||{});\r\n  const lineDatasets = Object.keys(stats.catDur||{}).map((cat, i) => ({\r\n    label: cat,\r\n    data: days.map(d => stats.dailyCat[d][cat]||0),\r\n    fill: false\r\n  }));\r\n  const lineData = { labels: days, datasets: lineDatasets };\r\n\r\n  return (\r\n    <div className=\"routines-dashboard\">\r\n      <button onClick={()=>navigate(-1)} className=\"back-dashboard-btn\">← Volver</button>\r\n      <h2>Rutinas de Paciente</h2>\r\n\r\n      <div className=\"filter-row\">\r\n        <label>Últimos días:\r\n          <select\r\n            value={filterDays}\r\n            onChange={e=>setFilterDays(+e.target.value)}\r\n          >\r\n            {[7,14,30].map(d=> <option key={d} value={d}>{d}</option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      {/* KPI cards */}\r\n      <div className=\"kpi-cards\">\r\n        <div className=\"card\">\r\n          <h3>Equilibrio Ocupacional</h3>\r\n          <p className={stats.obi>=0.8?'green': stats.obi>=0.5?'yellow':'red'}>\r\n            {stats.obi?.toFixed(2)}\r\n          </p>\r\n        </div>\r\n        <div className=\"card\">\r\n          <h3>Variedad de Actividades</h3>\r\n          <p>{stats.variety}</p>\r\n        </div>\r\n        <div className=\"card\">\r\n          <h3>Activo / Pasivo (min)</h3>\r\n          <p>{stats.activeTime} / {stats.passiveTime}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts */}\r\n      <div className=\"charts-row\">\r\n        <div className=\"chart-container\">\r\n          <h4>Distribución por Categoría</h4>\r\n          <Pie data={pieData}/>\r\n        </div>\r\n        <div className=\"chart-container\">\r\n          <h4>Duración por Categoría</h4>\r\n          <Bar data={barData}/>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"charts-row\">\r\n        <div className=\"chart-container full-width\">\r\n          <h4>Evolución Semanal</h4>\r\n          <Line data={lineData}/>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"charts-row\">\r\n        <div className=\"chart-container full-width\">\r\n          <h4>Mapa de Calor de Horas</h4>\r\n          <div ref={heatmapRef}></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Detalle tabla */}\r\n      <div className=\"data-table\">\r\n        <table>\r\n          <thead>\r\n            <tr><th>Día</th><th>Hora</th><th>Actividad</th><th>Duración</th></tr>\r\n          </thead>\r\n          <tbody>\r\n            {stats.recent?.map(r =>\r\n              r.timeSlots.flatMap(slot =>\r\n                slot.activities.map(act => (\r\n                  <tr key={`${r._id}-${slot.slot}-${act.instanceId||act.activityId}`}>\r\n                    <td>{new Date(r.createdAt).toLocaleDateString()}</td>\r\n                    <td>{slot.slot}</td>\r\n                    <td>{act.title}</td>\r\n                    <td>{act.duration}</td>\r\n                  </tr>\r\n                ))\r\n              )\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}