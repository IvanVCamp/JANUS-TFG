{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import axios from'axios';import{PieChart,Pie,Cell,Tooltip,Legend,BarChart,Bar,XAxis,YAxis,CartesianGrid,RadarChart,PolarGrid,PolarAngleAxis,PolarRadiusAxis,Radar,LineChart,Line,ResponsiveContainer}from'recharts';import'../styles/TherapistRoutines.css';// Mapeo de actividad a categoría\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const categoryMap={futbol:'Ocio',dibujos:'Ocio',comics:'Ocio',tarea:'Obligaciones',videojuegos:'Ocio',helado:'Ocio',parque:'Ocio',banio:'Autocuidado',dormir:'Autocuidado',musica:'Ocio',bailar:'Ocio',amigos:'Ocio',bicicleta:'Ocio',dibujar:'Ocio',mascotas:'Ocio',experimentos:'Obligaciones',cantar:'Ocio',lego:'Ocio',nadar:'Autocuidado',computadora:'Ocio'};// Mapeo de categoría a grupo para radar y gauge\nconst groupMap={Autocuidado:'Autocuidado',Obligaciones:'Obligaciones',Ocio:'Ocio'};// Colores para gráficos\nconst COLORS=['#8884d8','#82ca9d','#ffc658','#ff8042','#0088FE'];function PatientRoutines(){const{patientId}=useParams();const[results,setResults]=useState([]);const[filtered,setFiltered]=useState([]);const[from,setFrom]=useState('');const[to,setTo]=useState('');const[selected,setSelected]=useState(null);const[metrics,setMetrics]=useState(null);const[correspondence,setCorrespondence]=useState(null);// Fetchar resultados de juego\nuseEffect(()=>{const token=localStorage.getItem('token');axios.get(`/api/game?patientId=${patientId}`,{headers:{'x-auth-token':token}}).then(resp=>{setResults(resp.data);// filtro por defecto: últimos 7 días\nconst now=new Date(),weekAgo=new Date(now);weekAgo.setDate(now.getDate()-6);setFrom(weekAgo.toISOString().slice(0,10));setTo(now.toISOString().slice(0,10));}).catch(console.error);},[patientId]);// Aplicar filtro de fechas\nuseEffect(()=>{if(!from||!to)return;const fDate=new Date(from),tDate=new Date(to);tDate.setHours(23,59,59,999);setFiltered(results.filter(r=>{const d=new Date(r.createdAt);return d>=fDate&&d<=tDate;}));},[results,from,to]);// Recalcular correspondencia Wed vs Sat\nuseEffect(()=>{if(filtered.length===0){setCorrespondence(null);return;}computeCrossMetrics(filtered);},[filtered]);// Seleccionar primer resultado filtrado\nuseEffect(()=>{if(filtered.length)setSelected(filtered[0].createdAt);else setSelected(null);},[filtered]);// Calcular métricas cuando cambia el seleccionado\nuseEffect(()=>{if(!selected){setMetrics(null);return;}const res=filtered.find(r=>r.createdAt===selected);if(!res){setMetrics(null);return;}setMetrics(computeMetrics(res,filtered));},[selected,filtered]);// Función para computar métricas de un día\nfunction computeMetrics(result,allResults){const slots=result.timeSlots||[];const activities=slots.flatMap(slot=>(slot.activities||[]).map(act=>({...act,slot:slot.slot})));const totalMin=activities.reduce((sum,a)=>sum+a.duration,0)||1;// 1. Distribución % por categoría\nconst catSum={};activities.forEach(a=>{const c=categoryMap[a.activityId]||'Otros';catSum[c]=(catSum[c]||0)+a.duration;});const distribution=Object.entries(catSum).map(_ref=>{let[name,val]=_ref;return{name,value:+(val/totalMin*100).toFixed(1)};});// 2. Horas absolutas por categoría\nconst hours=Object.entries(catSum).map(_ref2=>{let[name,val]=_ref2;return{name,hours:+(val/60).toFixed(2)};});// 3. Diversidad de actividades\nconst diversity=new Set(activities.map(a=>a.activityId)).size;// 4. Consistencia diaria\nconst covered=slots.filter(s=>{var _s$activities;return((_s$activities=s.activities)===null||_s$activities===void 0?void 0:_s$activities.length)>0;}).length;const consistency=+(covered/24*100).toFixed(1);// 5. Patrón horario (mañana/tarde/noche)\nconst periods={Mañana:[6,11],Tarde:[12,17],Noche:[18,23]};const pdSum={Mañana:0,Tarde:0,Noche:0};activities.forEach(a=>{const h=parseInt(a.slot.split(':')[0],10);for(let p in periods){const[s,e]=periods[p];if(h>=s&&h<=e)pdSum[p]+=a.duration;}});const timeOfDay=Object.entries(pdSum).map(_ref3=>{let[name,val]=_ref3;return{name,hours:+(val/60).toFixed(2)};});// 6. Balance autocuidado/productividad/ocio\nconst grpSum={Autocuidado:0,Obligaciones:0,Ocio:0};activities.forEach(a=>{const cat=categoryMap[a.activityId]||'Ocio';const grp=groupMap[cat]||'Ocio';grpSum[grp]+=a.duration;});const groupBalance=Object.entries(grpSum).map(_ref4=>{let[subject,val]=_ref4;return{subject,value:+(val/totalMin*100).toFixed(1)};});// 7. Tendencia semanal: % por grupo día a día\nconst trend=allResults.map(r=>{const acts=(r.timeSlots||[]).flatMap(sl=>(sl.activities||[]).map(act=>({...act,slot:sl.slot})));const tot=acts.reduce((s,a)=>s+a.duration,0)||1;const sums={Autocuidado:0,Obligaciones:0,Ocio:0};acts.forEach(a=>{const cat=categoryMap[a.activityId]||'Ocio';const g=groupMap[cat]||'Ocio';sums[g]+=a.duration;});return{date:new Date(r.createdAt).toLocaleDateString(),Autocuidado:+(sums.Autocuidado/tot*100).toFixed(1),Obligaciones:+(sums.Obligaciones/tot*100).toFixed(1),Ocio:+(sums.Ocio/tot*100).toFixed(1)};});// 8. Índice de equilibrio global\nconst N=distribution.length;const uniform=100/N;const idx=1-distribution.reduce((acc,cat)=>acc+Math.abs(cat.value-uniform)/200,0);const balanceIndex=+idx.toFixed(2);// 9. Patrón de continuidad: transiciones de misma categoría\nconst seqCats=activities.sort((a,b)=>a.slot.localeCompare(b.slot)).map(a=>categoryMap[a.activityId]||'Otros');let sameCount=0;for(let i=0;i<seqCats.length-1;i++){if(seqCats[i]===seqCats[i+1])sameCount++;}const totalTrans=seqCats.length>1?seqCats.length-1:1;const continuityIndex=+(sameCount/totalTrans*100).toFixed(1);return{distribution,hours,diversity,consistency,timeOfDay,groupBalance,trend,balanceIndex,continuityIndex};}// Función para computar correspondencia Wed vs Sat\nfunction computeCrossMetrics(arr){const categories=['Autocuidado','Obligaciones','Ocio'];const dayGroups={'Miércoles':[],'Sábado':[]};arr.forEach(r=>{if(r.day&&dayGroups[r.day])dayGroups[r.day].push(r);});const distForDay=group=>{const catSum={Autocuidado:0,Obligaciones:0,Ocio:0};group.forEach(r=>(r.timeSlots||[]).flatMap(sl=>sl.activities||[]).forEach(a=>{const cat=categoryMap[a.activityId]||'Ocio';const grp=groupMap[cat]||'Ocio';catSum[grp]+=a.duration;}));const total=Object.values(catSum).reduce((s,v)=>s+v,0)||1;return categories.map(c=>({category:c,value:+(catSum[c]/total*100).toFixed(1)}));};const wedDist=distForDay(dayGroups['Miércoles']);const satDist=distForDay(dayGroups['Sábado']);const similarityIndex=+categories.reduce((acc,_,i)=>acc+Math.min(wedDist[i].value,satDist[i].value),0).toFixed(1);setCorrespondence({categories,wedDist,satDist,similarityIndex});}return/*#__PURE__*/_jsxs(\"div\",{className:\"routines-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"routines-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/therapist/routines\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Estad\\xEDsticas de Rutinas\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"filter-section\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Desde: \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:from,onChange:e=>setFrom(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Hasta: \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:to,onChange:e=>setTo(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Seleccionar d\\xEDa:\",/*#__PURE__*/_jsx(\"select\",{value:selected||'',onChange:e=>setSelected(e.target.value),children:filtered.map(r=>{const d=new Date(r.createdAt).toLocaleDateString();return/*#__PURE__*/_jsx(\"option\",{value:r.createdAt,children:d},r.createdAt);})})]})]}),metrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"metrics-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"Diversidad: \",/*#__PURE__*/_jsx(\"strong\",{children:metrics.diversity})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"Consistencia: \",/*#__PURE__*/_jsxs(\"strong\",{children:[metrics.consistency,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"\\xCDndice Equilibrio: \",/*#__PURE__*/_jsx(\"strong\",{children:metrics.balanceIndex})]})]}),metrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"charts-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Distribuci\\xF3n % por Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"p\",{className:\"chart-desc\",children:\"Proporci\\xF3n de tiempo dedicado a cada categor\\xEDa de actividad.\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:metrics.distribution,dataKey:\"value\",nameKey:\"name\",cx:\"50%\",cy:\"50%\",outerRadius:80,label:true,children:metrics.distribution.map((entry,i)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[i%COLORS.length]},i))}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Horas por Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"p\",{className:\"chart-desc\",children:\"Total de horas (decimal) por cada categor\\xEDa de actividad.\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(BarChart,{data:metrics.hours,margin:{top:20,right:30,left:0,bottom:0},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"hours\",fill:\"#8884d8\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Balance Autocuidado/Obligaciones/Ocio\"}),/*#__PURE__*/_jsx(\"p\",{className:\"chart-desc\",children:\"Distribuci\\xF3n porcentual entre autocuidado, obligaciones y ocio.\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(RadarChart,{data:metrics.groupBalance,cx:\"50%\",cy:\"50%\",outerRadius:80,children:[/*#__PURE__*/_jsx(PolarGrid,{}),/*#__PURE__*/_jsx(PolarAngleAxis,{dataKey:\"subject\"}),/*#__PURE__*/_jsx(PolarRadiusAxis,{angle:30,domain:[0,100]}),/*#__PURE__*/_jsx(Radar,{dataKey:\"value\",stroke:\"#82ca9d\",fill:\"#82ca9d\",fillOpacity:0.6}),/*#__PURE__*/_jsx(Tooltip,{})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block full-width\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Tendencia Semanal (% por Grupo)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"chart-desc\",children:\"Evoluci\\xF3n diaria del porcentaje dedicado a cada grupo.\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:metrics.trend,margin:{top:20,right:30,left:0,bottom:0},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"Autocuidado\",stroke:\"#8884d8\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"Obligaciones\",stroke:\"#82ca9d\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"Ocio\",stroke:\"#ffc658\"}),/*#__PURE__*/_jsx(Legend,{})]})})]})]}),metrics&&/*#__PURE__*/_jsx(\"div\",{className:\"charts-grid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Patr\\xF3n de Continuidad de Actividades\"}),/*#__PURE__*/_jsx(\"p\",{className:\"chart-desc\",children:\"Porcentaje de transiciones entre actividades que mantienen la misma categor\\xEDa (orden vs caos).\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(BarChart,{data:[{name:'Continuidad',value:metrics.continuityIndex}],children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{domain:[0,100]}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"value\",fill:\"#ff8042\"})]})})]})}),correspondence&&/*#__PURE__*/_jsx(\"div\",{className:\"charts-grid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block full-width\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Correspondencia Mi\\xE9rcoles vs S\\xE1bado\"}),/*#__PURE__*/_jsx(\"p\",{className:\"chart-desc\",children:\"Comparativa de la distribuci\\xF3n porcentual de categor\\xEDas entre un Mi\\xE9rcoles y un S\\xE1bado.\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:correspondence.categories.map((c,i)=>({category:c,Miércoles:correspondence.wedDist[i].value,Sábado:correspondence.satDist[i].value})),margin:{top:20,right:30,left:0,bottom:0},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"category\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"Mi\\xE9rcoles\",fill:\"#8884d8\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"S\\xE1bado\",fill:\"#82ca9d\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"\\xCDndice de Correspondencia: \",/*#__PURE__*/_jsxs(\"strong\",{children:[correspondence.similarityIndex,\"%\"]})]})]})})]});}export default PatientRoutines;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","PieChart","Pie","Cell","Tooltip","Legend","BarChart","Bar","XAxis","YAxis","CartesianGrid","RadarChart","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Radar","LineChart","Line","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","categoryMap","futbol","dibujos","comics","tarea","videojuegos","helado","parque","banio","dormir","musica","bailar","amigos","bicicleta","dibujar","mascotas","experimentos","cantar","lego","nadar","computadora","groupMap","Autocuidado","Obligaciones","Ocio","COLORS","PatientRoutines","patientId","results","setResults","filtered","setFiltered","from","setFrom","to","setTo","selected","setSelected","metrics","setMetrics","correspondence","setCorrespondence","token","localStorage","getItem","get","headers","then","resp","data","now","Date","weekAgo","setDate","getDate","toISOString","slice","catch","console","error","fDate","tDate","setHours","filter","r","d","createdAt","length","computeCrossMetrics","res","find","computeMetrics","result","allResults","slots","timeSlots","activities","flatMap","slot","map","act","totalMin","reduce","sum","a","duration","catSum","forEach","c","activityId","distribution","Object","entries","_ref","name","val","value","toFixed","hours","_ref2","diversity","Set","size","covered","s","_s$activities","consistency","periods","Mañana","Tarde","Noche","pdSum","h","parseInt","split","p","e","timeOfDay","_ref3","grpSum","cat","grp","groupBalance","_ref4","subject","trend","acts","sl","tot","sums","g","date","toLocaleDateString","N","uniform","idx","acc","Math","abs","balanceIndex","seqCats","sort","b","localeCompare","sameCount","i","totalTrans","continuityIndex","arr","categories","dayGroups","day","push","distForDay","group","total","values","v","category","wedDist","satDist","similarityIndex","_","min","className","children","type","onChange","target","width","height","dataKey","nameKey","cx","cy","outerRadius","label","entry","fill","margin","top","right","left","bottom","strokeDasharray","angle","domain","stroke","fillOpacity","Miércoles","Sábado"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientRoutines.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport {\r\n  PieChart, Pie, Cell, Tooltip, Legend,\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid,\r\n  RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar,\r\n  LineChart, Line,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport '../styles/TherapistRoutines.css';\r\n\r\n// Mapeo de actividad a categoría\r\nconst categoryMap = {\r\n  futbol:     'Ocio', dibujos:   'Ocio', comics:    'Ocio',\r\n  tarea:      'Obligaciones', videojuegos: 'Ocio', helado:    'Ocio',\r\n  parque:     'Ocio', banio:     'Autocuidado', dormir:    'Autocuidado',\r\n  musica:     'Ocio', bailar:    'Ocio', amigos:    'Ocio',\r\n  bicicleta:  'Ocio', dibujar:   'Ocio', mascotas:  'Ocio',\r\n  experimentos: 'Obligaciones', cantar:    'Ocio', lego:      'Ocio',\r\n  nadar:      'Autocuidado', computadora:'Ocio'\r\n};\r\n// Mapeo de categoría a grupo para radar y gauge\r\nconst groupMap = {\r\n  Autocuidado:   'Autocuidado',\r\n  Obligaciones:  'Obligaciones',\r\n  Ocio:          'Ocio'\r\n};\r\n// Colores para gráficos\r\nconst COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff8042', '#0088FE'];\r\n\r\nfunction PatientRoutines() {\r\n  const { patientId } = useParams();\r\n  const [results, setResults] = useState([]);\r\n  const [filtered, setFiltered] = useState([]);\r\n  const [from, setFrom] = useState('');\r\n  const [to, setTo] = useState('');\r\n  const [selected, setSelected] = useState(null);\r\n  const [metrics, setMetrics] = useState(null);\r\n  const [correspondence, setCorrespondence] = useState(null);\r\n\r\n  // Fetchar resultados de juego\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    axios.get(`/api/game?patientId=${patientId}`, {\r\n      headers: { 'x-auth-token': token }\r\n    }).then(resp => {\r\n      setResults(resp.data);\r\n      // filtro por defecto: últimos 7 días\r\n      const now = new Date(), weekAgo = new Date(now);\r\n      weekAgo.setDate(now.getDate() - 6);\r\n      setFrom(weekAgo.toISOString().slice(0,10));\r\n      setTo(now.toISOString().slice(0,10));\r\n    }).catch(console.error);\r\n  }, [patientId]);\r\n\r\n  // Aplicar filtro de fechas\r\n  useEffect(() => {\r\n    if (!from || !to) return;\r\n    const fDate = new Date(from), tDate = new Date(to);\r\n    tDate.setHours(23,59,59,999);\r\n    setFiltered(\r\n      results.filter(r => {\r\n        const d = new Date(r.createdAt);\r\n        return d >= fDate && d <= tDate;\r\n      })\r\n    );\r\n  }, [results, from, to]);\r\n\r\n  // Recalcular correspondencia Wed vs Sat\r\n  useEffect(() => {\r\n    if (filtered.length === 0) { setCorrespondence(null); return; }\r\n    computeCrossMetrics(filtered);\r\n  }, [filtered]);\r\n\r\n  // Seleccionar primer resultado filtrado\r\n  useEffect(() => {\r\n    if (filtered.length) setSelected(filtered[0].createdAt);\r\n    else setSelected(null);\r\n  }, [filtered]);\r\n\r\n  // Calcular métricas cuando cambia el seleccionado\r\n  useEffect(() => {\r\n    if (!selected) { setMetrics(null); return; }\r\n    const res = filtered.find(r => r.createdAt === selected);\r\n    if (!res) { setMetrics(null); return; }\r\n    setMetrics(computeMetrics(res, filtered));\r\n  }, [selected, filtered]);\r\n\r\n  // Función para computar métricas de un día\r\n  function computeMetrics(result, allResults) {\r\n    const slots = result.timeSlots || [];\r\n    const activities = slots.flatMap(slot =>\r\n      (slot.activities || []).map(act => ({ ...act, slot: slot.slot }))\r\n    );\r\n    const totalMin = activities.reduce((sum, a) => sum + a.duration, 0) || 1;\r\n\r\n    // 1. Distribución % por categoría\r\n    const catSum = {};\r\n    activities.forEach(a => {\r\n      const c = categoryMap[a.activityId] || 'Otros';\r\n      catSum[c] = (catSum[c] || 0) + a.duration;\r\n    });\r\n    const distribution = Object.entries(catSum).map(([name, val]) => ({\r\n      name, value: +((val / totalMin) * 100).toFixed(1)\r\n    }));\r\n\r\n    // 2. Horas absolutas por categoría\r\n    const hours = Object.entries(catSum).map(([name, val]) => ({\r\n      name, hours: +(val / 60).toFixed(2)\r\n    }));\r\n\r\n    // 3. Diversidad de actividades\r\n    const diversity = new Set(activities.map(a => a.activityId)).size;\r\n\r\n    // 4. Consistencia diaria\r\n    const covered = slots.filter(s => s.activities?.length > 0).length;\r\n    const consistency = +((covered / 24) * 100).toFixed(1);\r\n\r\n    // 5. Patrón horario (mañana/tarde/noche)\r\n    const periods = { Mañana: [6, 11], Tarde: [12, 17], Noche: [18, 23] };\r\n    const pdSum = { Mañana: 0, Tarde: 0, Noche: 0 };\r\n    activities.forEach(a => {\r\n      const h = parseInt(a.slot.split(':')[0], 10);\r\n      for (let p in periods) {\r\n        const [s, e] = periods[p];\r\n        if (h >= s && h <= e) pdSum[p] += a.duration;\r\n      }\r\n    });\r\n    const timeOfDay = Object.entries(pdSum).map(([name, val]) => ({\r\n      name, hours: +(val / 60).toFixed(2)\r\n    }));\r\n\r\n    // 6. Balance autocuidado/productividad/ocio\r\n    const grpSum = { Autocuidado: 0, Obligaciones: 0, Ocio: 0 };\r\n    activities.forEach(a => {\r\n      const cat = categoryMap[a.activityId] || 'Ocio';\r\n      const grp = groupMap[cat] || 'Ocio';\r\n      grpSum[grp] += a.duration;\r\n    });\r\n    const groupBalance = Object.entries(grpSum).map(([subject, val]) => ({\r\n      subject, value: +((val / totalMin) * 100).toFixed(1)\r\n    }));\r\n\r\n    // 7. Tendencia semanal: % por grupo día a día\r\n    const trend = allResults.map(r => {\r\n      const acts = (r.timeSlots || []).flatMap(sl =>\r\n        (sl.activities || []).map(act => ({ ...act, slot: sl.slot }))\r\n      );\r\n      const tot = acts.reduce((s, a) => s + a.duration, 0) || 1;\r\n      const sums = { Autocuidado: 0, Obligaciones: 0, Ocio: 0 };\r\n      acts.forEach(a => {\r\n        const cat = categoryMap[a.activityId] || 'Ocio';\r\n        const g = groupMap[cat] || 'Ocio';\r\n        sums[g] += a.duration;\r\n      });\r\n      return {\r\n        date: new Date(r.createdAt).toLocaleDateString(),\r\n        Autocuidado: +((sums.Autocuidado / tot) * 100).toFixed(1),\r\n        Obligaciones: +((sums.Obligaciones / tot) * 100).toFixed(1),\r\n        Ocio: +((sums.Ocio / tot) * 100).toFixed(1)\r\n      };\r\n    });\r\n\r\n    // 8. Índice de equilibrio global\r\n    const N = distribution.length;\r\n    const uniform = 100 / N;\r\n    const idx = 1 - distribution.reduce((acc, cat) =>\r\n      acc + Math.abs(cat.value - uniform) / 200, 0\r\n    );\r\n    const balanceIndex = +idx.toFixed(2);\r\n\r\n    // 9. Patrón de continuidad: transiciones de misma categoría\r\n    const seqCats = activities\r\n      .sort((a, b) => a.slot.localeCompare(b.slot))\r\n      .map(a => categoryMap[a.activityId] || 'Otros');\r\n    let sameCount = 0;\r\n    for (let i = 0; i < seqCats.length - 1; i++) {\r\n      if (seqCats[i] === seqCats[i + 1]) sameCount++;\r\n    }\r\n    const totalTrans = seqCats.length > 1 ? seqCats.length - 1 : 1;\r\n    const continuityIndex = +((sameCount / totalTrans) * 100).toFixed(1);\r\n\r\n    return {\r\n      distribution,\r\n      hours,\r\n      diversity,\r\n      consistency,\r\n      timeOfDay,\r\n      groupBalance,\r\n      trend,\r\n      balanceIndex,\r\n      continuityIndex\r\n    };\r\n  }\r\n\r\n  // Función para computar correspondencia Wed vs Sat\r\n  function computeCrossMetrics(arr) {\r\n    const categories = ['Autocuidado', 'Obligaciones', 'Ocio'];\r\n    const dayGroups = { 'Miércoles': [], 'Sábado': [] };\r\n\r\n    arr.forEach(r => {\r\n      if (r.day && dayGroups[r.day]) dayGroups[r.day].push(r);\r\n    });\r\n\r\n    const distForDay = group => {\r\n      const catSum = { Autocuidado: 0, Obligaciones: 0, Ocio: 0 };\r\n      group.forEach(r =>\r\n        (r.timeSlots || []).flatMap(sl => sl.activities || [])\r\n          .forEach(a => {\r\n            const cat = categoryMap[a.activityId] || 'Ocio';\r\n            const grp = groupMap[cat] || 'Ocio';\r\n            catSum[grp] += a.duration;\r\n          })\r\n      );\r\n      const total = Object.values(catSum).reduce((s, v) => s + v, 0) || 1;\r\n      return categories.map(c => ({\r\n        category: c,\r\n        value: +(catSum[c] / total * 100).toFixed(1)\r\n      }));\r\n    };\r\n\r\n    const wedDist = distForDay(dayGroups['Miércoles']);\r\n    const satDist = distForDay(dayGroups['Sábado']);\r\n    const similarityIndex = +categories\r\n      .reduce((acc, _, i) => acc + Math.min(wedDist[i].value, satDist[i].value), 0)\r\n      .toFixed(1);\r\n\r\n    setCorrespondence({ categories, wedDist, satDist, similarityIndex });\r\n  }\r\n\r\n  return (\r\n    <div className=\"routines-container\">\r\n      <header className=\"routines-header\">\r\n        <Link to=\"/therapist/routines\">← Volver</Link>\r\n        <h2>Estadísticas de Rutinas</h2>\r\n      </header>\r\n\r\n      <section className=\"filter-section\">\r\n        <label>Desde: <input type=\"date\" value={from} onChange={e => setFrom(e.target.value)} /></label>\r\n        <label>Hasta: <input type=\"date\" value={to} onChange={e => setTo(e.target.value)} /></label>\r\n        <label>Seleccionar día:\r\n          <select value={selected || ''} onChange={e => setSelected(e.target.value)}>\r\n            {filtered.map(r => {\r\n              const d = new Date(r.createdAt).toLocaleDateString();\r\n              return <option key={r.createdAt} value={r.createdAt}>{d}</option>;\r\n            })}\r\n          </select>\r\n        </label>\r\n      </section>\r\n\r\n      {metrics && (\r\n        <div className=\"metrics-grid\">\r\n          <div className=\"metric-card\">Diversidad: <strong>{metrics.diversity}</strong></div>\r\n          <div className=\"metric-card\">Consistencia: <strong>{metrics.consistency}%</strong></div>\r\n          <div className=\"metric-card\">Índice Equilibrio: <strong>{metrics.balanceIndex}</strong></div>\r\n        </div>\r\n      )}\r\n\r\n      {metrics && (\r\n        <div className=\"charts-grid\">\r\n          {/* Distribución */}\r\n          <div className=\"chart-block\">\r\n            <h3>Distribución % por Categoría</h3>\r\n            <p className=\"chart-desc\">\r\n              Proporción de tiempo dedicado a cada categoría de actividad.\r\n            </p>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <PieChart>\r\n                <Pie\r\n                  data={metrics.distribution}\r\n                  dataKey=\"value\"\r\n                  nameKey=\"name\"\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  outerRadius={80}\r\n                  label\r\n                >\r\n                  {metrics.distribution.map((entry, i) =>\r\n                    <Cell key={i} fill={COLORS[i % COLORS.length]} />\r\n                  )}\r\n                </Pie>\r\n                <Tooltip />\r\n                <Legend />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          {/* Horas por categoría */}\r\n          <div className=\"chart-block\">\r\n            <h3>Horas por Categoría</h3>\r\n            <p className=\"chart-desc\">\r\n              Total de horas (decimal) por cada categoría de actividad.\r\n            </p>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <BarChart\r\n                data={metrics.hours}\r\n                margin={{ top: 20, right: 30, left: 0, bottom: 0 }}\r\n              >\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n                <Bar dataKey=\"hours\" fill=\"#8884d8\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          {/* Balance grupo */}\r\n          <div className=\"chart-block\">\r\n            <h3>Balance Autocuidado/Obligaciones/Ocio</h3>\r\n            <p className=\"chart-desc\">\r\n              Distribución porcentual entre autocuidado, obligaciones y ocio.\r\n            </p>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <RadarChart\r\n                data={metrics.groupBalance}\r\n                cx=\"50%\" cy=\"50%\"\r\n                outerRadius={80}\r\n              >\r\n                <PolarGrid />\r\n                <PolarAngleAxis dataKey=\"subject\" />\r\n                <PolarRadiusAxis angle={30} domain={[0, 100]} />\r\n                <Radar dataKey=\"value\" stroke=\"#82ca9d\" fill=\"#82ca9d\" fillOpacity={0.6} />\r\n                <Tooltip />\r\n              </RadarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          {/* Tendencia semanal */}\r\n          <div className=\"chart-block full-width\">\r\n            <h3>Tendencia Semanal (% por Grupo)</h3>\r\n            <p className=\"chart-desc\">\r\n              Evolución diaria del porcentaje dedicado a cada grupo.\r\n            </p>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart\r\n                data={metrics.trend}\r\n                margin={{ top: 20, right: 30, left: 0, bottom: 0 }}\r\n              >\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"date\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n                <Line type=\"monotone\" dataKey=\"Autocuidado\" stroke=\"#8884d8\" />\r\n                <Line type=\"monotone\" dataKey=\"Obligaciones\" stroke=\"#82ca9d\" />\r\n                <Line type=\"monotone\" dataKey=\"Ocio\" stroke=\"#ffc658\" />\r\n                <Legend />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Patrón de Continuidad */}\r\n      {metrics && (\r\n        <div className=\"charts-grid\">\r\n          <div className=\"chart-block\">\r\n            <h3>Patrón de Continuidad de Actividades</h3>\r\n            <p className=\"chart-desc\">\r\n              Porcentaje de transiciones entre actividades que mantienen la misma categoría (orden vs caos).\r\n            </p>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <BarChart data={[{ name: 'Continuidad', value: metrics.continuityIndex }]}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis domain={[0, 100]} />\r\n                <Tooltip />\r\n                <Bar dataKey=\"value\" fill=\"#ff8042\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Correspondencia Miércoles vs Sábado */}\r\n      {correspondence && (\r\n        <div className=\"charts-grid\">\r\n          <div className=\"chart-block full-width\">\r\n            <h3>Correspondencia Miércoles vs Sábado</h3>\r\n            <p className=\"chart-desc\">\r\n              Comparativa de la distribución porcentual de categorías entre un Miércoles y un Sábado.\r\n            </p>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart\r\n                data={correspondence.categories.map((c, i) => ({\r\n                  category: c,\r\n                  Miércoles: correspondence.wedDist[i].value,\r\n                  Sábado: correspondence.satDist[i].value\r\n                }))}\r\n                margin={{ top: 20, right: 30, left: 0, bottom: 0 }}\r\n              >\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"category\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n                <Legend />\r\n                <Bar dataKey=\"Miércoles\" fill=\"#8884d8\" />\r\n                <Bar dataKey=\"Sábado\" fill=\"#82ca9d\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n            <div className=\"metric-card\">\r\n              Índice de Correspondencia: <strong>{correspondence.similarityIndex}%</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PatientRoutines;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}