{"ast":null,"code":"import React,{useState,useEffect}from'react';import assignedService from'../services/assignedRoutineService';import'../styles/patientAssignedRoutines.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PatientAssignedRoutines(){const[list,setList]=useState([]);useEffect(()=>{const token=localStorage.getItem('token');assignedService.getList(token).then(res=>{const data=Array.isArray(res.data)?res.data:[];setList(data);}).catch(()=>setList([]));},[]);const updateStatus=async(id,status)=>{const token=localStorage.getItem('token');try{const inst=await assignedService.update(id,{status},token);setList(prev=>prev.map(item=>item._id===id?inst.data:item));}catch(error){console.error('Error actualizando estado:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"pr-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Mis Rutinas Asignadas\"}),list.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No tienes rutinas asignadas.\"}):list.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"pr-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.template.title}),/*#__PURE__*/_jsx(\"p\",{children:item.template.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"pr-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Status: \",/*#__PURE__*/_jsx(\"strong\",{children:item.status})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Duraci\\xF3n: \",item.template.duration,\" min\"]})]}),item.status==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"pr-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus(item._id,'completed'),children:\"Hecho\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatus(item._id,'postponed'),children:\"Posponer\"})]})]},item._id))]});}","map":{"version":3,"names":["React","useState","useEffect","assignedService","jsx","_jsx","jsxs","_jsxs","PatientAssignedRoutines","list","setList","token","localStorage","getItem","getList","then","res","data","Array","isArray","catch","updateStatus","id","status","inst","update","prev","map","item","_id","error","console","className","children","length","template","title","description","duration","onClick"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientAssignedRoutines.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport assignedService from '../services/assignedRoutineService';\r\nimport '../styles/patientAssignedRoutines.css';\r\n\r\nexport default function PatientAssignedRoutines() {\r\n  const [list, setList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    assignedService.getList(token)\r\n      .then(res => {\r\n        const data = Array.isArray(res.data) ? res.data : [];\r\n        setList(data);\r\n      })\r\n      .catch(() => setList([]));\r\n  }, []);\r\n\r\n  const updateStatus = async (id, status) => {\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      const inst = await assignedService.update(id, { status }, token);\r\n      setList(prev =>\r\n        prev.map(item => (item._id === id ? inst.data : item))\r\n      );\r\n    } catch (error) {\r\n      console.error('Error actualizando estado:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"pr-container\">\r\n      <h2>Mis Rutinas Asignadas</h2>\r\n      {list.length === 0 ? (\r\n        <p>No tienes rutinas asignadas.</p>\r\n      ) : (\r\n        list.map(item => (\r\n          <div key={item._id} className=\"pr-card\">\r\n            <h3>{item.template.title}</h3>\r\n            <p>{item.template.description}</p>\r\n            <div className=\"pr-info\">\r\n              <span>Status: <strong>{item.status}</strong></span>\r\n              <span>Duraci√≥n: {item.template.duration} min</span>\r\n            </div>\r\n            {item.status === 'pending' && (\r\n              <div className=\"pr-actions\">\r\n                <button onClick={() => updateStatus(item._id, 'completed')}>\r\n                  Hecho\r\n                </button>\r\n                <button onClick={() => updateStatus(item._id, 'postponed')}>\r\n                  Posponer\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}