{"ast":null,"code":"// src/components/PatientTemplateDetail.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import{useParams,Link}from'react-router-dom';import'../styles/routineTemplates.css';/** Decodifica un JWT y devuelve su payload como objeto, o null si falla */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function decodeJwt(token){try{const b64Url=token.split('.')[1];const b64=b64Url.replace(/-/g,'+').replace(/_/g,'/');return JSON.parse(atob(b64));}catch{return null;}}function getPatientId(){var _payload$user;const raw=localStorage.getItem('token');if(!raw)return null;const token=raw.startsWith('Bearer ')?raw.slice(7):raw;const payload=decodeJwt(token);return(payload===null||payload===void 0?void 0:payload.id)||(payload===null||payload===void 0?void 0:payload.sub)||(payload===null||payload===void 0?void 0:(_payload$user=payload.user)===null||_payload$user===void 0?void 0:_payload$user.id)||localStorage.getItem('userId');}export default function PatientTemplateDetail(){var _tpl$tags;const{instanceId}=useParams();const[instance,setInstance]=useState(null);const[acts,setActs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchDetail=async()=>{const token=localStorage.getItem('token');const patientId=getPatientId();if(!token||!patientId){setError('No est√°s autenticado. Por favor, inicia sesi√≥n.');setLoading(false);return;}try{const res=await axios.get(`/api/routines/instances/${patientId}`,{headers:{'x-auth-token':token}});const list=Array.isArray(res.data)?res.data:Array.isArray(res.data.instances)?res.data.instances:[];const found=list.find(i=>i._id===instanceId);if(!found){setError('No se encontr√≥ la plantilla solicitada.');}else{setInstance(found);// Prepara un estado editable de actividades\nsetActs(found.template.activities.map((act,idx)=>{var _act$category;return{...act,idx,completed:found.completedActivities.includes(idx),duration:act.minutes,category:(_act$category=act.category)!==null&&_act$category!==void 0?_act$category:'Otro'};}));}}catch(err){var _err$response,_err$response$data;console.error(err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Error al cargar detalles');}finally{setLoading(false);}};fetchDetail();},[instanceId]);const toggleComplete=idx=>{setActs(prev=>prev.map(a=>a.idx!==idx?a:{...a,completed:!a.completed}));};const onFieldChange=(idx,field,value)=>{setActs(prev=>prev.map(a=>a.idx!==idx?a:{...a,[field]:value}));};const saveProgress=async()=>{const token=localStorage.getItem('token');try{await Promise.all(acts.map(a=>axios.post(`/api/routines/instances/${instanceId}/activities/${a.idx}`,{completed:a.completed},{headers:{'x-auth-token':token}})));alert('Progreso guardado üëç');}catch{alert('Error guardando progreso');}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Cargando detalles\\u2026\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:error});const tpl=instance.template;const completedCount=acts.filter(a=>a.completed).length;const totalCount=acts.length;const progressPct=Math.round(completedCount/totalCount*100);return/*#__PURE__*/_jsx(\"div\",{className:\"routine-templates-page patient-templates-page tpl-detail-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-detail-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/patient/templates\",className:\"back-link\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"tpl-title\",children:tpl.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tags\",children:(_tpl$tags=tpl.tags)===null||_tpl$tags===void 0?void 0:_tpl$tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"tag-badge\",children:tag},tag))}),/*#__PURE__*/_jsx(\"p\",{className:\"tpl-desc\",children:tpl.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-detail-meta\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Asignado:\"}),' ',new Date(instance.createdAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duraci\\xF3n total:\"}),\" \",tpl.duration,\" min\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nivel reto:\"}),' ',/*#__PURE__*/_jsx(\"span\",{className:`challenge-level lvl-${tpl.challengeLevel}`,children:tpl.challengeLevel})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Progreso: \",completedCount,\"/\",totalCount]}),/*#__PURE__*/_jsx(\"progress\",{value:completedCount,max:totalCount}),/*#__PURE__*/_jsxs(\"span\",{className:\"pct-label\",children:[progressPct,\"%\"]})]})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"activities-title\",children:\"Actividades\"}),/*#__PURE__*/_jsx(\"div\",{className:\"activities-container\",children:acts.map(a=>/*#__PURE__*/_jsxs(\"div\",{className:\"activity-item detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"activity-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"activity-number\",children:[\"#\",a.idx+1]}),/*#__PURE__*/_jsx(\"h3\",{children:a.name}),/*#__PURE__*/_jsxs(\"span\",{className:`badge challenge-badge lvl-${a.challenge}`,children:[\"Reto \",a.challenge]})]}),a.desc&&/*#__PURE__*/_jsx(\"p\",{className:\"activity-desc\",children:a.desc}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Duraci\\xF3n (min):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:a.duration,onChange:e=>onFieldChange(a.idx,'duration',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Categor\\xEDa:\"}),/*#__PURE__*/_jsxs(\"select\",{value:a.category,onChange:e=>onFieldChange(a.idx,'category',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{children:\"Ejercicio\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Meditaci\\xF3n\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Lectura\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Otro\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"field complete-toggle\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:a.completed,onChange:()=>toggleComplete(a.idx)}),\"Completada\"]})})]})]},a.idx))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-save\",onClick:saveProgress,children:\"Guardar progreso\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","Link","jsx","_jsx","jsxs","_jsxs","decodeJwt","token","b64Url","split","b64","replace","JSON","parse","atob","getPatientId","_payload$user","raw","localStorage","getItem","startsWith","slice","payload","id","sub","user","PatientTemplateDetail","_tpl$tags","instanceId","instance","setInstance","acts","setActs","loading","setLoading","error","setError","fetchDetail","patientId","res","get","headers","list","Array","isArray","data","instances","found","find","i","_id","template","activities","map","act","idx","_act$category","completed","completedActivities","includes","duration","minutes","category","err","_err$response","_err$response$data","console","response","msg","toggleComplete","prev","a","onFieldChange","field","value","saveProgress","Promise","all","post","alert","children","className","tpl","completedCount","filter","length","totalCount","progressPct","Math","round","to","name","tags","tag","description","Date","createdAt","toLocaleDateString","challengeLevel","max","challenge","desc","type","onChange","e","target","checked","onClick"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientTemplateDetail.js"],"sourcesContent":["// src/components/PatientTemplateDetail.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport '../styles/routineTemplates.css';\r\n\r\n/** Decodifica un JWT y devuelve su payload como objeto, o null si falla */\r\nfunction decodeJwt(token) {\r\n  try {\r\n    const b64Url = token.split('.')[1];\r\n    const b64    = b64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    return JSON.parse(atob(b64));\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction getPatientId() {\r\n  const raw = localStorage.getItem('token');\r\n  if (!raw) return null;\r\n  const token = raw.startsWith('Bearer ') ? raw.slice(7) : raw;\r\n  const payload = decodeJwt(token);\r\n  return payload?.id || payload?.sub || payload?.user?.id || localStorage.getItem('userId');\r\n}\r\n\r\nexport default function PatientTemplateDetail() {\r\n  const { instanceId } = useParams();\r\n  const [instance, setInstance] = useState(null);\r\n  const [acts, setActs]         = useState([]);\r\n  const [loading, setLoading]   = useState(true);\r\n  const [error, setError]       = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchDetail = async () => {\r\n      const token     = localStorage.getItem('token');\r\n      const patientId = getPatientId();\r\n      if (!token || !patientId) {\r\n        setError('No est√°s autenticado. Por favor, inicia sesi√≥n.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await axios.get(\r\n          `/api/routines/instances/${patientId}`,\r\n          { headers: { 'x-auth-token': token } }\r\n        );\r\n        const list = Array.isArray(res.data)\r\n          ? res.data\r\n          : Array.isArray(res.data.instances)\r\n            ? res.data.instances\r\n            : [];\r\n        const found = list.find(i => i._id === instanceId);\r\n        if (!found) {\r\n          setError('No se encontr√≥ la plantilla solicitada.');\r\n        } else {\r\n          setInstance(found);\r\n          // Prepara un estado editable de actividades\r\n          setActs(\r\n            found.template.activities.map((act, idx) => ({\r\n              ...act,\r\n              idx,\r\n              completed: found.completedActivities.includes(idx),\r\n              duration: act.minutes,\r\n              category: act.category ?? 'Otro'\r\n            }))\r\n          );\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(err.response?.data?.msg || 'Error al cargar detalles');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDetail();\r\n  }, [instanceId]);\r\n\r\n  const toggleComplete = idx => {\r\n    setActs(prev =>\r\n      prev.map(a =>\r\n        a.idx !== idx ? a : { ...a, completed: !a.completed }\r\n      )\r\n    );\r\n  };\r\n\r\n  const onFieldChange = (idx, field, value) => {\r\n    setActs(prev =>\r\n      prev.map(a =>\r\n        a.idx !== idx ? a : { ...a, [field]: value }\r\n      )\r\n    );\r\n  };\r\n\r\n  const saveProgress = async () => {\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      await Promise.all(\r\n        acts.map(a =>\r\n          axios.post(\r\n            `/api/routines/instances/${instanceId}/activities/${a.idx}`,\r\n            { completed: a.completed },\r\n            { headers: { 'x-auth-token': token } }\r\n          )\r\n        )\r\n      );\r\n      alert('Progreso guardado üëç');\r\n    } catch {\r\n      alert('Error guardando progreso');\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Cargando detalles‚Ä¶</p>;\r\n  if (error)   return <p className=\"error-msg\">{error}</p>;\r\n\r\n  const tpl = instance.template;\r\n  const completedCount = acts.filter(a => a.completed).length;\r\n  const totalCount     = acts.length;\r\n  const progressPct    = Math.round((completedCount / totalCount) * 100);\r\n\r\n  return (\r\n    <div className=\"routine-templates-page patient-templates-page tpl-detail-page\">\r\n      <div className=\"tpl-detail-card\">\r\n        <div className=\"detail-header\">\r\n          <Link to=\"/patient/templates\" className=\"back-link\">‚Üê Volver</Link>\r\n          <h1 className=\"tpl-title\">{tpl.name}</h1>\r\n        </div>\r\n\r\n        <div className=\"tags\">\r\n          {tpl.tags?.map(tag => (\r\n            <span key={tag} className=\"tag-badge\">{tag}</span>\r\n          ))}\r\n        </div>\r\n\r\n        <p className=\"tpl-desc\">{tpl.description}</p>\r\n\r\n        <div className=\"tpl-detail-meta\">\r\n          <div><strong>Asignado:</strong>{' '}\r\n            {new Date(instance.createdAt).toLocaleDateString()}</div>\r\n          <div><strong>Duraci√≥n total:</strong> {tpl.duration} min</div>\r\n          <div>\r\n            <strong>Nivel reto:</strong>{' '}\r\n            <span className={`challenge-level lvl-${tpl.challengeLevel}`}>\r\n              {tpl.challengeLevel}\r\n            </span>\r\n          </div>\r\n          <div className=\"progress-bar\">\r\n            <label>Progreso: {completedCount}/{totalCount}</label>\r\n            <progress value={completedCount} max={totalCount} />\r\n            <span className=\"pct-label\">{progressPct}%</span>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 className=\"activities-title\">Actividades</h2>\r\n        <div className=\"activities-container\">\r\n          {acts.map(a => (\r\n            <div key={a.idx} className=\"activity-item detail\">\r\n              <div className=\"activity-header\">\r\n                <span className=\"activity-number\">#{a.idx + 1}</span>\r\n                <h3>{a.name}</h3>\r\n                <span className={`badge challenge-badge lvl-${a.challenge}`}>\r\n                  Reto {a.challenge}\r\n                </span>\r\n              </div>\r\n              {a.desc && <p className=\"activity-desc\">{a.desc}</p>}\r\n              <div className=\"activity-fields\">\r\n                <div className=\"field\">\r\n                  <label>Duraci√≥n (min):</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={a.duration}\r\n                    onChange={e => onFieldChange(a.idx, 'duration', e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"field\">\r\n                  <label>Categor√≠a:</label>\r\n                  <select\r\n                    value={a.category}\r\n                    onChange={e => onFieldChange(a.idx, 'category', e.target.value)}\r\n                  >\r\n                    <option>Ejercicio</option>\r\n                    <option>Meditaci√≥n</option>\r\n                    <option>Lectura</option>\r\n                    <option>Otro</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"field complete-toggle\">\r\n                  <label>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={a.completed}\r\n                      onChange={() => toggleComplete(a.idx)}\r\n                    />\r\n                    Completada\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <button className=\"btn-save\" onClick={saveProgress}>\r\n          Guardar progreso\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}