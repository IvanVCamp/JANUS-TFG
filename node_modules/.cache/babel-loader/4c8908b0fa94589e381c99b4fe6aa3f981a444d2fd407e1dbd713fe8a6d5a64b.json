{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,Link}from'react-router-dom';import'../styles/routineTemplates.css';import'./therapistSessionNotes.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TherapistSessionNotesDetail(){const{patientId}=useParams();const[notes,setNotes]=useState([]);const[text,setText]=useState('');const[date,setDate]=useState(new Date().toISOString().slice(0,10));const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchNotes=async()=>{try{const token=localStorage.getItem('token');const{data}=await axios.get(`/api/therapist/patients/${patientId}/notes`,{headers:{'x-auth-token':token}});setNotes(data);}catch(err){setError('Error al cargar notas');}finally{setLoading(false);}};fetchNotes();},[patientId]);const saveNote=async()=>{const token=localStorage.getItem('token');const payload={content:text,sessionDate:date};const{data}=await axios.post(`/api/therapist/patients/${patientId}/notes`,payload,{headers:{'x-auth-token':token}});setNotes([data,...notes]);setText('');};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Cargando notas\\u2026\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"therapist-session-notes-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/therapist/session-notes\",className:\"back-link\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Notas de Sesi\\xF3n\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"new-note-form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Fecha de sesi\\xF3n\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,onChange:e=>setDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Observaciones / Sugerencias\",/*#__PURE__*/_jsx(\"textarea\",{rows:\"4\",value:text,onChange:e=>setText(e.target.value),placeholder:\"Escribe aqu\\xED tu nota\\u2026\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:saveNote,disabled:!text.trim(),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus\"}),\" A\\xF1adir Nota\"]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"notes-list\",children:notes.map(n=>/*#__PURE__*/_jsxs(\"li\",{className:\"note-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"note-date\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-calendar\"}),' ',new Date(n.sessionDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"span\",{className:\"note-author\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-user-md\"}),' ',n.therapist.nombre,\" \",n.therapist.apellidos]}),/*#__PURE__*/_jsxs(\"span\",{className:\"note-updated\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-clock-o\"}),' ',new Date(n.updatedAt).toLocaleString()]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"note-content\",children:n.content})]},n._id))})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","Link","jsx","_jsx","jsxs","_jsxs","TherapistSessionNotesDetail","patientId","notes","setNotes","text","setText","date","setDate","Date","toISOString","slice","loading","setLoading","error","setError","fetchNotes","token","localStorage","getItem","data","get","headers","err","saveNote","payload","content","sessionDate","post","children","className","to","type","value","onChange","e","target","rows","placeholder","onClick","disabled","trim","map","n","toLocaleDateString","therapist","nombre","apellidos","updatedAt","toLocaleString","_id"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/TherapistSessionNotesDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios                      from 'axios';\r\nimport { useParams, Link }        from 'react-router-dom';\r\nimport '../styles/routineTemplates.css';\r\nimport './therapistSessionNotes.css';\r\n\r\nexport default function TherapistSessionNotesDetail() {\r\n  const { patientId }   = useParams();\r\n  const [notes, setNotes] = useState([]);\r\n  const [text, setText]   = useState('');\r\n  const [date, setDate]   = useState(new Date().toISOString().slice(0,10));\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError]     = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchNotes = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const { data } = await axios.get(\r\n          `/api/therapist/patients/${patientId}/notes`,\r\n          { headers: { 'x-auth-token': token } }\r\n        );\r\n        setNotes(data);\r\n      } catch (err) {\r\n        setError('Error al cargar notas');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchNotes();\r\n  }, [patientId]);\r\n\r\n  const saveNote = async () => {\r\n    const token = localStorage.getItem('token');\r\n    const payload = { content: text, sessionDate: date };\r\n    const { data } = await axios.post(\r\n      `/api/therapist/patients/${patientId}/notes`,\r\n      payload,\r\n      { headers: { 'x-auth-token': token } }\r\n    );\r\n    setNotes([data, ...notes]);\r\n    setText('');\r\n  };\r\n\r\n  if (loading) return <p>Cargando notas…</p>;\r\n  if (error)   return <p className=\"error-msg\">{error}</p>;\r\n\r\n  return (\r\n    <div className=\"therapist-session-notes-detail\">\r\n      <div className=\"detail-header\">\r\n        <Link to=\"/therapist/session-notes\" className=\"back-link\">← Volver</Link>\r\n        <h1>Notas de Sesión</h1>\r\n      </div>\r\n\r\n      <div className=\"new-note-form\">\r\n        <label>\r\n          Fecha de sesión\r\n          <input\r\n            type=\"date\"\r\n            value={date}\r\n            onChange={e => setDate(e.target.value)}\r\n          />\r\n        </label>\r\n        <label>\r\n          Observaciones / Sugerencias\r\n          <textarea\r\n            rows=\"4\"\r\n            value={text}\r\n            onChange={e => setText(e.target.value)}\r\n            placeholder=\"Escribe aquí tu nota…\"\r\n          />\r\n        </label>\r\n        <button onClick={saveNote} disabled={!text.trim()}>\r\n          <i className=\"fa fa-plus\"></i> Añadir Nota\r\n        </button>\r\n      </div>\r\n\r\n      <ul className=\"notes-list\">\r\n        {notes.map(n => (\r\n          <li key={n._id} className=\"note-item\">\r\n            <div className=\"note-meta\">\r\n              <span className=\"note-date\">\r\n                <i className=\"fa fa-calendar\"></i>{' '}\r\n                {new Date(n.sessionDate).toLocaleDateString()}\r\n              </span>\r\n              <span className=\"note-author\">\r\n                <i className=\"fa fa-user-md\"></i>{' '}\r\n                {n.therapist.nombre} {n.therapist.apellidos}\r\n              </span>\r\n              <span className=\"note-updated\">\r\n                <i className=\"fa fa-clock-o\"></i>{' '}\r\n                {new Date(n.updatedAt).toLocaleString()}\r\n              </span>\r\n            </div>\r\n            <p className=\"note-content\">{n.content}</p>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}