{"ast":null,"code":"// src/pages/PatientTemplatesPage.js\nimport React,{useState,useEffect,useMemo}from'react';import{FaChevronDown,FaChevronUp,FaCheckCircle,FaRegCircle}from'react-icons/fa';import{useNavigate}from'react-router-dom';import'../styles/routineTemplates.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function PatientTemplatesPage(){const[instances,setInstances]=useState([]);const[expanded,setExpanded]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[filter,setFilter]=useState('all');const[search,setSearch]=useState('');const[sortOrder,setSortOrder]=useState('recent');const navigate=useNavigate();const token=localStorage.getItem('token');// Decodificar patientId del JWT\nlet patientId=null;if(token){try{var _payload$user;const payload=JSON.parse(atob(token.split('.')[1]));patientId=((_payload$user=payload.user)===null||_payload$user===void 0?void 0:_payload$user.id)||payload.id||payload.sub;}catch(e){console.error('Error decodificando token:',e);}}// Fetch de instancias asignadas\nuseEffect(()=>{if(!token||!patientId){alert('Debes iniciar sesi√≥n como paciente.');navigate('/login');return;}const headers={'Content-Type':'application/json','x-auth-token':token};fetch(`/api/routines/instances/${patientId}`,{headers}).then(res=>{if(res.status===401){alert('Sesi√≥n expirada. Vuelve a iniciar sesi√≥n.');navigate('/login');return null;}if(!res.ok)throw new Error(`HTTP ${res.status}`);return res.json();}).then(data=>{if(Array.isArray(data))setInstances(data);else throw new Error('Datos inv√°lidos del servidor');}).catch(err=>setError(err.message)).finally(()=>setLoading(false));},[token,patientId,navigate]);// Marcar/desmarcar actividad\nconst markActivity=(instId,idx,completed)=>{const headers={'Content-Type':'application/json','x-auth-token':token};fetch(`/api/routines/instances/${instId}/activities/${idx}`,{method:'POST',headers,body:JSON.stringify({completed})}).then(res=>{if(!res.ok)throw new Error('No se pudo actualizar');// Actualizaci√≥n local optimista\nsetInstances(list=>list.map(i=>i._id!==instId?i:{...i,completedActivities:completed?[...i.completedActivities,idx]:i.completedActivities.filter(j=>j!==idx)}));}).catch(console.error);};// Completar todas las actividades pendientes\nconst completeAll=inst=>{const toComplete=inst.template.activities.map((_,i)=>i).filter(i=>!inst.completedActivities.includes(i));toComplete.forEach(idx=>markActivity(inst._id,idx,true));};// Posponer (solo UI)\nconst postpone=instId=>{setInstances(list=>list.map(i=>i._id===instId?{...i,status:'postponed'}:i));};// Toggle expand/collapse\nconst toggleExpand=id=>setExpanded(e=>({...e,[id]:!e[id]}));// Filtrado, b√∫squeda y ordenaci√≥n con fallback seguro\nconst displayed=useMemo(()=>{const lowerSearch=search.toLowerCase();return instances.filter(i=>{var _i$template$name,_i$template;const name=((_i$template$name=(_i$template=i.template)===null||_i$template===void 0?void 0:_i$template.name)!==null&&_i$template$name!==void 0?_i$template$name:'').toLowerCase();const statusMatch=filter==='all'||i.status===filter;const searchMatch=name.includes(lowerSearch);return statusMatch&&searchMatch;}).sort((a,b)=>{if(sortOrder==='name'){var _a$template$name,_a$template,_b$template$name,_b$template;return((_a$template$name=(_a$template=a.template)===null||_a$template===void 0?void 0:_a$template.name)!==null&&_a$template$name!==void 0?_a$template$name:'').localeCompare((_b$template$name=(_b$template=b.template)===null||_b$template===void 0?void 0:_b$template.name)!==null&&_b$template$name!==void 0?_b$template$name:'');}return new Date(b.createdAt)-new Date(a.createdAt);});},[instances,filter,search,sortOrder]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mis Plantillas\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando plantillas\\u2026\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mis Plantillas\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[\"Error: \",error]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-container patient-assigns\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mis Plantillas\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem'},children:[/*#__PURE__*/_jsxs(\"select\",{value:filter,onChange:e=>setFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Todas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pendientes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completadas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"postponed\",children:\"Pospuestas\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar...\",value:search,onChange:e=>setSearch(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{value:sortOrder,onChange:e=>setSortOrder(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"recent\",children:\"M\\xE1s recientes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"name\",children:\"Nombre A\\u2192Z\"})]})]})]}),displayed.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",style:{marginTop:'2rem'},children:\"\\uD83E\\uDD14 No hay plantillas que coincidan\"}):/*#__PURE__*/_jsx(\"div\",{className:\"tpl-grid\",children:displayed.map(inst=>{var _tmpl$activities,_tmpl$activities2;const tmpl=inst.template||{};const total=((_tmpl$activities=tmpl.activities)===null||_tmpl$activities===void 0?void 0:_tmpl$activities.length)||0;const done=inst.completedActivities.length;const pct=total?done/total*100:0;return/*#__PURE__*/_jsxs(\"div\",{className:`tpl-card ${inst.status==='completed'?'status-completed':inst.status==='postponed'?'status-postponed':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:tmpl.name}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Asignada el \",new Date(inst.createdAt).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon\",onClick:()=>toggleExpand(inst._id),children:expanded[inst._id]?/*#__PURE__*/_jsx(FaChevronUp,{}):/*#__PURE__*/_jsx(FaChevronDown,{})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"tpl-desc\",children:tmpl.description}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'0.5rem 0'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[done,\"/\",total,\" completadas\"]}),/*#__PURE__*/_jsx(\"progress\",{value:pct,max:\"100\",style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"assign-actions\",children:[inst.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-complete\",onClick:()=>completeAll(inst),children:\"Completar todo\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-postpone\",onClick:()=>postpone(inst._id),children:\"Posponer\"})]}),inst.status==='completed'&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\\uFE0F Completada\"}),inst.status==='postponed'&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u23F3 Pospuesta\"})]}),expanded[inst._id]&&/*#__PURE__*/_jsx(\"div\",{className:\"activities-list\",style:{marginTop:'1rem'},children:(_tmpl$activities2=tmpl.activities)===null||_tmpl$activities2===void 0?void 0:_tmpl$activities2.map((act,idx)=>{const completed=inst.completedActivities.includes(idx);return/*#__PURE__*/_jsxs(\"div\",{className:`activity-line ${completed?'completed':''}`,style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[completed?/*#__PURE__*/_jsx(FaCheckCircle,{}):/*#__PURE__*/_jsx(FaRegCircle,{}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'0.5rem'},children:[act.name,\" (\",act.minutes,\" min, \",act.challenge,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-complete\",onClick:()=>markActivity(inst._id,idx,!completed),children:completed?'Desmarcar':'Marcar'})]},idx);})})]},inst._id);})})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","FaChevronDown","FaChevronUp","FaCheckCircle","FaRegCircle","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PatientTemplatesPage","instances","setInstances","expanded","setExpanded","loading","setLoading","error","setError","filter","setFilter","search","setSearch","sortOrder","setSortOrder","navigate","token","localStorage","getItem","patientId","_payload$user","payload","JSON","parse","atob","split","user","id","sub","e","console","alert","headers","fetch","then","res","status","ok","Error","json","data","Array","isArray","catch","err","message","finally","markActivity","instId","idx","completed","method","body","stringify","list","map","i","_id","completedActivities","j","completeAll","inst","toComplete","template","activities","_","includes","forEach","postpone","toggleExpand","displayed","lowerSearch","toLowerCase","_i$template$name","_i$template","name","statusMatch","searchMatch","sort","a","b","_a$template$name","_a$template","_b$template$name","_b$template","localeCompare","Date","createdAt","className","children","style","color","display","gap","value","onChange","target","type","placeholder","length","marginTop","_tmpl$activities","_tmpl$activities2","tmpl","total","done","pct","justifyContent","toLocaleDateString","onClick","description","margin","max","width","act","marginLeft","minutes","challenge"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientTemplatesPage.js"],"sourcesContent":["// src/pages/PatientTemplatesPage.js\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport {\r\n  FaChevronDown,\r\n  FaChevronUp,\r\n  FaCheckCircle,\r\n  FaRegCircle\r\n} from 'react-icons/fa';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../styles/routineTemplates.css';\r\n\r\nexport default function PatientTemplatesPage() {\r\n  const [instances, setInstances] = useState([]);\r\n  const [expanded, setExpanded] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [filter, setFilter] = useState('all');\r\n  const [search, setSearch] = useState('');\r\n  const [sortOrder, setSortOrder] = useState('recent');\r\n  const navigate = useNavigate();\r\n  const token = localStorage.getItem('token');\r\n\r\n  // Decodificar patientId del JWT\r\n  let patientId = null;\r\n  if (token) {\r\n    try {\r\n      const payload = JSON.parse(atob(token.split('.')[1]));\r\n      patientId = payload.user?.id || payload.id || payload.sub;\r\n    } catch (e) {\r\n      console.error('Error decodificando token:', e);\r\n    }\r\n  }\r\n\r\n  // Fetch de instancias asignadas\r\n  useEffect(() => {\r\n    if (!token || !patientId) {\r\n      alert('Debes iniciar sesi√≥n como paciente.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'x-auth-token': token\r\n    };\r\n    fetch(`/api/routines/instances/${patientId}`, { headers })\r\n      .then(res => {\r\n        if (res.status === 401) {\r\n          alert('Sesi√≥n expirada. Vuelve a iniciar sesi√≥n.');\r\n          navigate('/login');\r\n          return null;\r\n        }\r\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        if (Array.isArray(data)) setInstances(data);\r\n        else throw new Error('Datos inv√°lidos del servidor');\r\n      })\r\n      .catch(err => setError(err.message))\r\n      .finally(() => setLoading(false));\r\n  }, [token, patientId, navigate]);\r\n\r\n  // Marcar/desmarcar actividad\r\n  const markActivity = (instId, idx, completed) => {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'x-auth-token': token\r\n    };\r\n    fetch(`/api/routines/instances/${instId}/activities/${idx}`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify({ completed })\r\n    })\r\n      .then(res => {\r\n        if (!res.ok) throw new Error('No se pudo actualizar');\r\n        // Actualizaci√≥n local optimista\r\n        setInstances(list =>\r\n          list.map(i =>\r\n            i._id !== instId\r\n              ? i\r\n              : {\r\n                  ...i,\r\n                  completedActivities: completed\r\n                    ? [...i.completedActivities, idx]\r\n                    : i.completedActivities.filter(j => j !== idx)\r\n                }\r\n          )\r\n        );\r\n      })\r\n      .catch(console.error);\r\n  };\r\n\r\n  // Completar todas las actividades pendientes\r\n  const completeAll = inst => {\r\n    const toComplete = inst.template.activities\r\n      .map((_, i) => i)\r\n      .filter(i => !inst.completedActivities.includes(i));\r\n    toComplete.forEach(idx => markActivity(inst._id, idx, true));\r\n  };\r\n\r\n  // Posponer (solo UI)\r\n  const postpone = instId => {\r\n    setInstances(list =>\r\n      list.map(i =>\r\n        i._id === instId ? { ...i, status: 'postponed' } : i\r\n      )\r\n    );\r\n  };\r\n\r\n  // Toggle expand/collapse\r\n  const toggleExpand = id =>\r\n    setExpanded(e => ({ ...e, [id]: !e[id] }));\r\n\r\n  // Filtrado, b√∫squeda y ordenaci√≥n con fallback seguro\r\n  const displayed = useMemo(() => {\r\n    const lowerSearch = search.toLowerCase();\r\n    return instances\r\n      .filter(i => {\r\n        const name = (i.template?.name ?? '').toLowerCase();\r\n        const statusMatch = filter === 'all' || i.status === filter;\r\n        const searchMatch = name.includes(lowerSearch);\r\n        return statusMatch && searchMatch;\r\n      })\r\n      .sort((a, b) => {\r\n        if (sortOrder === 'name') {\r\n          return (a.template?.name ?? '').localeCompare(b.template?.name ?? '');\r\n        }\r\n        return new Date(b.createdAt) - new Date(a.createdAt);\r\n      });\r\n  }, [instances, filter, search, sortOrder]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"tpl-container\">\r\n        <h1>Mis Plantillas</h1>\r\n        <p>Cargando plantillas‚Ä¶</p>\r\n      </div>\r\n    );\r\n  }\r\n  if (error) {\r\n    return (\r\n      <div className=\"tpl-container\">\r\n        <h1>Mis Plantillas</h1>\r\n        <p style={{ color: 'red' }}>Error: {error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"tpl-container patient-assigns\">\r\n      <div className=\"tpl-header\">\r\n        <h1>Mis Plantillas</h1>\r\n        <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n          <select value={filter} onChange={e => setFilter(e.target.value)}>\r\n            <option value=\"all\">Todas</option>\r\n            <option value=\"pending\">Pendientes</option>\r\n            <option value=\"completed\">Completadas</option>\r\n            <option value=\"postponed\">Pospuestas</option>\r\n          </select>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Buscar...\"\r\n            value={search}\r\n            onChange={e => setSearch(e.target.value)}\r\n          />\r\n          <select value={sortOrder} onChange={e => setSortOrder(e.target.value)}>\r\n            <option value=\"recent\">M√°s recientes</option>\r\n            <option value=\"name\">Nombre A‚ÜíZ</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {displayed.length === 0 ? (\r\n        <div className=\"empty-state\" style={{ marginTop: '2rem' }}>\r\n          ü§î No hay plantillas que coincidan\r\n        </div>\r\n      ) : (\r\n        <div className=\"tpl-grid\">\r\n          {displayed.map(inst => {\r\n            const tmpl = inst.template || {};\r\n            const total = tmpl.activities?.length || 0;\r\n            const done = inst.completedActivities.length;\r\n            const pct = total ? (done / total) * 100 : 0;\r\n\r\n            return (\r\n              <div\r\n                key={inst._id}\r\n                className={`tpl-card ${\r\n                  inst.status === 'completed'\r\n                    ? 'status-completed'\r\n                    : inst.status === 'postponed'\r\n                    ? 'status-postponed'\r\n                    : ''\r\n                }`}\r\n              >\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                  <div>\r\n                    <h2>{tmpl.name}</h2>\r\n                    <small>\r\n                      Asignada el {new Date(inst.createdAt).toLocaleDateString()}\r\n                    </small>\r\n                  </div>\r\n                  <button className=\"btn-icon\" onClick={() => toggleExpand(inst._id)}>\r\n                    {expanded[inst._id] ? <FaChevronUp /> : <FaChevronDown />}\r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"tpl-desc\">{tmpl.description}</p>\r\n\r\n                <div style={{ margin: '0.5rem 0' }}>\r\n                  <label>\r\n                    {done}/{total} completadas\r\n                  </label>\r\n                  <progress value={pct} max=\"100\" style={{ width: '100%' }} />\r\n                </div>\r\n\r\n                <div className=\"assign-actions\">\r\n                  {inst.status === 'pending' && (\r\n                    <>\r\n                      <button\r\n                        className=\"btn-complete\"\r\n                        onClick={() => completeAll(inst)}\r\n                      >\r\n                        Completar todo\r\n                      </button>\r\n                      <button\r\n                        className=\"btn-postpone\"\r\n                        onClick={() => postpone(inst._id)}\r\n                      >\r\n                        Posponer\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                  {inst.status === 'completed' && <span>‚úîÔ∏è Completada</span>}\r\n                  {inst.status === 'postponed' && <span>‚è≥ Pospuesta</span>}\r\n                </div>\r\n\r\n                {expanded[inst._id] && (\r\n                  <div className=\"activities-list\" style={{ marginTop: '1rem' }}>\r\n                    {tmpl.activities?.map((act, idx) => {\r\n                      const completed = inst.completedActivities.includes(idx);\r\n                      return (\r\n                        <div\r\n                          key={idx}\r\n                          className={`activity-line ${completed ? 'completed' : ''}`}\r\n                          style={{ display: 'flex', justifyContent: 'space-between' }}\r\n                        >\r\n                          <div>\r\n                            {completed ? <FaCheckCircle /> : <FaRegCircle />}\r\n                            <span style={{ marginLeft: '0.5rem' }}>\r\n                              {act.name} ({act.minutes} min, {act.challenge})\r\n                            </span>\r\n                          </div>\r\n                          <button\r\n                            className=\"btn-complete\"\r\n                            onClick={() => markActivity(inst._id, idx, !completed)}\r\n                          >\r\n                            {completed ? 'Desmarcar' : 'Marcar'}\r\n                          </button>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}