{"ast":null,"code":"// src/components/AssignTemplate.js\nimport React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import'../styles/routineTemplates.css';import'../styles/patientsList.css';// tabla de pacientes\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AssignTemplate(){const{templateId}=useParams();const navigate=useNavigate();const[patients,setPatients]=useState([]);const[msg,setMsg]=useState('');useEffect(()=>{(async()=>{const token=localStorage.getItem('token');const{data}=await axios.get('/api/therapist/patients',{headers:{'x-auth-token':token}});setPatients(data);})();},[]);const assign=async patientId=>{const token=localStorage.getItem('token');await axios.post('/api/routines/instances',{templateId,patientId},{headers:{'x-auth-token':token}});setMsg('Plantilla asignada correctamente.');setTimeout(()=>navigate('/therapist/templates'),1500);};return/*#__PURE__*/_jsxs(\"div\",{className:\"therapist-patient-list\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Asignar Plantilla\"}),msg&&/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:msg}),/*#__PURE__*/_jsxs(\"table\",{className:\"patient-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nombre Completo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"action-col\",children:\"Asignar\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:patients.map(p=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[p.nombre,\" \",p.apellidos]}),/*#__PURE__*/_jsx(\"td\",{children:p.email}),/*#__PURE__*/_jsx(\"td\",{className:\"action-col\",children:/*#__PURE__*/_jsx(\"button\",{className:\"detail-btn\",onClick:()=>assign(p._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-paper-plane\"})})})]},p._id))})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","AssignTemplate","templateId","navigate","patients","setPatients","msg","setMsg","token","localStorage","getItem","data","get","headers","assign","patientId","post","setTimeout","className","children","map","p","nombre","apellidos","email","onClick","_id"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/AssignTemplate.js"],"sourcesContent":["// src/components/AssignTemplate.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate }       from 'react-router-dom';\r\nimport axios                             from 'axios';\r\nimport '../styles/routineTemplates.css';\r\nimport '../styles/patientsList.css';      // tabla de pacientes\r\n\r\nexport default function AssignTemplate() {\r\n  const { templateId } = useParams();\r\n  const navigate       = useNavigate();\r\n  const [patients, setPatients] = useState([]);\r\n  const [msg, setMsg]          = useState('');\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const token = localStorage.getItem('token');\r\n      const { data } = await axios.get('/api/therapist/patients', {\r\n        headers: { 'x-auth-token': token }\r\n      });\r\n      setPatients(data);\r\n    })();\r\n  }, []);\r\n\r\n  const assign = async patientId => {\r\n    const token = localStorage.getItem('token');\r\n    await axios.post('/api/routines/instances',\r\n      { templateId, patientId },\r\n      { headers:{ 'x-auth-token':token } }\r\n    );\r\n    setMsg('Plantilla asignada correctamente.');\r\n    setTimeout(()=> navigate('/therapist/templates'), 1500);\r\n  };\r\n\r\n  return (\r\n    <div className=\"therapist-patient-list\">\r\n      <h1>Asignar Plantilla</h1>\r\n      {msg && <p className=\"success\">{msg}</p>}\r\n      <table className=\"patient-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Nombre Completo</th>\r\n            <th>Email</th>\r\n            <th className=\"action-col\">Asignar</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {patients.map(p=>(\r\n            <tr key={p._id}>\r\n              <td>{p.nombre} {p.apellidos}</td>\r\n              <td>{p.email}</td>\r\n              <td className=\"action-col\">\r\n                <button className=\"detail-btn\" onClick={()=>assign(p._id)}>\r\n                  <i className=\"fa fa-paper-plane\"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}