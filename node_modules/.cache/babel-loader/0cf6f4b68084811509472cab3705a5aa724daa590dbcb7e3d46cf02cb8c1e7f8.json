{"ast":null,"code":"// src/pages/PatientTemplatesPage.js\nimport React,{useState,useEffect}from'react';import assignedRoutineService from'../services/assignedRoutineService';import'../styles/routineTemplates.css';import'../styles/patientTemplates.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PatientTemplatesPage(){const[templates,setTemplates]=useState([]);const[loading,setLoading]=useState(true);const[expandedIds,setExpanded]=useState([]);const[search,setSearch]=useState('');const[filterStatus,setFilter]=useState('all');const[sortKey,setSort]=useState('dueDate');// ─── Helper para decodificar el JWT sin dependencias ───────\nfunction decodeJWT(token){try{const base64Url=token.split('.')[1];const base64=base64Url.replace(/-/g,'+').replace(/_/g,'/');const jsonPayload=decodeURIComponent(atob(base64).split('').map(c=>'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2)).join(''));return JSON.parse(jsonPayload);}catch{return null;}}// ─── Extraer patientId del token almacenado ────────────────\nlet patientId='';const rawToken=localStorage.getItem('token');if(rawToken){var _payload$user;const payload=decodeJWT(rawToken);// Ajusta la clave según tu payload real:\npatientId=(payload===null||payload===void 0?void 0:payload.id)||(payload===null||payload===void 0?void 0:(_payload$user=payload.user)===null||_payload$user===void 0?void 0:_payload$user.id)||'';}// ─── Carga de plantillas asignadas ────────────────────────\nuseEffect(()=>{if(!patientId){console.error('No se ha encontrado patientId en el token');setLoading(false);return;}assignedRoutineService.getAssignedTemplates(patientId).then(_ref=>{let{data}=_ref;const arr=data.map(inst=>({id:inst._id,title:inst.template.name||inst.template.title,description:inst.template.description,dueDate:inst.template.dueDate||inst.assignedAt,activities:inst.template.activities.map((act,idx)=>({id:idx,name:act.name,details:act.desc||act.details||'',estimatedTime:act.minutes||act.estimatedTime||'',completed:inst.completedActivities.includes(idx)})),progress:inst.template.activities.length===0?0:Math.round(inst.completedActivities.length/inst.template.activities.length*100),status:inst.completedActivities.length===inst.template.activities.length?'completed':inst.completedActivities.length>0?'in-progress':'pending'}));setTemplates(arr);}).catch(err=>console.error('Error al cargar plantillas:',err)).finally(()=>setLoading(false));},[patientId]);// ─── Funciones de UI ──────────────────────────────────────\nconst toggleExpand=id=>setExpanded(ids=>ids.includes(id)?ids.filter(x=>x!==id):[...ids,id]);const handleActivityToggle=(tplId,actId)=>{const inst=templates.find(t=>t.id===tplId);const currently=inst.activities.find(a=>a.id===actId).completed;assignedRoutineService.toggleActivity(tplId,actId,!currently).then(()=>{setTemplates(ts=>ts.map(t=>{if(t.id!==tplId)return t;const completedCount=t.activities.filter(a=>a.completed).length+(currently?-1:1);return{...t,activities:t.activities.map(a=>a.id===actId?{...a,completed:!currently}:a),progress:Math.round(completedCount/t.activities.length*100)};}));}).catch(err=>console.error('Error marcando actividad:',err));};// ─── Render ───────────────────────────────────────────────\nif(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"pt-loading\",children:\"Cargando plantillas\\u2026\"});if(!patientId)return/*#__PURE__*/_jsx(\"div\",{className:\"pt-loading\",children:\"Debes iniciar sesi\\xF3n para ver tus plantillas.\"});const visible=templates.filter(t=>filterStatus==='all'||t.status===filterStatus).filter(t=>t.title.toLowerCase().includes(search.toLowerCase())).sort((a,b)=>{if(sortKey==='dueDate')return new Date(a.dueDate)-new Date(b.dueDate);if(sortKey==='progress')return a.progress-b.progress;return 0;});return/*#__PURE__*/_jsxs(\"div\",{className:\"pt-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"pt-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mis Plantillas Asignadas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-controls\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar plantilla\\u2026\",value:search,onChange:e=>setSearch(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Todas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pendientes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in-progress\",children:\"En progreso\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completadas\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:sortKey,onChange:e=>setSort(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"dueDate\",children:\"Por fecha\"}),/*#__PURE__*/_jsx(\"option\",{value:\"progress\",children:\"Por progreso\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-grid\",children:visible.map(t=>/*#__PURE__*/_jsxs(\"div\",{className:\"pt-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pt-card-header\",onClick:()=>toggleExpand(t.id),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:t.title}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Vence: \",new Date(t.dueDate).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-progress-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pt-progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pt-progress-filled\",style:{width:`${t.progress}%`}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"pt-progress-label\",children:[t.progress,\"%\"]})]})]}),expandedIds.includes(t.id)&&/*#__PURE__*/_jsxs(\"div\",{className:\"pt-card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"pt-description\",children:t.description}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-activities\",children:t.activities.map(act=>/*#__PURE__*/_jsx(\"div\",{className:`pt-activity-item ${act.completed?'done':''}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"pt-act-main\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:act.completed,onChange:()=>handleActivityToggle(t.id,act.id)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:act.name}),/*#__PURE__*/_jsx(\"p\",{children:act.details}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Tiempo estimado: \",act.estimatedTime,\" min\"]})]})]})},act.id))})]})]},t.id))})]});}","map":{"version":3,"names":["React","useState","useEffect","assignedRoutineService","jsx","_jsx","jsxs","_jsxs","PatientTemplatesPage","templates","setTemplates","loading","setLoading","expandedIds","setExpanded","search","setSearch","filterStatus","setFilter","sortKey","setSort","decodeJWT","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","patientId","rawToken","localStorage","getItem","_payload$user","payload","id","user","console","error","getAssignedTemplates","then","_ref","data","arr","inst","_id","title","template","name","description","dueDate","assignedAt","activities","act","idx","details","desc","estimatedTime","minutes","completed","completedActivities","includes","progress","length","Math","round","status","catch","err","finally","toggleExpand","ids","filter","x","handleActivityToggle","tplId","actId","find","t","currently","a","toggleActivity","ts","completedCount","className","children","visible","toLowerCase","sort","b","Date","type","placeholder","value","onChange","e","target","onClick","toLocaleDateString","style","width","checked"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientTemplatesPage.js"],"sourcesContent":["// src/pages/PatientTemplatesPage.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport assignedRoutineService from '../services/assignedRoutineService';\r\nimport '../styles/routineTemplates.css';\r\nimport '../styles/patientTemplates.css';\r\n\r\nexport default function PatientTemplatesPage() {\r\n  const [templates, setTemplates]  = useState([]);\r\n  const [loading, setLoading]      = useState(true);\r\n  const [expandedIds, setExpanded] = useState([]);\r\n  const [search, setSearch]        = useState('');\r\n  const [filterStatus, setFilter]  = useState('all');\r\n  const [sortKey, setSort]         = useState('dueDate');\r\n\r\n  // ─── Helper para decodificar el JWT sin dependencias ───────\r\n  function decodeJWT(token) {\r\n    try {\r\n      const base64Url = token.split('.')[1];\r\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n      const jsonPayload = decodeURIComponent(\r\n        atob(base64)\r\n          .split('')\r\n          .map(c =>\r\n            '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\r\n          )\r\n          .join('')\r\n      );\r\n      return JSON.parse(jsonPayload);\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // ─── Extraer patientId del token almacenado ────────────────\r\n  let patientId = '';\r\n  const rawToken = localStorage.getItem('token');\r\n  if (rawToken) {\r\n    const payload = decodeJWT(rawToken);\r\n    // Ajusta la clave según tu payload real:\r\n    patientId = payload?.id || payload?.user?.id || '';\r\n  }\r\n\r\n  // ─── Carga de plantillas asignadas ────────────────────────\r\n  useEffect(() => {\r\n    if (!patientId) {\r\n      console.error('No se ha encontrado patientId en el token');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    assignedRoutineService\r\n      .getAssignedTemplates(patientId)\r\n      .then(({ data }) => {\r\n        const arr = data.map(inst => ({\r\n          id: inst._id,\r\n          title: inst.template.name || inst.template.title,\r\n          description: inst.template.description,\r\n          dueDate: inst.template.dueDate || inst.assignedAt,\r\n          activities: inst.template.activities.map((act, idx) => ({\r\n            id: idx,\r\n            name: act.name,\r\n            details: act.desc || act.details || '',\r\n            estimatedTime: act.minutes || act.estimatedTime || '',\r\n            completed: inst.completedActivities.includes(idx)\r\n          })),\r\n          progress:\r\n            inst.template.activities.length === 0\r\n              ? 0\r\n              : Math.round(\r\n                  inst.completedActivities.length /\r\n                    inst.template.activities.length *\r\n                  100\r\n                ),\r\n          status:\r\n            inst.completedActivities.length === inst.template.activities.length\r\n              ? 'completed'\r\n              : inst.completedActivities.length > 0\r\n              ? 'in-progress'\r\n              : 'pending'\r\n        }));\r\n        setTemplates(arr);\r\n      })\r\n      .catch(err => console.error('Error al cargar plantillas:', err))\r\n      .finally(() => setLoading(false));\r\n  }, [patientId]);\r\n\r\n  // ─── Funciones de UI ──────────────────────────────────────\r\n  const toggleExpand = id =>\r\n    setExpanded(ids =>\r\n      ids.includes(id) ? ids.filter(x => x !== id) : [...ids, id]\r\n    );\r\n\r\n  const handleActivityToggle = (tplId, actId) => {\r\n    const inst = templates.find(t => t.id === tplId);\r\n    const currently = inst.activities.find(a => a.id === actId).completed;\r\n\r\n    assignedRoutineService\r\n      .toggleActivity(tplId, actId, !currently)\r\n      .then(() => {\r\n        setTemplates(ts =>\r\n          ts.map(t => {\r\n            if (t.id !== tplId) return t;\r\n            const completedCount =\r\n              t.activities.filter(a => a.completed).length +\r\n              (currently ? -1 : 1);\r\n            return {\r\n              ...t,\r\n              activities: t.activities.map(a =>\r\n                a.id === actId ? { ...a, completed: !currently } : a\r\n              ),\r\n              progress: Math.round(\r\n                (completedCount / t.activities.length) * 100\r\n              )\r\n            };\r\n          })\r\n        );\r\n      })\r\n      .catch(err => console.error('Error marcando actividad:', err));\r\n  };\r\n\r\n  // ─── Render ───────────────────────────────────────────────\r\n  if (loading)\r\n    return <div className=\"pt-loading\">Cargando plantillas…</div>;\r\n  if (!patientId)\r\n    return (\r\n      <div className=\"pt-loading\">\r\n        Debes iniciar sesión para ver tus plantillas.\r\n      </div>\r\n    );\r\n\r\n  const visible = templates\r\n    .filter(t => filterStatus === 'all' || t.status === filterStatus)\r\n    .filter(t => t.title.toLowerCase().includes(search.toLowerCase()))\r\n    .sort((a, b) => {\r\n      if (sortKey === 'dueDate')\r\n        return new Date(a.dueDate) - new Date(b.dueDate);\r\n      if (sortKey === 'progress') return a.progress - b.progress;\r\n      return 0;\r\n    });\r\n\r\n  return (\r\n    <div className=\"pt-container\">\r\n      <header className=\"pt-header\">\r\n        <h1>Mis Plantillas Asignadas</h1>\r\n        <div className=\"pt-controls\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Buscar plantilla…\"\r\n            value={search}\r\n            onChange={e => setSearch(e.target.value)}\r\n          />\r\n          <select\r\n            value={filterStatus}\r\n            onChange={e => setFilter(e.target.value)}\r\n          >\r\n            <option value=\"all\">Todas</option>\r\n            <option value=\"pending\">Pendientes</option>\r\n            <option value=\"in-progress\">En progreso</option>\r\n            <option value=\"completed\">Completadas</option>\r\n          </select>\r\n          <select\r\n            value={sortKey}\r\n            onChange={e => setSort(e.target.value)}\r\n          >\r\n            <option value=\"dueDate\">Por fecha</option>\r\n            <option value=\"progress\">Por progreso</option>\r\n          </select>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"pt-grid\">\r\n        {visible.map(t => (\r\n          <div key={t.id} className=\"pt-card\">\r\n            <div\r\n              className=\"pt-card-header\"\r\n              onClick={() => toggleExpand(t.id)}\r\n            >\r\n              <div>\r\n                <h2>{t.title}</h2>\r\n                <small>\r\n                  Vence: {new Date(t.dueDate).toLocaleDateString()}\r\n                </small>\r\n              </div>\r\n              <div className=\"pt-progress-wrapper\">\r\n                <div className=\"pt-progress-bar\">\r\n                  <div\r\n                    className=\"pt-progress-filled\"\r\n                    style={{ width: `${t.progress}%` }}\r\n                  />\r\n                </div>\r\n                <span className=\"pt-progress-label\">\r\n                  {t.progress}%\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {expandedIds.includes(t.id) && (\r\n              <div className=\"pt-card-body\">\r\n                <p className=\"pt-description\">{t.description}</p>\r\n                <div className=\"pt-activities\">\r\n                  {t.activities.map(act => (\r\n                    <div\r\n                      key={act.id}\r\n                      className={`pt-activity-item ${\r\n                        act.completed ? 'done' : ''\r\n                      }`}\r\n                    >\r\n                      <div className=\"pt-act-main\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={act.completed}\r\n                          onChange={() =>\r\n                            handleActivityToggle(t.id, act.id)\r\n                          }\r\n                        />\r\n                        <div>\r\n                          <h3>{act.name}</h3>\r\n                          <p>{act.details}</p>\r\n                          <small>\r\n                            Tiempo estimado: {act.estimatedTime} min\r\n                          </small>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}