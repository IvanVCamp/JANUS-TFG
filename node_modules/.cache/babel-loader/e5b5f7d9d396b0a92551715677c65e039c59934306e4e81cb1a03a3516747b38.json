{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\TFG\\\\prototipo-TFG\\\\Janus-TFG\\\\src\\\\components\\\\Messaging.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport chatService from '../services/chatService';\nimport '../styles/messaging.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Messaging() {\n  _s();\n  const navigate = useNavigate();\n\n  // Estado local\n  const [chats, setChats] = useState([]);\n  const [selectedChatId, setSelectedChatId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]); // Para el dropdown\n  const [showDropdown, setShowDropdown] = useState(false); // Controlar visibilidad del dropdown\n  const [newMessage, setNewMessage] = useState('');\n  const [file, setFile] = useState(null);\n\n  // Cargar la lista de chats al montar\n  useEffect(() => {\n    async function fetchChats() {\n      try {\n        const data = await chatService.getChats();\n        setChats(data);\n      } catch (err) {\n        console.error('Error obteniendo chats:', err);\n      }\n    }\n    fetchChats();\n  }, []);\n\n  // Cargar mensajes cuando se seleccione un chat\n  useEffect(() => {\n    if (selectedChatId) {\n      async function fetchMessages() {\n        try {\n          const data = await chatService.getMessages(selectedChatId);\n          setMessages(data);\n        } catch (err) {\n          console.error('Error obteniendo mensajes:', err);\n        }\n      }\n      fetchMessages();\n    } else {\n      setMessages([]);\n    }\n  }, [selectedChatId]);\n\n  // Manejo de selección de chat\n  const handleSelectChat = chatId => {\n    setSelectedChatId(chatId);\n  };\n\n  // Manejo de búsqueda (autocompletado)\n  const handleSearchChange = async e => {\n    const query = e.target.value;\n    setSearchQuery(query);\n\n    // Si hay algo que buscar, llamamos a searchUsers\n    if (query.trim().length > 0) {\n      setShowDropdown(true);\n      try {\n        // Asegúrate de pasar el token si tu backend lo requiere\n        const usersFound = await chatService.searchUsers(query.trim());\n        setSearchResults(usersFound);\n      } catch (err) {\n        console.error('Error buscando usuarios:', err);\n      }\n    } else {\n      // Si se limpia el campo, ocultamos el dropdown\n      setShowDropdown(false);\n      setSearchResults([]);\n    }\n  };\n\n  // Manejo de selección de usuario en el dropdown\n  const handleSelectUser = async user => {\n    try {\n      // user._id o user.id, según lo que retorne el backend\n      const newChat = await chatService.startChat(user._id);\n\n      // Actualizar la lista de chats\n      setChats(prev => [...prev, newChat]);\n      setSelectedChatId(newChat.id); // O newChat._id, según retorne\n      // Limpiamos búsqueda\n      setSearchQuery('');\n      setSearchResults([]);\n      setShowDropdown(false);\n    } catch (err) {\n      console.error('Error iniciando chat:', err);\n    }\n  };\n\n  // Manejo de archivo adjunto\n  const handleFileChange = e => {\n    if (e.target.files && e.target.files.length > 0) {\n      setFile(e.target.files[0]);\n    }\n  };\n\n  // Enviar mensaje en el chat seleccionado\n  const handleSendMessage = async () => {\n    if (!selectedChatId || !newMessage.trim()) return;\n    try {\n      const formData = new FormData();\n      formData.append('text', newMessage);\n      if (file) {\n        formData.append('file', file);\n      }\n      const msgCreated = await chatService.sendMessage(selectedChatId, formData);\n      setMessages(prev => [...prev, msgCreated]);\n      // Limpiar campos\n      setNewMessage('');\n      setFile(null);\n    } catch (err) {\n      console.error('Error enviando mensaje:', err);\n    }\n  };\n\n  // Cerrar sesión\n  const handleLogout = () => {\n    // Limpieza de tokens, etc.\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"messaging-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"top-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-section\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-user-circle user-icon\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"center-section\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title\",\n          children: \"JANUS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-section\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"logout-btn\",\n          onClick: handleLogout,\n          children: \"Cerrar Sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"messaging-main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-list-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar\",\n          style: {\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"To: Enviar a...\",\n            value: searchQuery,\n            onChange: handleSearchChange,\n            onFocus: () => setShowDropdown(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), showDropdown && searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"search-dropdown\",\n            children: searchResults.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => handleSelectUser(user),\n              children: [user.nombre, \" \", user.apellidos, \" (\", user.email, \")\"]\n            }, user._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), chats.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-chats\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Comienza a conversar ahora con tus especialistas! \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDE0A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 68\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"chat-list\",\n          children: chats.map(chat => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: `chat-item ${chat.id === selectedChatId ? 'selected' : ''}`,\n            onClick: () => handleSelectChat(chat.id),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-avatar\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-user-circle\",\n                \"aria-hidden\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-info\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"chat-name\",\n                children: [chat.otherUserName, \" (\", chat.otherUserRole, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 19\n            }, this)]\n          }, chat.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-detail\",\n        children: selectedChatId ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"messages-area\",\n            children: messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `message-item ${msg.senderId === 'CURRENT_USER_ID' ? 'message-outgoing' : 'message-incoming'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message-sender\",\n                children: [msg.senderName, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message-text\",\n                children: msg.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 21\n              }, this), msg.fileUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-file\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: msg.fileUrl,\n                  download: true,\n                  children: msg.fileName || 'Descargar archivo'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 23\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"new-message-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"fileInput\",\n              className: \"attach-btn\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-paperclip\",\n                \"aria-hidden\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"fileInput\",\n              style: {\n                display: 'none'\n              },\n              onChange: handleFileChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"message-input\",\n              placeholder: \"Escribe algo...\",\n              value: newMessage,\n              onChange: e => setNewMessage(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"send-btn\",\n              onClick: handleSendMessage,\n              children: \"Enviar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-chat-selected\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Selecciona un chat para ver los mensajes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer-bar\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"2025 \\xA9 Iv\\xE1n Vela Campos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n}\n_s(Messaging, \"zsT/7x7v4iSRsrCWO/MpkoPYqUc=\", false, function () {\n  return [useNavigate];\n});\n_c = Messaging;\nexport default Messaging;\nvar _c;\n$RefreshReg$(_c, \"Messaging\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","chatService","jsxDEV","_jsxDEV","Fragment","_Fragment","Messaging","_s","navigate","chats","setChats","selectedChatId","setSelectedChatId","messages","setMessages","searchQuery","setSearchQuery","searchResults","setSearchResults","showDropdown","setShowDropdown","newMessage","setNewMessage","file","setFile","fetchChats","data","getChats","err","console","error","fetchMessages","getMessages","handleSelectChat","chatId","handleSearchChange","e","query","target","value","trim","length","usersFound","searchUsers","handleSelectUser","user","newChat","startChat","_id","prev","id","handleFileChange","files","handleSendMessage","formData","FormData","append","msgCreated","sendMessage","handleLogout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","position","type","placeholder","onChange","onFocus","map","nombre","apellidos","email","chat","otherUserName","otherUserRole","msg","idx","senderId","senderName","text","fileUrl","href","download","htmlFor","display","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/Messaging.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport chatService from '../services/chatService';\r\nimport '../styles/messaging.css';\r\n\r\nfunction Messaging() {\r\n  const navigate = useNavigate();\r\n\r\n  // Estado local\r\n  const [chats, setChats] = useState([]);\r\n  const [selectedChatId, setSelectedChatId] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]); // Para el dropdown\r\n  const [showDropdown, setShowDropdown] = useState(false); // Controlar visibilidad del dropdown\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [file, setFile] = useState(null);\r\n\r\n  // Cargar la lista de chats al montar\r\n  useEffect(() => {\r\n    async function fetchChats() {\r\n      try {\r\n        const data = await chatService.getChats();\r\n        setChats(data);\r\n      } catch (err) {\r\n        console.error('Error obteniendo chats:', err);\r\n      }\r\n    }\r\n    fetchChats();\r\n  }, []);\r\n\r\n  // Cargar mensajes cuando se seleccione un chat\r\n  useEffect(() => {\r\n    if (selectedChatId) {\r\n      async function fetchMessages() {\r\n        try {\r\n          const data = await chatService.getMessages(selectedChatId);\r\n          setMessages(data);\r\n        } catch (err) {\r\n          console.error('Error obteniendo mensajes:', err);\r\n        }\r\n      }\r\n      fetchMessages();\r\n    } else {\r\n      setMessages([]);\r\n    }\r\n  }, [selectedChatId]);\r\n\r\n  // Manejo de selección de chat\r\n  const handleSelectChat = (chatId) => {\r\n    setSelectedChatId(chatId);\r\n  };\r\n\r\n  // Manejo de búsqueda (autocompletado)\r\n  const handleSearchChange = async (e) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n\r\n    // Si hay algo que buscar, llamamos a searchUsers\r\n    if (query.trim().length > 0) {\r\n      setShowDropdown(true);\r\n      try {\r\n        // Asegúrate de pasar el token si tu backend lo requiere\r\n        const usersFound = await chatService.searchUsers(query.trim());\r\n        setSearchResults(usersFound);\r\n      } catch (err) {\r\n        console.error('Error buscando usuarios:', err);\r\n      }\r\n    } else {\r\n      // Si se limpia el campo, ocultamos el dropdown\r\n      setShowDropdown(false);\r\n      setSearchResults([]);\r\n    }\r\n  };\r\n\r\n  // Manejo de selección de usuario en el dropdown\r\n  const handleSelectUser = async (user) => {\r\n    try {\r\n      // user._id o user.id, según lo que retorne el backend\r\n      const newChat = await chatService.startChat(user._id);\r\n\r\n      // Actualizar la lista de chats\r\n      setChats((prev) => [...prev, newChat]);\r\n      setSelectedChatId(newChat.id); // O newChat._id, según retorne\r\n      // Limpiamos búsqueda\r\n      setSearchQuery('');\r\n      setSearchResults([]);\r\n      setShowDropdown(false);\r\n    } catch (err) {\r\n      console.error('Error iniciando chat:', err);\r\n    }\r\n  };\r\n\r\n  // Manejo de archivo adjunto\r\n  const handleFileChange = (e) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      setFile(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  // Enviar mensaje en el chat seleccionado\r\n  const handleSendMessage = async () => {\r\n    if (!selectedChatId || !newMessage.trim()) return;\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('text', newMessage);\r\n      if (file) {\r\n        formData.append('file', file);\r\n      }\r\n      const msgCreated = await chatService.sendMessage(selectedChatId, formData);\r\n      setMessages((prev) => [...prev, msgCreated]);\r\n      // Limpiar campos\r\n      setNewMessage('');\r\n      setFile(null);\r\n    } catch (err) {\r\n      console.error('Error enviando mensaje:', err);\r\n    }\r\n  };\r\n\r\n  // Cerrar sesión\r\n  const handleLogout = () => {\r\n    // Limpieza de tokens, etc.\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"messaging-container\">\r\n      {/* Cabecera en morado */}\r\n      <header className=\"top-bar\">\r\n        <div className=\"left-section\">\r\n          <i className=\"fa fa-user-circle user-icon\" aria-hidden=\"true\"></i>\r\n        </div>\r\n        <div className=\"center-section\">\r\n          <h1 className=\"title\">JANUS</h1>\r\n        </div>\r\n        <div className=\"right-section\">\r\n          <button className=\"logout-btn\" onClick={handleLogout}>\r\n            Cerrar Sesión\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"messaging-main\">\r\n        {/* Columna izquierda: Lista de chats + Búsqueda */}\r\n        <div className=\"chat-list-container\">\r\n          {/* Barra de búsqueda */}\r\n          <div className=\"search-bar\" style={{ position: 'relative' }}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"To: Enviar a...\"\r\n              value={searchQuery}\r\n              onChange={handleSearchChange}\r\n              onFocus={() => setShowDropdown(true)}\r\n            />\r\n            {/* Desplegable con resultados */}\r\n            {showDropdown && searchResults.length > 0 && (\r\n              <ul className=\"search-dropdown\">\r\n                {searchResults.map((user) => (\r\n                  <li\r\n                    key={user._id}\r\n                    onClick={() => handleSelectUser(user)}\r\n                  >\r\n                    {user.nombre} {user.apellidos} ({user.email})\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n\r\n          {chats.length === 0 ? (\r\n            <div className=\"no-chats\">\r\n              <p>Comienza a conversar ahora con tus especialistas! <span>😊</span></p>\r\n            </div>\r\n          ) : (\r\n            <ul className=\"chat-list\">\r\n              {chats.map((chat) => (\r\n                <li\r\n                  key={chat.id}\r\n                  className={`chat-item ${chat.id === selectedChatId ? 'selected' : ''}`}\r\n                  onClick={() => handleSelectChat(chat.id)}\r\n                >\r\n                  <div className=\"chat-avatar\">\r\n                    <i className=\"fa fa-user-circle\" aria-hidden=\"true\"></i>\r\n                  </div>\r\n                  <div className=\"chat-info\">\r\n                    <p className=\"chat-name\">\r\n                      {chat.otherUserName} ({chat.otherUserRole})\r\n                    </p>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n\r\n        {/* Columna derecha: Detalle del chat */}\r\n        <div className=\"chat-detail\">\r\n          {selectedChatId ? (\r\n            <>\r\n              <div className=\"messages-area\">\r\n                {messages.map((msg, idx) => (\r\n                  <div\r\n                    key={idx}\r\n                    className={`message-item ${\r\n                      msg.senderId === 'CURRENT_USER_ID'\r\n                        ? 'message-outgoing'\r\n                        : 'message-incoming'\r\n                    }`}\r\n                  >\r\n                    <p className=\"message-sender\">{msg.senderName}:</p>\r\n                    <p className=\"message-text\">{msg.text}</p>\r\n                    {msg.fileUrl && (\r\n                      <div className=\"message-file\">\r\n                        <a href={msg.fileUrl} download>\r\n                          {msg.fileName || 'Descargar archivo'}\r\n                        </a>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"new-message-area\">\r\n                <label htmlFor=\"fileInput\" className=\"attach-btn\">\r\n                  <i className=\"fa fa-paperclip\" aria-hidden=\"true\"></i>\r\n                </label>\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"fileInput\"\r\n                  style={{ display: 'none' }}\r\n                  onChange={handleFileChange}\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"message-input\"\r\n                  placeholder=\"Escribe algo...\"\r\n                  value={newMessage}\r\n                  onChange={(e) => setNewMessage(e.target.value)}\r\n                />\r\n                <button className=\"send-btn\" onClick={handleSendMessage}>Enviar</button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"no-chat-selected\">\r\n              <p>Selecciona un chat para ver los mensajes</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      <footer className=\"footer-bar\">\r\n        <p>2025 © Iván Vela Campos</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Messaging;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}