{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import axios from'axios';import{PieChart,Pie,Cell,Tooltip,Legend,BarChart,Bar,XAxis,YAxis,CartesianGrid,RadarChart,PolarGrid,PolarAngleAxis,PolarRadiusAxis,Radar,LineChart,Line,RadialBarChart,RadialBar,ResponsiveContainer}from'recharts';import'../styles/therapistRoutines.css';// Mapeo de activityId → Categoría\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const categoryMap={futbol:'Ocio',dibujos:'Ocio',comics:'Ocio',tarea:'Obligaciones',videojuegos:'Ocio',helado:'Ocio',parque:'Ocio',banio:'Autocuidado',dormir:'Autocuidado',musica:'Ocio',bailar:'Ocio',amigos:'Ocio',bicicleta:'Ocio',dibujar:'Ocio',mascotas:'Ocio',experimentos:'Obligaciones',cantar:'Ocio',lego:'Ocio',nadar:'Autocuidado',computadora:'Ocio'};// Mapeo categoría → Grupo para balance\nconst groupMap={Autocuidado:'Autocuidado',Obligaciones:'Obligaciones',Ocio:'Ocio'};const COLORS=['#8884d8','#82ca9d','#ffc658','#ff8042','#0088FE'];function PatientRoutines(){const{patientId}=useParams();const[results,setResults]=useState([]);const[filtered,setFiltered]=useState([]);const[from,setFrom]=useState('');const[to,setTo]=useState('');const[selected,setSelected]=useState(null);const[metrics,setMetrics]=useState(null);// 1. Fetch de todos los resultados\nuseEffect(()=>{const token=localStorage.getItem('token');axios.get(`http://localhost:8080/api/game?patientId=${patientId}`,{headers:{'x-auth-token':token}}).then(resp=>{const data=resp.data;setResults(data);// filtro inicial últimos 7 días\nconst now=new Date(),weekAgo=new Date(now);weekAgo.setDate(now.getDate()-6);setFrom(weekAgo.toISOString().slice(0,10));setTo(now.toISOString().slice(0,10));}).catch(console.error);},[patientId]);// 2. Aplicar filtro de fechas\nuseEffect(()=>{if(!from||!to)return;const fDate=new Date(from),tDate=new Date(to);tDate.setHours(23,59,59,999);setFiltered(results.filter(r=>{const d=new Date(r.createdAt);return d>=fDate&&d<=tDate;}));},[results,from,to]);// 3. Seleccionar primer resultado\nuseEffect(()=>{if(filtered.length)setSelected(filtered[0].createdAt);else setSelected(null);},[filtered]);// 4. Calcular métricas cuando cambie `selected`\nuseEffect(()=>{if(!selected){setMetrics(null);return;}const res=filtered.find(r=>r.createdAt===selected);if(!res){setMetrics(null);return;}setMetrics(computeMetrics(res,filtered));},[selected,filtered]);// ---------------------------------------------------\n// computeMetrics: extrae TODAS las métricas\n// ---------------------------------------------------\nfunction computeMetrics(result,allResults){const slots=result.timeSlots||[];const activities=slots.flatMap(slot=>(slot.activities||[]).map(act=>({...act,slot:slot.slot})));const totalMin=activities.reduce((sum,a)=>sum+a.duration,0);// 1. Distribución % por categoría\nconst catSum={};activities.forEach(a=>{const c=categoryMap[a.activityId]||'Otros';catSum[c]=(catSum[c]||0)+a.duration;});const distribution=Object.entries(catSum).map(_ref=>{let[name,val]=_ref;return{name,value:+(val/totalMin*100).toFixed(1)};});// 2. Horas absolutas por categoría\nconst hours=Object.entries(catSum).map(_ref2=>{let[name,val]=_ref2;return{name,hours:+(val/60).toFixed(2)};});// 3. Diversidad de actividades (# de IDs únicos)\nconst diversity=new Set(activities.map(a=>a.activityId)).size;// 4. Consistencia diaria: % horas con al menos 1 actividad\nconst covered=slots.filter(s=>s.activities&&s.activities.length>0).length;const consistency=+(covered/24*100).toFixed(1);// 5. Patrón horario: minutos por hora\nconst hourSum={};for(let i=0;i<24;i++)hourSum[i]=0;activities.forEach(a=>{const h=parseInt(a.slot.split(':')[0],10);hourSum[h]+=a.duration;});let maxHour=0;const heatmap=Object.entries(hourSum).map(_ref3=>{let[h,m]=_ref3;if(m>maxHour)maxHour=m;return{hour:`${h}:00`,minutes:m};});// 6. Balance Autocuidado/Obligaciones/Ocio (%)\nconst grpSum={Autocuidado:0,Obligaciones:0,Ocio:0};activities.forEach(a=>{const cat=categoryMap[a.activityId]||'Ocio';const g=groupMap[cat]||'Ocio';grpSum[g]+=a.duration;});const groupBalance=Object.entries(grpSum).map(_ref4=>{let[subject,val]=_ref4;return{subject,value:+(val/totalMin*100).toFixed(1)};});// 7. Ratio Activo/Reposo\nconst active=grpSum.Obligaciones+grpSum.Ocio;const rest=grpSum.Autocuidado;const activeRestRatio=rest>0?+(active/rest).toFixed(2):null;// 8. Tendencia semanal (% por grupo día a día)\nconst trend=allResults.map(r=>{const acts=(r.timeSlots||[]).flatMap(sl=>sl.activities.map(act=>({...act,slot:sl.slot})));const tot=acts.reduce((s,a)=>s+a.duration,0);const sums={Autocuidado:0,Obligaciones:0,Ocio:0};acts.forEach(a=>{const cat=categoryMap[a.activityId]||'Ocio';const g=groupMap[cat]||'Ocio';sums[g]+=a.duration;});return{date:new Date(r.createdAt).toLocaleDateString(),Autocuidado:+(sums.Autocuidado/tot*100).toFixed(1),Obligaciones:+(sums.Obligaciones/tot*100).toFixed(1),Ocio:+(sums.Ocio/tot*100).toFixed(1)};});// 9. Índice de Equilibrio Global (1 = perfecto)\nconst N=distribution.length;const uniform=100/N;const diffSum=distribution.reduce((acc,cat)=>acc+Math.abs(cat.value-uniform),0);const balanceIndex=+(1-diffSum/200).toFixed(2);return{distribution,hours,diversity,consistency,heatmap,maxHour,groupBalance,activeRestRatio,trend,balanceIndex};}// ---------------------------------------------------\n// Render\n// ---------------------------------------------------\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"routines-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"routines-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/therapist/routines\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Estad\\xEDsticas de Rutinas\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"filter-section\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Desde:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:from,onChange:e=>setFrom(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Hasta:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:to,onChange:e=>setTo(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"D\\xEDa:\",/*#__PURE__*/_jsx(\"select\",{value:selected||'',onChange:e=>setSelected(e.target.value),children:filtered.map(r=>{const d=new Date(r.createdAt).toLocaleDateString();return/*#__PURE__*/_jsx(\"option\",{value:r.createdAt,children:d},r.createdAt);})})]})]}),metrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"metrics-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"Diversidad:\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:metrics.diversity})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"Consistencia:\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"strong\",{children:[metrics.consistency,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"Equilibrio:\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:metrics.balanceIndex})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[\"Activo/Reposo:\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:metrics.activeRestRatio})]})]}),metrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"charts-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Distribuci\\xF3n % por Categor\\xEDa\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:metrics.distribution,dataKey:\"value\",nameKey:\"name\",cx:\"50%\",cy:\"50%\",outerRadius:80,label:true,children:metrics.distribution.map((_,i)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[i%COLORS.length]},i))}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Horas por Categor\\xEDa\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(BarChart,{data:metrics.hours,margin:{top:20,right:30,left:0,bottom:0},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"hours\",fill:\"#8884d8\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Balance Autocuidado/Obligaciones/Ocio\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(RadarChart,{data:metrics.groupBalance,cx:\"50%\",cy:\"50%\",outerRadius:80,children:[/*#__PURE__*/_jsx(PolarGrid,{}),/*#__PURE__*/_jsx(PolarAngleAxis,{dataKey:\"subject\"}),/*#__PURE__*/_jsx(PolarRadiusAxis,{angle:30,domain:[0,100]}),/*#__PURE__*/_jsx(Radar,{dataKey:\"value\",stroke:\"#82ca9d\",fill:\"#82ca9d\",fillOpacity:0.6}),/*#__PURE__*/_jsx(Tooltip,{})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ratio Activo/Reposo\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:250,children:/*#__PURE__*/_jsxs(RadialBarChart,{width:300,height:250,cx:\"50%\",cy:\"50%\",innerRadius:\"60%\",outerRadius:\"100%\",data:[{name:'Activo/Reposo',value:metrics.activeRestRatio*100}],startAngle:180,endAngle:0,children:[/*#__PURE__*/_jsx(RadialBar,{minAngle:15,background:true,clockWise:true,dataKey:\"value\"}),/*#__PURE__*/_jsx(Legend,{iconSize:10,layout:\"horizontal\",verticalAlign:\"bottom\",align:\"center\"}),/*#__PURE__*/_jsx(Tooltip,{formatter:val=>`${+(val/100).toFixed(2)}`})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block full-width\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ocupaci\\xF3n Horaria (minutos)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-grid\",children:metrics.heatmap.map((cell,i)=>{const opacity=metrics.maxHour>0?cell.minutes/metrics.maxHour:0;return/*#__PURE__*/_jsx(\"div\",{className:\"heatmap-cell\",style:{backgroundColor:`rgba(8,56,96,${opacity})`},title:`${cell.hour} — ${cell.minutes} min`},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-block full-width\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Tendencia Semanal (% por Grupo)\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:metrics.trend,margin:{top:20,right:30,left:0,bottom:0},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"Autocuidado\",stroke:\"#8884d8\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"Obligaciones\",stroke:\"#82ca9d\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"Ocio\",stroke:\"#ffc658\"}),/*#__PURE__*/_jsx(Legend,{})]})})]})]})]});}export default PatientRoutines;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","PieChart","Pie","Cell","Tooltip","Legend","BarChart","Bar","XAxis","YAxis","CartesianGrid","RadarChart","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Radar","LineChart","Line","RadialBarChart","RadialBar","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","categoryMap","futbol","dibujos","comics","tarea","videojuegos","helado","parque","banio","dormir","musica","bailar","amigos","bicicleta","dibujar","mascotas","experimentos","cantar","lego","nadar","computadora","groupMap","Autocuidado","Obligaciones","Ocio","COLORS","PatientRoutines","patientId","results","setResults","filtered","setFiltered","from","setFrom","to","setTo","selected","setSelected","metrics","setMetrics","token","localStorage","getItem","get","headers","then","resp","data","now","Date","weekAgo","setDate","getDate","toISOString","slice","catch","console","error","fDate","tDate","setHours","filter","r","d","createdAt","length","res","find","computeMetrics","result","allResults","slots","timeSlots","activities","flatMap","slot","map","act","totalMin","reduce","sum","a","duration","catSum","forEach","c","activityId","distribution","Object","entries","_ref","name","val","value","toFixed","hours","_ref2","diversity","Set","size","covered","s","consistency","hourSum","i","h","parseInt","split","maxHour","heatmap","_ref3","m","hour","minutes","grpSum","cat","g","groupBalance","_ref4","subject","active","rest","activeRestRatio","trend","acts","sl","tot","sums","date","toLocaleDateString","N","uniform","diffSum","acc","Math","abs","balanceIndex","className","children","type","onChange","e","target","width","height","dataKey","nameKey","cx","cy","outerRadius","label","_","fill","margin","top","right","left","bottom","strokeDasharray","angle","domain","stroke","fillOpacity","innerRadius","startAngle","endAngle","minAngle","background","clockWise","iconSize","layout","verticalAlign","align","formatter","cell","opacity","style","backgroundColor","title"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientRoutines.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport {\r\n  PieChart, Pie, Cell, Tooltip, Legend,\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid,\r\n  RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar,\r\n  LineChart, Line,\r\n  RadialBarChart, RadialBar,\r\n  ResponsiveContainer\r\n} from 'recharts';\r\nimport '../styles/therapistRoutines.css';\r\n\r\n// Mapeo de activityId → Categoría\r\nconst categoryMap = {\r\n  futbol: 'Ocio', dibujos: 'Ocio', comics: 'Ocio', tarea: 'Obligaciones',\r\n  videojuegos: 'Ocio', helado: 'Ocio', parque: 'Ocio', banio: 'Autocuidado',\r\n  dormir: 'Autocuidado', musica: 'Ocio', bailar: 'Ocio', amigos: 'Ocio',\r\n  bicicleta: 'Ocio', dibujar: 'Ocio', mascotas: 'Ocio',\r\n  experimentos: 'Obligaciones', cantar: 'Ocio', lego: 'Ocio',\r\n  nadar: 'Autocuidado', computadora: 'Ocio'\r\n};\r\n// Mapeo categoría → Grupo para balance\r\nconst groupMap = {\r\n  Autocuidado: 'Autocuidado',\r\n  Obligaciones: 'Obligaciones',\r\n  Ocio: 'Ocio'\r\n};\r\nconst COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff8042', '#0088FE'];\r\n\r\nfunction PatientRoutines() {\r\n  const { patientId } = useParams();\r\n  const [results, setResults] = useState([]);\r\n  const [filtered, setFiltered] = useState([]);\r\n  const [from, setFrom] = useState('');\r\n  const [to, setTo] = useState('');\r\n  const [selected, setSelected] = useState(null);\r\n  const [metrics, setMetrics] = useState(null);\r\n\r\n  // 1. Fetch de todos los resultados\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    axios\r\n      .get(`http://localhost:8080/api/game?patientId=${patientId}`, {\r\n        headers: { 'x-auth-token': token }\r\n      })\r\n      .then(resp => {\r\n        const data = resp.data;\r\n        setResults(data);\r\n        // filtro inicial últimos 7 días\r\n        const now = new Date(), weekAgo = new Date(now);\r\n        weekAgo.setDate(now.getDate() - 6);\r\n        setFrom(weekAgo.toISOString().slice(0, 10));\r\n        setTo(now.toISOString().slice(0, 10));\r\n      })\r\n      .catch(console.error);\r\n  }, [patientId]);\r\n\r\n  // 2. Aplicar filtro de fechas\r\n  useEffect(() => {\r\n    if (!from || !to) return;\r\n    const fDate = new Date(from), tDate = new Date(to);\r\n    tDate.setHours(23, 59, 59, 999);\r\n    setFiltered(results.filter(r => {\r\n      const d = new Date(r.createdAt);\r\n      return d >= fDate && d <= tDate;\r\n    }));\r\n  }, [results, from, to]);\r\n\r\n  // 3. Seleccionar primer resultado\r\n  useEffect(() => {\r\n    if (filtered.length) setSelected(filtered[0].createdAt);\r\n    else setSelected(null);\r\n  }, [filtered]);\r\n\r\n  // 4. Calcular métricas cuando cambie `selected`\r\n  useEffect(() => {\r\n    if (!selected) { setMetrics(null); return; }\r\n    const res = filtered.find(r => r.createdAt === selected);\r\n    if (!res) { setMetrics(null); return; }\r\n    setMetrics(computeMetrics(res, filtered));\r\n  }, [selected, filtered]);\r\n\r\n  // ---------------------------------------------------\r\n  // computeMetrics: extrae TODAS las métricas\r\n  // ---------------------------------------------------\r\n  function computeMetrics(result, allResults) {\r\n    const slots = result.timeSlots || [];\r\n    const activities = slots.flatMap(slot =>\r\n      (slot.activities || []).map(act => ({ ...act, slot: slot.slot }))\r\n    );\r\n    const totalMin = activities.reduce((sum, a) => sum + a.duration, 0);\r\n\r\n    // 1. Distribución % por categoría\r\n    const catSum = {};\r\n    activities.forEach(a => {\r\n      const c = categoryMap[a.activityId] || 'Otros';\r\n      catSum[c] = (catSum[c] || 0) + a.duration;\r\n    });\r\n    const distribution = Object.entries(catSum).map(\r\n      ([name, val]) => ({ name, value: +((val / totalMin) * 100).toFixed(1) })\r\n    );\r\n\r\n    // 2. Horas absolutas por categoría\r\n    const hours = Object.entries(catSum).map(\r\n      ([name, val]) => ({ name, hours: +(val / 60).toFixed(2) })\r\n    );\r\n\r\n    // 3. Diversidad de actividades (# de IDs únicos)\r\n    const diversity = new Set(activities.map(a => a.activityId)).size;\r\n\r\n    // 4. Consistencia diaria: % horas con al menos 1 actividad\r\n    const covered = slots.filter(s => s.activities && s.activities.length > 0).length;\r\n    const consistency = +((covered / 24) * 100).toFixed(1);\r\n\r\n    // 5. Patrón horario: minutos por hora\r\n    const hourSum = {};\r\n    for (let i = 0; i < 24; i++) hourSum[i] = 0;\r\n    activities.forEach(a => {\r\n      const h = parseInt(a.slot.split(':')[0], 10);\r\n      hourSum[h] += a.duration;\r\n    });\r\n    let maxHour = 0;\r\n    const heatmap = Object.entries(hourSum).map(([h, m]) => {\r\n      if (m > maxHour) maxHour = m;\r\n      return { hour: `${h}:00`, minutes: m };\r\n    });\r\n\r\n    // 6. Balance Autocuidado/Obligaciones/Ocio (%)\r\n    const grpSum = { Autocuidado: 0, Obligaciones: 0, Ocio: 0 };\r\n    activities.forEach(a => {\r\n      const cat = categoryMap[a.activityId] || 'Ocio';\r\n      const g = groupMap[cat] || 'Ocio';\r\n      grpSum[g] += a.duration;\r\n    });\r\n    const groupBalance = Object.entries(grpSum).map(\r\n      ([subject, val]) => ({ subject, value: +((val / totalMin) * 100).toFixed(1) })\r\n    );\r\n\r\n    // 7. Ratio Activo/Reposo\r\n    const active = grpSum.Obligaciones + grpSum.Ocio;\r\n    const rest = grpSum.Autocuidado;\r\n    const activeRestRatio = rest > 0 ? +(active / rest).toFixed(2) : null;\r\n\r\n    // 8. Tendencia semanal (% por grupo día a día)\r\n    const trend = allResults.map(r => {\r\n      const acts = (r.timeSlots || []).flatMap(sl =>\r\n        sl.activities.map(act => ({ ...act, slot: sl.slot }))\r\n      );\r\n      const tot = acts.reduce((s, a) => s + a.duration, 0);\r\n      const sums = { Autocuidado: 0, Obligaciones: 0, Ocio: 0 };\r\n      acts.forEach(a => {\r\n        const cat = categoryMap[a.activityId] || 'Ocio';\r\n        const g = groupMap[cat] || 'Ocio';\r\n        sums[g] += a.duration;\r\n      });\r\n      return {\r\n        date: new Date(r.createdAt).toLocaleDateString(),\r\n        Autocuidado: +( (sums.Autocuidado / tot) * 100 ).toFixed(1),\r\n        Obligaciones:+( (sums.Obligaciones / tot) * 100 ).toFixed(1),\r\n        Ocio:       +( (sums.Ocio / tot) * 100 ).toFixed(1)\r\n      };\r\n    });\r\n\r\n    // 9. Índice de Equilibrio Global (1 = perfecto)\r\n    const N = distribution.length;\r\n    const uniform = 100 / N;\r\n    const diffSum = distribution.reduce((acc, cat) =>\r\n      acc + Math.abs(cat.value - uniform), 0\r\n    );\r\n    const balanceIndex = +((1 - (diffSum / 200)) ).toFixed(2);\r\n\r\n    return {\r\n      distribution, hours, diversity, consistency,\r\n      heatmap, maxHour, groupBalance,\r\n      activeRestRatio, trend, balanceIndex\r\n    };\r\n  }\r\n\r\n  // ---------------------------------------------------\r\n  // Render\r\n  // ---------------------------------------------------\r\n  return (\r\n    <div className=\"routines-container\">\r\n      <header className=\"routines-header\">\r\n        <Link to=\"/therapist/routines\">← Volver</Link>\r\n        <h2>Estadísticas de Rutinas</h2>\r\n      </header>\r\n\r\n      <section className=\"filter-section\">\r\n        <label>\r\n          Desde:\r\n          <input\r\n            type=\"date\"\r\n            value={from}\r\n            onChange={e => setFrom(e.target.value)}\r\n          />\r\n        </label>\r\n        <label>\r\n          Hasta:\r\n          <input\r\n            type=\"date\"\r\n            value={to}\r\n            onChange={e => setTo(e.target.value)}\r\n          />\r\n        </label>\r\n        <label>\r\n          Día:\r\n          <select\r\n            value={selected || ''}\r\n            onChange={e => setSelected(e.target.value)}\r\n          >\r\n            {filtered.map(r => {\r\n              const d = new Date(r.createdAt).toLocaleDateString();\r\n              return (\r\n                <option key={r.createdAt} value={r.createdAt}>\r\n                  {d}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </label>\r\n      </section>\r\n\r\n      {metrics && (\r\n        <div className=\"metrics-grid\">\r\n          <div className=\"metric-card\">Diversidad:<br/><strong>{metrics.diversity}</strong></div>\r\n          <div className=\"metric-card\">Consistencia:<br/><strong>{metrics.consistency}%</strong></div>\r\n          <div className=\"metric-card\">Equilibrio:<br/><strong>{metrics.balanceIndex}</strong></div>\r\n          <div className=\"metric-card\">Activo/Reposo:<br/><strong>{metrics.activeRestRatio}</strong></div>\r\n        </div>\r\n      )}\r\n\r\n      {metrics && (\r\n        <div className=\"charts-grid\">\r\n          <div className=\"chart-block\">\r\n            <h3>Distribución % por Categoría</h3>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <PieChart>\r\n                <Pie\r\n                  data={metrics.distribution}\r\n                  dataKey=\"value\"\r\n                  nameKey=\"name\"\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  outerRadius={80}\r\n                  label\r\n                >\r\n                  {metrics.distribution.map((_, i) => (\r\n                    <Cell key={i} fill={COLORS[i % COLORS.length]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip />\r\n                <Legend />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          <div className=\"chart-block\">\r\n            <h3>Horas por Categoría</h3>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <BarChart data={metrics.hours} margin={{ top: 20, right: 30, left: 0, bottom: 0 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n                <Bar dataKey=\"hours\" fill=\"#8884d8\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          <div className=\"chart-block\">\r\n            <h3>Balance Autocuidado/Obligaciones/Ocio</h3>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <RadarChart data={metrics.groupBalance} cx=\"50%\" cy=\"50%\" outerRadius={80}>\r\n                <PolarGrid />\r\n                <PolarAngleAxis dataKey=\"subject\" />\r\n                <PolarRadiusAxis angle={30} domain={[0, 100]} />\r\n                <Radar dataKey=\"value\" stroke=\"#82ca9d\" fill=\"#82ca9d\" fillOpacity={0.6} />\r\n                <Tooltip />\r\n              </RadarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          <div className=\"chart-block\">\r\n            <h3>Ratio Activo/Reposo</h3>\r\n            <ResponsiveContainer width=\"100%\" height={250}>\r\n              <RadialBarChart\r\n                width={300}\r\n                height={250}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                innerRadius=\"60%\"\r\n                outerRadius=\"100%\"\r\n                data={[{ name: 'Activo/Reposo', value: metrics.activeRestRatio * 100 }]}\r\n                startAngle={180}\r\n                endAngle={0}\r\n              >\r\n                <RadialBar\r\n                  minAngle={15}\r\n                  background\r\n                  clockWise\r\n                  dataKey=\"value\"\r\n                />\r\n                <Legend iconSize={10} layout=\"horizontal\" verticalAlign=\"bottom\" align=\"center\" />\r\n                <Tooltip formatter={val => `${+(val/100).toFixed(2)}`} />\r\n              </RadialBarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          <div className=\"chart-block full-width\">\r\n            <h3>Ocupación Horaria (minutos)</h3>\r\n            <div className=\"heatmap-grid\">\r\n              {metrics.heatmap.map((cell, i) => {\r\n                const opacity = metrics.maxHour > 0 ? cell.minutes / metrics.maxHour : 0;\r\n                return (\r\n                  <div\r\n                    key={i}\r\n                    className=\"heatmap-cell\"\r\n                    style={{ backgroundColor: `rgba(8,56,96,${opacity})` }}\r\n                    title={`${cell.hour} — ${cell.minutes} min`}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"chart-block full-width\">\r\n            <h3>Tendencia Semanal (% por Grupo)</h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={metrics.trend} margin={{ top: 20, right: 30, left: 0, bottom: 0 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"date\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n                <Line type=\"monotone\" dataKey=\"Autocuidado\" stroke=\"#8884d8\" />\r\n                <Line type=\"monotone\" dataKey=\"Obligaciones\" stroke=\"#82ca9d\" />\r\n                <Line type=\"monotone\" dataKey=\"Ocio\" stroke=\"#ffc658\" />\r\n                <Legend />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PatientRoutines;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}