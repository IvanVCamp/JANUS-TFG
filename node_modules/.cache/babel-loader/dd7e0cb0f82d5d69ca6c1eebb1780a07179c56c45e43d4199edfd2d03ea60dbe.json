{"ast":null,"code":"// src/components/PatientTemplateDetail.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import{useParams,Link}from'react-router-dom';import'../styles/routineTemplates.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function decodeJwt(token){try{const b64Url=token.split('.')[1];const b64=b64Url.replace(/-/g,'+').replace(/_/g,'/');const json=atob(b64);return JSON.parse(json);}catch{return null;}}function getPatientId(){var _payload$user;const raw=localStorage.getItem('token');if(!raw)return null;const token=raw.startsWith('Bearer ')?raw.slice(7):raw;const payload=decodeJwt(token);return(payload===null||payload===void 0?void 0:payload.id)||(payload===null||payload===void 0?void 0:payload.sub)||(payload===null||payload===void 0?void 0:(_payload$user=payload.user)===null||_payload$user===void 0?void 0:_payload$user.id)||localStorage.getItem('userId');}export default function PatientTemplateDetail(){var _tpl$tags;const{instanceId}=useParams();const[instance,setInstance]=useState(null);const[notes,setNotes]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchDetail=async()=>{const token=localStorage.getItem('token');const patientId=getPatientId();if(!token||!patientId){setError('No estás autenticado. Por favor, inicia sesión.');setLoading(false);return;}try{const res=await axios.get(`/api/routines/instances/${patientId}`,{headers:{'x-auth-token':token}});const list=Array.isArray(res.data)?res.data:Array.isArray(res.data.instances)?res.data.instances:[];const found=list.find(i=>i._id===instanceId);if(!found){setError('No se encontró la plantilla solicitada.');}else{setInstance(found);// Inicializar notas vacías\nconst initNotes={};found.template.activities.forEach((_,idx)=>{initNotes[idx]='';});setNotes(initNotes);}}catch(err){var _err$response,_err$response$data;console.error(err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Error al cargar detalles');}finally{setLoading(false);}};fetchDetail();},[instanceId]);const toggleActivity=async idx=>{if(!instance)return;const token=localStorage.getItem('token');const was=instance.completedActivities.includes(idx);try{await axios.post(`/api/routines/instances/${instanceId}/activities/${idx}`,{completed:!was},{headers:{'x-auth-token':token}});setInstance(inst=>({...inst,completedActivities:was?inst.completedActivities.filter(i=>i!==idx):[...inst.completedActivities,idx],updatedAt:new Date().toISOString()}));}catch(err){console.error(err);setError('No se pudo actualizar la actividad.');}};const handleNoteChange=(idx,text)=>{setNotes(n=>({...n,[idx]:text}));};const saveNote=idx=>{// Aquí podrías enviar la nota al servidor; de momento es solo local\nconsole.log(`Nota para actividad ${idx}:`,notes[idx]);};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Cargando detalles\\u2026\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:error});if(!instance)return null;const tpl=instance.template;const total=tpl.activities.length;const done=instance.completedActivities.length;const percent=Math.round(done/total*100);return/*#__PURE__*/_jsx(\"div\",{className:\"routine-templates-page patient-templates-page tpl-detail-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-container detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/patient/templates\",className:\"back-link\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"detail-title\",children:tpl.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-filled\",style:{width:`${percent}%`},\"aria-label\":`${percent}% completado`})}),/*#__PURE__*/_jsxs(\"p\",{className:\"progress-text\",children:[done,\" de \",total,\" actividades completadas (\",percent,\"%)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"tags-container\",children:(_tpl$tags=tpl.tags)===null||_tpl$tags===void 0?void 0:_tpl$tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"tag-badge\",children:tag},tag))}),/*#__PURE__*/_jsxs(\"div\",{className:`challenge-indicator level-${tpl.challengeLevel}`,children:[\"Reto nivel \",tpl.challengeLevel]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tpl-meta detail-meta\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-calendar\"}),\" Asignado: \",new Date(instance.createdAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-clock-o\"}),\" Duraci\\xF3n: \",tpl.duration,\" min\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-flag\"}),\" Actividades: \",total]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-refresh\"}),\" \\xDAltima actualizaci\\xF3n: \",new Date(instance.updatedAt||instance.createdAt).toLocaleString()]})]}),tpl.description&&/*#__PURE__*/_jsxs(\"section\",{className:\"tpl-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-content\",children:tpl.description})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"tpl-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Actividades Detalladas\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"activities-detailed-list\",children:tpl.activities.map((act,i)=>{const completed=instance.completedActivities.includes(i);return/*#__PURE__*/_jsxs(\"li\",{className:`activity-detail-item ${completed?'completed':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"activity-main\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"drag-handle\",children:\"\\u2261\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:completed,onChange:()=>toggleActivity(i)}),/*#__PURE__*/_jsx(\"span\",{className:\"activity-name\",children:act.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-info-icons\",children:[/*#__PURE__*/_jsxs(\"span\",{title:\"Duraci\\xF3n\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-clock-o\"}),\" \",act.minutes,\" min\"]}),/*#__PURE__*/_jsxs(\"span\",{title:\"Nivel de reto\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-star\"}),\" \",act.challenge]})]})]}),act.desc&&/*#__PURE__*/_jsx(\"p\",{className:\"activity-desc\",children:act.desc}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-notes\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Tus notas...\",value:notes[i]||'',onChange:e=>handleNoteChange(i,e.target.value)}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>saveNote(i),className:\"btn-note\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-save\"}),\" Guardar nota\"]})]})]},i);})})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","Link","jsx","_jsx","jsxs","_jsxs","decodeJwt","token","b64Url","split","b64","replace","json","atob","JSON","parse","getPatientId","_payload$user","raw","localStorage","getItem","startsWith","slice","payload","id","sub","user","PatientTemplateDetail","_tpl$tags","instanceId","instance","setInstance","notes","setNotes","loading","setLoading","error","setError","fetchDetail","patientId","res","get","headers","list","Array","isArray","data","instances","found","find","i","_id","initNotes","template","activities","forEach","_","idx","err","_err$response","_err$response$data","console","response","msg","toggleActivity","was","completedActivities","includes","post","completed","inst","filter","updatedAt","Date","toISOString","handleNoteChange","text","n","saveNote","log","children","className","tpl","total","length","done","percent","Math","round","to","name","style","width","tags","map","tag","challengeLevel","createdAt","toLocaleDateString","duration","toLocaleString","description","act","type","checked","onChange","title","minutes","challenge","desc","placeholder","value","e","target","onClick"],"sources":["C:/Users/User/Desktop/TFG/prototipo-TFG/Janus-TFG/src/components/PatientTemplateDetail.js"],"sourcesContent":["// src/components/PatientTemplateDetail.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport '../styles/routineTemplates.css';\r\n\r\nfunction decodeJwt(token) {\r\n  try {\r\n    const b64Url = token.split('.')[1];\r\n    const b64    = b64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    const json   = atob(b64);\r\n    return JSON.parse(json);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction getPatientId() {\r\n  const raw = localStorage.getItem('token');\r\n  if (!raw) return null;\r\n  const token = raw.startsWith('Bearer ') ? raw.slice(7) : raw;\r\n  const payload = decodeJwt(token);\r\n  return payload?.id || payload?.sub || payload?.user?.id || localStorage.getItem('userId');\r\n}\r\n\r\nexport default function PatientTemplateDetail() {\r\n  const { instanceId } = useParams();\r\n  const [instance, setInstance] = useState(null);\r\n  const [notes, setNotes]       = useState({});\r\n  const [loading, setLoading]   = useState(true);\r\n  const [error, setError]       = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchDetail = async () => {\r\n      const token     = localStorage.getItem('token');\r\n      const patientId = getPatientId();\r\n      if (!token || !patientId) {\r\n        setError('No estás autenticado. Por favor, inicia sesión.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await axios.get(\r\n          `/api/routines/instances/${patientId}`,\r\n          { headers: { 'x-auth-token': token } }\r\n        );\r\n        const list = Array.isArray(res.data)\r\n          ? res.data\r\n          : Array.isArray(res.data.instances)\r\n            ? res.data.instances\r\n            : [];\r\n        const found = list.find(i => i._id === instanceId);\r\n        if (!found) {\r\n          setError('No se encontró la plantilla solicitada.');\r\n        } else {\r\n          setInstance(found);\r\n          // Inicializar notas vacías\r\n          const initNotes = {};\r\n          found.template.activities.forEach((_, idx) => {\r\n            initNotes[idx] = '';\r\n          });\r\n          setNotes(initNotes);\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(err.response?.data?.msg || 'Error al cargar detalles');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDetail();\r\n  }, [instanceId]);\r\n\r\n  const toggleActivity = async idx => {\r\n    if (!instance) return;\r\n    const token = localStorage.getItem('token');\r\n    const was   = instance.completedActivities.includes(idx);\r\n    try {\r\n      await axios.post(\r\n        `/api/routines/instances/${instanceId}/activities/${idx}`,\r\n        { completed: !was },\r\n        { headers: { 'x-auth-token': token } }\r\n      );\r\n      setInstance(inst => ({\r\n        ...inst,\r\n        completedActivities: was\r\n          ? inst.completedActivities.filter(i => i !== idx)\r\n          : [...inst.completedActivities, idx],\r\n        updatedAt: new Date().toISOString()\r\n      }));\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError('No se pudo actualizar la actividad.');\r\n    }\r\n  };\r\n\r\n  const handleNoteChange = (idx, text) => {\r\n    setNotes(n => ({ ...n, [idx]: text }));\r\n  };\r\n\r\n  const saveNote = idx => {\r\n    // Aquí podrías enviar la nota al servidor; de momento es solo local\r\n    console.log(`Nota para actividad ${idx}:`, notes[idx]);\r\n  };\r\n\r\n  if (loading) return <p>Cargando detalles…</p>;\r\n  if (error)   return <p className=\"error-msg\">{error}</p>;\r\n  if (!instance) return null;\r\n\r\n  const tpl       = instance.template;\r\n  const total     = tpl.activities.length;\r\n  const done      = instance.completedActivities.length;\r\n  const percent   = Math.round((done / total) * 100);\r\n\r\n  return (\r\n    <div className=\"routine-templates-page patient-templates-page tpl-detail-page\">\r\n      <div className=\"tpl-container detail-container\">\r\n        {/* Header con Back y título */}\r\n        <div className=\"detail-header\">\r\n          <Link to=\"/patient/templates\" className=\"back-link\">← Volver</Link>\r\n          <h1 className=\"detail-title\">{tpl.name}</h1>\r\n        </div>\r\n\r\n        {/* Progreso */}\r\n        <div className=\"progress-bar\">\r\n          <div\r\n            className=\"progress-filled\"\r\n            style={{ width: `${percent}%` }}\r\n            aria-label={`${percent}% completado`}\r\n          />\r\n        </div>\r\n        <p className=\"progress-text\">\r\n          {done} de {total} actividades completadas ({percent}%)\r\n        </p>\r\n\r\n        {/* Etiquetas como badges */}\r\n        <div className=\"tags-container\">\r\n          {tpl.tags?.map(tag => (\r\n            <span key={tag} className=\"tag-badge\">{tag}</span>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Indicador de reto */}\r\n        <div className={`challenge-indicator level-${tpl.challengeLevel}`}>\r\n          Reto nivel {tpl.challengeLevel}\r\n        </div>\r\n\r\n        {/* Metadatos */}\r\n        <div className=\"tpl-meta detail-meta\">\r\n          <div><i className=\"fa fa-calendar\"></i> Asignado: {new Date(instance.createdAt).toLocaleDateString()}</div>\r\n          <div><i className=\"fa fa-clock-o\"></i> Duración: {tpl.duration} min</div>\r\n          <div><i className=\"fa fa-flag\"></i> Actividades: {total}</div>\r\n          <div><i className=\"fa fa-refresh\"></i> Última actualización: {new Date(instance.updatedAt||instance.createdAt).toLocaleString()}</div>\r\n        </div>\r\n\r\n        {/* Descripción general */}\r\n        {tpl.description && (\r\n          <section className=\"tpl-section\">\r\n            <h2 className=\"section-title\">Descripción</h2>\r\n            <p className=\"section-content\">{tpl.description}</p>\r\n          </section>\r\n        )}\r\n\r\n        {/* Actividades detalladas */}\r\n        <section className=\"tpl-section\">\r\n          <h2 className=\"section-title\">Actividades Detalladas</h2>\r\n          <ul className=\"activities-detailed-list\">\r\n            {tpl.activities.map((act, i) => {\r\n              const completed = instance.completedActivities.includes(i);\r\n              return (\r\n                <li key={i} className={`activity-detail-item ${completed ? 'completed' : ''}`}>\r\n                  <div className=\"activity-main\">\r\n                    <span className=\"drag-handle\">≡</span>\r\n                    <label className=\"checkbox-label\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={completed}\r\n                        onChange={() => toggleActivity(i)}\r\n                      />\r\n                      <span className=\"activity-name\">{act.name}</span>\r\n                    </label>\r\n                    <div className=\"activity-info-icons\">\r\n                      <span title=\"Duración\"><i className=\"fa fa-clock-o\"></i> {act.minutes} min</span>\r\n                      <span title=\"Nivel de reto\"><i className=\"fa fa-star\"></i> {act.challenge}</span>\r\n                    </div>\r\n                  </div>\r\n                  {act.desc && (\r\n                    <p className=\"activity-desc\">{act.desc}</p>\r\n                  )}\r\n                  {/* Notas del paciente */}\r\n                  <div className=\"activity-notes\">\r\n                    <textarea\r\n                      placeholder=\"Tus notas...\"\r\n                      value={notes[i] || ''}\r\n                      onChange={e => handleNoteChange(i, e.target.value)}\r\n                    />\r\n                    <button onClick={() => saveNote(i)} className=\"btn-note\">\r\n                      <i className=\"fa fa-save\"></i> Guardar nota\r\n                    </button>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}